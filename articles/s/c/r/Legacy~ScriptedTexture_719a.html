<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- headlinks removed -->
	<link rel="shortcut icon" href="../../../../misc/uewiki-favicon.png"/>
    <title>Legacy:ScriptedTexture - Unreal Wiki</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../../skins/offline/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/md5.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/utf8.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/lookup.js"></script>
    <script type="text/javascript" src="../../../../articles/-/_/_/-.html"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../../articles/c/o/m/MediaWiki%7ECommon.css_d42e.html";
@import "../../../../articles/m/o/n/MediaWiki%7EMonobook.css_fb19.html";
@import "../../../../articles/-/_/_/-.html";
/*]]>*/</style>          </head>
  <body
    class="ns-100">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Legacy:ScriptedTexture</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</h3>
	    <div id="contentSub"></div>
	    	    	    <!-- start content -->
	    <div class="infobox infobox-class infobox-legacy"><a href="../../../../articles/u/t/2/Legacy%7EUT2003_f97b.html" class="mw-redirect" title="Legacy:UT2003">UT2003</a>&#160;:: <a href="../../../../articles/o/b/j/Legacy%7EObject_f294.html" title="Legacy:Object">Object</a> &gt;&gt; <a href="../../../../articles/m/a/t/Legacy%7EMaterial_8b3a.html" title="Legacy:Material">Material</a> &gt;&gt; <a href="../../../../articles/r/e/n/Legacy%7ERenderedMaterial_f6a5.html" title="Legacy:RenderedMaterial">RenderedMaterial</a> &gt;&gt; <a href="../../../../articles/b/i/t/Legacy%7EBitmapMaterial_5156.html" title="Legacy:BitmapMaterial">BitmapMaterial</a> &gt;&gt; ScriptedTexture (Package: Engine)</div>
<p>A ScriptedTexture is a <a href="../../../../articles/d/y/n/Legacy%7EDynamic_Texture_768b.html" title="Legacy:Dynamic Texture">dynamic texture</a> that can be drawn on in real-time with UnrealScript, used (for instance) for the monitors in DM-Insidious.</p>
<p><b>NOTE:</b> ScriptedTextures do not work in the software or OpenGL renderers. If you use ScriptedTextures people on Mac or Linux and people using the software renderer will just see white. Epic has stated that this issue will not be resolved.</p>
<p><b>Solid Snake:</b> I think this is now no longer true. I recall reading somewhere that scripted textures now work in OpenGL. Not sure about either Linux/Mac, but I assume since the Linux version of UT2004 is primarily OpenGL (I think...) it should also work there. Here is a indirect reference, <a href="http://www.unrealadmin.org/forums/printthread.php?threadid=12874" class="external free" title="http://www.unrealadmin.org/forums/printthread.php?threadid=12874" rel="nofollow">http://www.unrealadmin.org/forums/printthread.php?threadid=12874</a>. It states that OpenGL no longer renders ScriptedTextures upside down...</p>
<p><b>Bob_The_Beheader:</b> I use OpenGL in the Windows version, and the scripted textures do not appear. It's slightly annoying. I like seeing my nick on the hellbender licence plate.</p>
<p>See <a href="../../../../articles/s/c/r/Legacy%7EScriptedTexture_%28UT%29_ad75.html" title="Legacy:ScriptedTexture (UT)">ScriptedTexture (UT)</a> for the UT version of this class.</p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#Properties"><span class="tocnumber">1</span> <span class="toctext">Properties</span></a></li>
<li class="toclevel-1"><a href="#Methods"><span class="tocnumber">2</span> <span class="toctext">Methods</span></a></li>
<li class="toclevel-1"><a href="#Creation_in_Code"><span class="tocnumber">3</span> <span class="toctext">Creation in Code</span></a></li>
<li class="toclevel-1"><a href="#Creation_in_UnrealEd"><span class="tocnumber">4</span> <span class="toctext">Creation in UnrealEd</span></a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script>
<p><a name="Properties" id="Properties"></a></p>
<h2><span class="mw-headline">Properties</span></h2>
<dl>
<dt><a href="../../../../articles/a/c/t/Legacy%7EActor_5985.html" title="Legacy:Actor">Actor</a> Client&#160;</dt>
<dd>The actor which is responsible for drawing the dynamic content on this ScriptedTexture.<br />
Each frame when <tt>Revision &gt; OldRevision</tt>, this actor's RenderTexture event is called. <a href="../../../../articles/c/a/m/Legacy%7ECameraTextureClient_33c2.html" title="Legacy:CameraTextureClient">CameraTextureClients</a> point their assigned ScriptedTexture's Client property to themselves on game start.</dd>
<dt>int OldRevision (transient, const)&#160;</dt>
<dd>The last drawn revision.</dd>
<dt>int RenderTarget (transient, const)&#160;</dt>
<dt><a href="../../../../articles/v/i/e/Legacy%7EViewport_b6d2.html" title="Legacy:Viewport">Viewport</a> RenderViewport (transient, const)&#160;</dt>
<dt>int Revision (transient)&#160;</dt>
<dd>Current revision. Increment this property to redraw the ScriptedTexture the next frame it is used.</dd>
</dl>
<p><a name="Methods" id="Methods"></a></p>
<h2><span class="mw-headline">Methods</span></h2>
<p>All these methods are native and final.</p>
<dl>
<dt>DrawPortal (int X, int Y, int Width, int Height, <a href="../../../../articles/a/c/t/Legacy%7EActor_5985.html" title="Legacy:Actor">Actor</a> CamActor, vector CamLocation, rotator CamRotation, optional int FOV, optional bool ClearZ)&#160;</dt>
<dd>In the rectangle set by X, Y, Width, and Height, draws what the viewport would render from a camera at CamActor's position, offset by CamLocation, rotated by CamRotation. Absolutely impossible to do in UT, this is the Right Way to set up for a bank of CCTV monitors if you don't use <a href="../../../../articles/c/a/m/Legacy%7ECameraTextureClient_33c2.html" title="Legacy:CameraTextureClient">CameraTextureClients</a>.</dd>
<dt>DrawText (int StartX, int StartY, coerce string Text, Font Font, Color Color)&#160;</dt>
<dd>Draws text in the given font and color at the given position.</dd>
<dt>DrawTile (float X, float Y, float XL, float YL, float U, float V, float UL, float VL, <a href="../../../../articles/m/a/t/Legacy%7EMaterial_8b3a.html" title="Legacy:Material">Material</a> Material, Color Color)&#160;</dt>
<dd>Draws a material tile on the ScriptedTexture at the given X/Y position, stretched to XL/YL pixels, and taken from the area specified by U/V (horizontal/vertical texel offset) and UL/VL (width/height) from the given material.</dd>
<dt>SetSize (int Width,int Height)&#160;</dt>
<dd>Sets the size of the ScriptedTexture.</dd>
<dt>TextSize (coerce string Text, Font Font, out int Width, out int Height)&#160;</dt>
<dd>Returns the size of the given text in the given font in the out parameters Width and Height.</dd>
</dl>
<p><a name="Creation_in_Code" id="Creation_in_Code"></a></p>
<h2><span class="mw-headline">Creation in Code</span></h2>
<p>A simple example of creating a new scripted texture for an actor dynamically at runtime.</p>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="kw5">var</span> <span class="kw6">protected</span> ScriptedTexture MyScriptedTexture;
<span class="kw5">var</span> <span class="kw6">protected</span> <span class="kw4">string</span> MyMessage;
<span class="kw5">var</span> <span class="kw6">protected</span> <span class="kw5">const</span> Font MyFont;
<span class="kw5">var</span> <span class="kw6">protected</span> <span class="kw5">const</span> <span class="kw4">color</span> MyFontColor;
 
<span class="kw5">event</span> PostBeginPlay<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
  <span class="kw6">Super</span>.<span class="me1">PostBeginPlay</span><span class="br0">(</span><span class="br0">)</span>;
 
  <span class="co1">// Allocate a new scripted texture from the pool</span>
  <span class="co1">// and have it call us for updates.</span>
  MyScriptedTexture = ScriptedTexture<span class="br0">(</span>
    <span class="kw8">Level</span>.<span class="me1">ObjectPool</span>.<span class="me1">AllocateObject</span><span class="br0">(</span> <span class="kw5">class</span><span class="st0">'ScriptedTexture'</span> <span class="br0">)</span> <span class="br0">)</span>;
  MyScriptedTexture.<span class="me1">SetSize</span><span class="br0">(</span> <span class="nu0">256</span>, <span class="nu0">256</span> <span class="br0">)</span>;
  MyScriptedTexture.<span class="me1">Client</span> = <span class="kw8">Self</span>;
 
  <span class="co1">// Attach the texture to one of the actors</span>
  <span class="co1">// skin materials.</span>
  Skins<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> = MyScriptedTexture;
 
  SetMessage<span class="br0">(</span> <span class="st0">"Hello Texture!"</span> <span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw5">event</span> Destroyed<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
  <span class="co1">// You should disconnect the object </span>
  <span class="co1">// pool texture from everything you've</span>
  <span class="co1">// assigned it to.</span>
  Skins<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> = <span class="kw9">None</span>;
 
  <span class="co1">// Clean up else you will leak resources.</span>
  <span class="kw1">assert</span><span class="br0">(</span> MyScriptedTexture != <span class="kw9">None</span> <span class="br0">)</span>;
  <span class="kw8">Level</span>.<span class="me1">ObjectPool</span>.<span class="me1">FreeObject</span><span class="br0">(</span> MyScriptedTexture <span class="br0">)</span>;
  MyScriptedTexture = <span class="kw9">None</span>;
 
  <span class="kw6">Super</span>.<span class="me1">Destroyed</span><span class="br0">(</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw5">function</span> SetMessage<span class="br0">(</span> <span class="kw4">string</span> NewMessage <span class="br0">)</span>
<span class="br0">{</span>
  <span class="co1">// Change the message and force an update</span>
  <span class="co1">// of the scripted texture on the next </span>
  <span class="co1">// frame it's visible.</span>
  MyMessage = NewMessage;
  <span class="kw1">assert</span><span class="br0">(</span> MyScriptedTexture != <span class="kw9">None</span> <span class="br0">)</span>;
  ++MyScriptedTexture.<span class="me1">Revision</span>;
<span class="br0">}</span>
 
<span class="kw5">event</span> RenderTexture<span class="br0">(</span> ScriptedTexture Tex <span class="br0">)</span>
<span class="br0">{</span>
  <span class="kw5">local</span> <span class="kw4">int</span> w, h;
 
  <span class="kw1">assert</span><span class="br0">(</span> Tex == MyScriptedTexture <span class="br0">)</span>;
 
  <span class="co1">// Draw the text centered.</span>
  Tex.<span class="me1">TextSize</span><span class="br0">(</span> MyMessage, MyFont, w, h <span class="br0">)</span>;
  Tex.<span class="me1">DrawText</span><span class="br0">(</span> <span class="br0">(</span> Tex.<span class="me1">USize</span> / <span class="nu0">2</span> <span class="br0">)</span> - <span class="br0">(</span> w / <span class="nu0">2</span> <span class="br0">)</span>,
    <span class="br0">(</span> Tex.<span class="me1">VSize</span> / <span class="nu0">2</span> <span class="br0">)</span> - <span class="br0">(</span> h / <span class="nu0">2</span> <span class="br0">)</span>,
    MyMessage, MyFont, MyFontColor <span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">defaultproperties</span>
<span class="br0">{</span>
  MyFont=Font<span class="st0">'UT2003Fonts.FontNeuzeit17'</span>
  MyFontColor=<span class="br0">(</span>R=<span class="nu0">0</span>,G=<span class="nu0">255</span>,B=<span class="nu0">0</span>,A=<span class="nu0">255</span><span class="br0">)</span>
<span class="br0">}</span>
</pre></div>
<p><b>Shambler:</b> Scripted textures have a problem with rendering maps containing skyboxes when UseStencil is set to True in UT2004.ini but when UseStencil is False warp zones and some other things stop working, here is a little hack I coded which gets them to work together&#160;:)</p>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="kw6">simulated</span> <span class="kw5">event</span> RenderTexture<span class="br0">(</span>ScriptedTexture Tex<span class="br0">)</span>
<span class="br0">{</span>
        <span class="kw5">local</span> RenderDevice rDev;
        <span class="kw5">local</span> <span class="kw4">string</span> sInitVal;
 
        <span class="co1">// Lovely hack for scripted textures :)</span>
        rDev = GameEngine<span class="br0">(</span><span class="kw7">FindObject</span><span class="br0">(</span><span class="st0">"Package.GameEngine"</span>, <span class="kw5">Class</span><span class="st0">'GameEngine'</span><span class="br0">)</span><span class="br0">)</span>.<span class="me1">GRenDev</span>;
 
        sInitVal = rDev.<span class="me1">GetPropertyText</span><span class="br0">(</span><span class="st0">"UseStencil"</span><span class="br0">)</span>;
        rDev.<span class="kw7">SetPropertyText</span><span class="br0">(</span><span class="st0">"UseStencil"</span>, <span class="st0">"False"</span><span class="br0">)</span>;
 
        <span class="co1">// Draw stuff</span>
 
        rDev.<span class="kw7">SetPropertyText</span><span class="br0">(</span><span class="st0">"UseStencil"</span>, sInitVal<span class="br0">)</span>;
<span class="br0">}</span>
</pre></div>
<p><a name="Creation_in_UnrealEd" id="Creation_in_UnrealEd"></a></p>
<h2><span class="mw-headline">Creation in UnrealEd</span></h2>
<p>This page describes how to make a ScriptedTexture in UnrealEd and draw some text on it with script: <a href="../../../../articles/w/r/i/Legacy%7EWriting_On_ScriptedTextures_22d4.html" title="Legacy:Writing On ScriptedTextures">Writing On ScriptedTextures</a>.</p>

<!-- 
NewPP limit report
Preprocessor node count: 22/1000000
Post-expand include size: 300/2097152 bytes
Template argument size: 214/2097152 bytes
#ifexist count: 0/100
-->
<div class="printfooter">
</div>
	    <div id="catlinks"><p class='catlinks'><a href="../../../../articles/c/a/t/Special%7ECategories_101d.html" title="Special:Categories">Categories</a>: <span dir='ltr'><a href="../../../../articles/l/e/g/Category%7ELegacy_To_Do_47ce.html" title="Category:Legacy To Do">Legacy To Do</a></span> | <span dir='ltr'><a href="../../../../articles/l/e/g/Category%7ELegacy_Class_%28UT2003%29_1edb.html" title="Category:Legacy Class (UT2003)">Legacy Class (UT2003)</a></span></p></div>	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-legacy"
	       class="selected"	       ><a href="../../../../articles/s/c/r/Legacy%7EScriptedTexture_719a.html">Legacy</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../../articles/s/c/r/Legacy_talk%7EScriptedTexture_4c1f.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://wiki.beyondunreal.com/Legacy:ScriptedTexture">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../../misc/uewiki.png);"
	    href="../../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-mainpage"><a href="../../../../index.html">Main Page</a></li>
	     	      <li id="n-portal"><a href="../../../../articles/c/o/m/Unreal_Wiki%7ECommunity_Portal_3311.html">Community portal</a></li>
	     	      <li id="n-help"><a href="../../../../articles/c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="../../../../../COPYING.html"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt='Attribution-Noncommercial-Share Alike 3.0' /></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 19:09, 26 September 2006 by Anonymous user(s) of Unreal Wiki. </li>	  <li id="f-copyright">Licensed as <a href="../../../../articles/c/o/p/Unreal_Wiki%7ECopyrights_e561.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>	  <li id="f-about"><a href="../../../../articles/a/b/o/Unreal_Wiki%7EAbout_9ce6.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>	  <li id="f-disclaimer"><a href="../../../../articles/g/e/n/Unreal_Wiki%7EGeneral_disclaimer_a0a2.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>
