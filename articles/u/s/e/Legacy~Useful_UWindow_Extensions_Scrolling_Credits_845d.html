<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- headlinks removed -->
	<link rel="shortcut icon" href="../../../../misc/uewiki-favicon.png"/>
    <title>Legacy:Useful UWindow Extensions/Scrolling Credits - Unreal Wiki</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../../skins/offline/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/md5.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/utf8.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/lookup.js"></script>
    <script type="text/javascript" src="../../../../articles/-/_/_/-.html"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../../articles/c/o/m/MediaWiki%7ECommon.css_d42e.html";
@import "../../../../articles/m/o/n/MediaWiki%7EMonobook.css_fb19.html";
@import "../../../../articles/-/_/_/-.html";
/*]]>*/</style>          </head>
  <body
    class="ns-100">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Legacy:Useful UWindow Extensions/Scrolling Credits</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</h3>
	    <div id="contentSub"><span class="subpages">&lt; <a href="../../../../articles/u/s/e/Legacy%7EUseful_UWindow_Extensions_7604.html" title="Legacy:Useful UWindow Extensions">Legacy:Useful UWindow Extensions</a></span></div>
	    	    	    <!-- start content -->
	    <div class="floatright"><span><a href="../../../../articles/l/e/g/Image%7ELegacy_uwindow-scrollingcredits.gif_3724.html" class="image" title="Legacy uwindow-scrollingcredits.gif"><img alt="" src="../../../../images/Legacy_uwindow-scrollingcredits.gif" width="360" height="220" border="0" /></a></span></div>
<p>The <b>Scrolling Credits</b> UWindow widget displays your mod credits in a fashion similar to movie credits. You can include text (formatted on a per-line basis) and texture images in your credits.</p>
<p>Users can click the scrolling text to temporarily halt it and drag it to manually move it up and down. The control supports clickable links.</p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#Interface"><span class="tocnumber">1</span> <span class="toctext">Interface</span></a>
<ul>
<li class="toclevel-2"><a href="#Methods"><span class="tocnumber">1.1</span> <span class="toctext">Methods</span></a></li>
<li class="toclevel-2"><a href="#Properties"><span class="tocnumber">1.2</span> <span class="toctext">Properties</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Code"><span class="tocnumber">2</span> <span class="toctext">Code</span></a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script>
<p><a name="Interface" id="Interface"></a></p>
<h2><span class="mw-headline">Interface</span></h2>
<p><a name="Methods" id="Methods"></a></p>
<h3><span class="mw-headline">Methods</span></h3>
<p>All AddSomething methods return whether the line or padding was successfully added or not. The latter can happen if the Lines array isn't large enough; simply change its size in its declaration.</p>
<dl>
<dt>bool AddLineText(string Text, optional byte Font, optional Color Color, optional bool Underline)&#160;</dt>
<dd>Adds a line of text to the credits, optionally specifying font, color and underlining. If no color is given, the value of ColorDefault is used (at rendering time, so changes of ColorDefault after AddLineText are effective).</dd>
</dl>
<dl>
<dt>bool AddLineUrl(string Url, optional byte Font, optional string Text)&#160;</dt>
<dd>Adds a line of text that is displayed as an underlined clickable link, using the color specified in the ColorLink property. The optional Text argument is displayed as the link's title if specified; otherwise the given URL is displayed itself. URLs starting with <code>www.</code>, <code>ftp.</code> and <code>unreal://</code> are specifically supported, everything else is directly piped through to the <code>start</code> console command.</dd>
</dl>
<dl>
<dt>bool AddLineImage(Texture Image, optional int Width, optional int Height)&#160;</dt>
<dd>Adds a texture image to the credits in a separate line. Optionally, the size of the displayed texture can be specified; otherwise its natural size is used.</dd>
</dl>
<dl>
<dt>bool AddPadding(int Padding)&#160;</dt>
<dd>Adds a padding of the given amount of pixels between the last added line and the next one.</dd>
</dl>
<dl>
<dt>Clear()&#160;</dt>
<dd>Clears the credit lines.</dd>
</dl>
<dl>
<dt>Reset()&#160;</dt>
<dd>Restarts the animation from before the fade-in.</dd>
</dl>
<p><a name="Properties" id="Properties"></a></p>
<h3><span class="mw-headline">Properties</span></h3>
<p>You can set the following properties:</p>
<dl>
<dt>ColorDefault, ColorImage, ColorLink&#160;</dt>
<dd>Colors for default text, images (if set to anything else than the default, colorizes the textures that are drawn) and link text.</dd>
</dl>
<dl>
<dt>DelayFade, SpeedFade&#160;</dt>
<dd>Delay before the text is faded in, and the speed of the fade-in (number of seconds it takes to complete). If SpeedFade is set to 0.0 (zero), the fade-in sequence is skipped.</dd>
</dl>
<dl>
<dt>DelayScroll, SpeedScroll&#160;</dt>
<dd>Delay after the fade-in and before the scrolling starts, and the scroll speed (in pixels per second).</dd>
</dl>
<p><a name="Code" id="Code"></a></p>
<h2><span class="mw-headline">Code</span></h2>
<p>The following code was developed by <a href="../../../../articles/m/y/c/Legacy%7EMychaeel_0406.html" title="Legacy:Mychaeel">Mychaeel</a> for <a href="../../../../articles/j/a/i/Legacy%7EJailbreak_a575.html" title="Legacy:Jailbreak">Jailbreak</a>. Feel free to use and modify, and please give me some credit [sic!] if you do.</p>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="co1">// ============================================================================</span>
<span class="co1">// UWindowCreditsControl</span>
<span class="co1">// Copyright 2002 by Mychaeel &lt;mychaeel@planetjailbreak.com&gt;</span>
<span class="co1">// Free for noncommercial use and modification.</span>
<span class="co1">//</span>
<span class="co1">// Displays scrolling credits, both text and textures.</span>
<span class="co1">// ============================================================================</span>
 
 
<span class="kw5">class</span> UWindowCreditsControl <span class="kw5">extends</span> UWindowDialogControl;
 
 
<span class="co1">// ============================================================================</span>
<span class="co1">// Structures</span>
<span class="co1">// ============================================================================</span>
 
<span class="kw4">struct</span> TLine <span class="br0">{</span>
 
  <span class="kw5">var</span> <span class="kw4">string</span> Text;
  <span class="kw5">var</span> <span class="kw4">string</span> Url;
  <span class="kw5">var</span> <span class="kw4">byte</span> Font;
  <span class="kw5">var</span> <span class="kw4">Color</span> <span class="kw4">Color</span>;
  <span class="kw5">var</span> <span class="kw4">bool</span> Underline;
 
  <span class="kw5">var</span> <a href="/Texture"><span class="kw10">Texture</span></a> Image;
  <span class="kw5">var</span> <span class="kw4">int</span> Width;
  <span class="kw5">var</span> <span class="kw4">int</span> Height;
 
  <span class="kw5">var</span> <span class="kw4">int</span> Indent;
  <span class="kw5">var</span> <span class="kw4">int</span> Padding;
  <span class="br0">}</span>;
 
 
<span class="co1">// ============================================================================</span>
<span class="co1">// Enumerations</span>
<span class="co1">// ============================================================================</span>
 
<span class="kw4">enum</span> EAction <span class="br0">{</span>
 
  Action_None,
  Action_Fading,
  Action_Scrolling,
  <span class="br0">}</span>;
 
 
<span class="co1">// ============================================================================</span>
<span class="co1">// Properties</span>
<span class="co1">// ============================================================================</span>
 
<span class="kw5">var</span><span class="br0">(</span><span class="br0">)</span> <span class="kw4">Color</span> ColorDefault;
<span class="kw5">var</span><span class="br0">(</span><span class="br0">)</span> <span class="kw4">Color</span> ColorImage;
<span class="kw5">var</span><span class="br0">(</span><span class="br0">)</span> <span class="kw4">Color</span> ColorLink;
 
<span class="kw5">var</span><span class="br0">(</span><span class="br0">)</span> <span class="kw4">int</span> OffsetStart;
<span class="kw5">var</span><span class="br0">(</span><span class="br0">)</span> <span class="kw4">float</span> DelayFade;
<span class="kw5">var</span><span class="br0">(</span><span class="br0">)</span> <span class="kw4">float</span> DelayScroll;
<span class="kw5">var</span><span class="br0">(</span><span class="br0">)</span> <span class="kw4">float</span> SpeedFade;
<span class="kw5">var</span><span class="br0">(</span><span class="br0">)</span> <span class="kw4">float</span> SpeedScroll;
<span class="kw5">var</span><span class="br0">(</span><span class="br0">)</span> TLine Lines<span class="br0">[</span><span class="nu0">64</span><span class="br0">]</span>;
 
 
<span class="co1">// ============================================================================</span>
<span class="co1">// Variables</span>
<span class="co1">// ============================================================================</span>
 
<span class="kw5">var</span> EAction Action;
<span class="kw5">var</span> EAction ActionPrev;
 
<span class="kw5">var</span> <span class="kw4">bool</span> FlagDrag;
<span class="kw5">var</span> <span class="kw4">bool</span> FlagUpdated;
 
<span class="kw5">var</span> <span class="kw4">float</span> Delay;
<span class="kw5">var</span> <span class="kw4">float</span> Fade;
<span class="kw5">var</span> <span class="kw4">float</span> Offset;
<span class="kw5">var</span> <span class="kw4">float</span> OffsetDrag;
 
<span class="kw5">var</span> <span class="kw4">int</span> CountLines;
<span class="kw5">var</span> <span class="kw4">int</span> HeightTotal;
 
<span class="kw5">var</span> <span class="kw4">string</span> TextUrlCurrent;
 
 
<span class="co1">// ============================================================================</span>
<span class="co1">// AddLineText</span>
<span class="co1">//</span>
<span class="co1">// Adds a line of text.</span>
<span class="co1">// ============================================================================</span>
 
<span class="kw5">function</span> <span class="kw4">bool</span> AddLineText<span class="br0">(</span><span class="kw4">string</span> Text, <span class="kw6">optional</span> <span class="kw4">byte</span> Font,
                                       <span class="kw6">optional</span> <span class="kw4">Color</span> <span class="kw4">Color</span>,
                                       <span class="kw6">optional</span> <span class="kw4">bool</span> Underline<span class="br0">)</span> <span class="br0">{</span>
 
  <span class="kw1">if</span> <span class="br0">(</span>CountLines == <span class="kw6">ArrayCount</span><span class="br0">(</span>Lines<span class="br0">)</span> || <span class="kw7">Len</span><span class="br0">(</span>Text<span class="br0">)</span> == <span class="nu0">0</span><span class="br0">)</span>
    <span class="kw1">return</span> <span class="kw9">false</span>;
 
  Lines<span class="br0">[</span>CountLines<span class="br0">]</span>.<span class="me1">Text</span>      = Text;
  Lines<span class="br0">[</span>CountLines<span class="br0">]</span>.<span class="me1">Url</span>       = <span class="st0">""</span>;
  Lines<span class="br0">[</span>CountLines<span class="br0">]</span>.<span class="me1">Font</span>      = Font;
  Lines<span class="br0">[</span>CountLines<span class="br0">]</span>.<span class="kw4">Color</span>     = <span class="kw4">Color</span>;
  Lines<span class="br0">[</span>CountLines<span class="br0">]</span>.<span class="me1">Underline</span> = Underline;
  Lines<span class="br0">[</span>CountLines<span class="br0">]</span>.<span class="me1">Padding</span>   = <span class="nu0">0</span>;
 
  Lines<span class="br0">[</span>CountLines<span class="br0">]</span>.<span class="me1">Image</span> = <span class="kw9">None</span>;
 
  CountLines++;
  FlagUpdated = <span class="kw9">false</span>;
 
  <span class="kw1">return</span> <span class="kw9">true</span>;
  <span class="br0">}</span>
 
 
<span class="co1">// ============================================================================</span>
<span class="co1">// AddLineUrl</span>
<span class="co1">//</span>
<span class="co1">// Adds a clickable Internet address.</span>
<span class="co1">// ============================================================================</span>
 
<span class="kw5">function</span> <span class="kw4">bool</span> AddLineUrl<span class="br0">(</span><span class="kw4">string</span> Url, <span class="kw6">optional</span> <span class="kw4">byte</span> Font,
                                     <span class="kw6">optional</span> <span class="kw4">string</span> Text<span class="br0">)</span> <span class="br0">{</span>
 
  <span class="kw1">if</span> <span class="br0">(</span>CountLines == <span class="kw6">ArrayCount</span><span class="br0">(</span>Lines<span class="br0">)</span> || <span class="kw7">Len</span><span class="br0">(</span>Url<span class="br0">)</span> == <span class="nu0">0</span><span class="br0">)</span>
    <span class="kw1">return</span> <span class="kw9">false</span>;
 
  Lines<span class="br0">[</span>CountLines<span class="br0">]</span>.<span class="me1">Url</span>       = Url;
  Lines<span class="br0">[</span>CountLines<span class="br0">]</span>.<span class="me1">Font</span>      = Font;
  Lines<span class="br0">[</span>CountLines<span class="br0">]</span>.<span class="kw4">Color</span>     = ColorLink;
  Lines<span class="br0">[</span>CountLines<span class="br0">]</span>.<span class="me1">Underline</span> = <span class="kw9">true</span>;
  Lines<span class="br0">[</span>CountLines<span class="br0">]</span>.<span class="me1">Padding</span>   = <span class="nu0">2</span>;
 
  <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">Len</span><span class="br0">(</span>Text<span class="br0">)</span> == <span class="nu0">0</span><span class="br0">)</span>
    Lines<span class="br0">[</span>CountLines<span class="br0">]</span>.<span class="me1">Text</span> = Url;
  <span class="kw1">else</span>
    Lines<span class="br0">[</span>CountLines<span class="br0">]</span>.<span class="me1">Text</span> = Text;
 
  Lines<span class="br0">[</span>CountLines<span class="br0">]</span>.<span class="me1">Image</span> = <span class="kw9">None</span>;
 
  CountLines++;
  FlagUpdated = <span class="kw9">false</span>;
 
  <span class="kw1">return</span> <span class="kw9">true</span>;
  <span class="br0">}</span>
 
 
<span class="co1">// ============================================================================</span>
<span class="co1">// AddLineImage</span>
<span class="co1">//</span>
<span class="co1">// Adds an image.</span>
<span class="co1">// ============================================================================</span>
 
<span class="kw5">function</span> <span class="kw4">bool</span> AddLineImage<span class="br0">(</span><a href="/Texture"><span class="kw10">Texture</span></a> Image, <span class="kw6">optional</span> <span class="kw4">int</span> Width,
                                          <span class="kw6">optional</span> <span class="kw4">int</span> Height<span class="br0">)</span> <span class="br0">{</span>
 
  <span class="kw1">if</span> <span class="br0">(</span>CountLines == <span class="kw6">ArrayCount</span><span class="br0">(</span>Lines<span class="br0">)</span> || Image == <span class="kw9">None</span><span class="br0">)</span>
    <span class="kw1">return</span> <span class="kw9">false</span>;
 
  Lines<span class="br0">[</span>CountLines<span class="br0">]</span>.<span class="me1">Image</span>   = Image;
  Lines<span class="br0">[</span>CountLines<span class="br0">]</span>.<span class="me1">Width</span>   = Width;
  Lines<span class="br0">[</span>CountLines<span class="br0">]</span>.<span class="me1">Height</span>  = Height;
  Lines<span class="br0">[</span>CountLines<span class="br0">]</span>.<span class="me1">Padding</span> = <span class="nu0">0</span>;
 
  Lines<span class="br0">[</span>CountLines<span class="br0">]</span>.<span class="me1">Text</span> = <span class="st0">""</span>;
 
  CountLines++;
  FlagUpdated = <span class="kw9">false</span>;
 
  <span class="kw1">return</span> <span class="kw9">true</span>;
  <span class="br0">}</span>
 
 
<span class="co1">// ============================================================================</span>
<span class="co1">// AddPadding</span>
<span class="co1">//</span>
<span class="co1">// Adds padding to the last line.</span>
<span class="co1">// ============================================================================</span>
 
<span class="kw5">function</span> <span class="kw4">bool</span> AddPadding<span class="br0">(</span><span class="kw4">int</span> Padding<span class="br0">)</span> <span class="br0">{</span>
 
  <span class="kw1">if</span> <span class="br0">(</span>CountLines == <span class="nu0">0</span><span class="br0">)</span>
    <span class="kw1">return</span> <span class="kw9">false</span>;
 
  Lines<span class="br0">[</span>CountLines - <span class="nu0">1</span><span class="br0">]</span>.<span class="me1">Padding</span> += Padding;
  <span class="br0">}</span>
 
 
<span class="co1">// ============================================================================</span>
<span class="co1">// Clear</span>
<span class="co1">//</span>
<span class="co1">// Clears the credit lines.</span>
<span class="co1">// ============================================================================</span>
 
<span class="kw5">function</span> Clear<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
 
  Lines<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span>.<span class="me1">Text</span> = <span class="st0">""</span>;
  Lines<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span>.<span class="me1">Image</span> = <span class="kw9">None</span>;
 
  FlagUpdated = <span class="kw9">false</span>;
  <span class="br0">}</span>
 
 
<span class="co1">// ============================================================================</span>
<span class="co1">// Reset</span>
<span class="co1">//</span>
<span class="co1">// Resets the scrolling area to its original position, the first line being</span>
<span class="co1">// just below the bottom of the arena.</span>
<span class="co1">// ============================================================================</span>
 
<span class="kw5">function</span> Reset<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
 
  Offset = OffsetStart - WinHeight;
 
  <span class="kw1">if</span> <span class="br0">(</span>SpeedFade == <span class="nu0">0.0</span><span class="br0">)</span>
    Action = Action_Scrolling;
  <span class="kw1">else</span>
    Action = Action_Fading;
 
  ActionPrev = Action_None;
  <span class="br0">}</span>
 
 
<span class="co1">// ============================================================================</span>
<span class="co1">// Update</span>
<span class="co1">//</span>
<span class="co1">// Calculates the total height of the credits list, retrieves element sizes and</span>
<span class="co1">// determines element indents.</span>
<span class="co1">// ============================================================================</span>
 
<span class="kw5">function</span> Update<span class="br0">(</span>Canvas Canvas<span class="br0">)</span> <span class="br0">{</span>
 
  <span class="kw5">local</span> <span class="kw4">int</span> IndexLine;
  <span class="kw5">local</span> <span class="kw4">float</span> WidthText;
  <span class="kw5">local</span> <span class="kw4">float</span> HeightText;
 
  <span class="kw1">if</span> <span class="br0">(</span>FlagUpdated<span class="br0">)</span>
    <span class="kw1">return</span>;
 
  CountLines = <span class="nu0">0</span>;
  HeightTotal = <span class="nu0">0</span>;
 
  <span class="kw1">for</span> <span class="br0">(</span>IndexLine = <span class="nu0">0</span>; IndexLine &lt; <span class="kw6">ArrayCount</span><span class="br0">(</span>Lines<span class="br0">)</span>; IndexLine++<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">Len</span><span class="br0">(</span>Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Text</span><span class="br0">)</span> &gt; <span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span>
      Canvas.<span class="me1">Font</span> = Root.<span class="me1">Fonts</span><span class="br0">[</span>Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Font</span><span class="br0">]</span>;
      TextSize<span class="br0">(</span>Canvas, Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Text</span>, WidthText, HeightText<span class="br0">)</span>;
 
      Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Width</span> = WidthText;
      Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Height</span> = HeightText;
      <span class="br0">}</span>
 
    <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Image</span> != <span class="kw9">None</span><span class="br0">)</span> <span class="br0">{</span>
      <span class="kw1">if</span> <span class="br0">(</span>Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Width</span>  == <span class="nu0">0</span><span class="br0">)</span> Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Width</span>  = Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Image</span>.<span class="me1">UClamp</span>;
      <span class="kw1">if</span> <span class="br0">(</span>Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Height</span> == <span class="nu0">0</span><span class="br0">)</span> Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Height</span> = Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Image</span>.<span class="me1">VClamp</span>;
      <span class="br0">}</span>
 
    <span class="kw1">else</span>
      <span class="kw1">break</span>;
 
    Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Indent</span> = <span class="br0">(</span>WinWidth - Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Width</span><span class="br0">)</span> / <span class="nu0">2</span>;
 
    CountLines++;
    HeightTotal += Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Height</span> + Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Padding</span>;
    <span class="br0">}</span>
 
  Reset<span class="br0">(</span><span class="br0">)</span>;
 
  FlagUpdated = <span class="kw9">true</span>;
  <span class="br0">}</span>
 
 
<span class="co1">// ============================================================================</span>
<span class="co1">// WindowShown</span>
<span class="co1">// ============================================================================</span>
 
<span class="kw5">function</span> WindowShown<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
 
  Reset<span class="br0">(</span><span class="br0">)</span>;
 
  <span class="kw6">Super</span>.<span class="me1">WindowShown</span><span class="br0">(</span><span class="br0">)</span>;
  <span class="br0">}</span>
 
 
<span class="co1">// ============================================================================</span>
<span class="co1">// Tick</span>
<span class="co1">// ============================================================================</span>
 
<span class="kw5">event</span> <span class="kw8">Tick</span><span class="br0">(</span><span class="kw4">float</span> TimeDelta<span class="br0">)</span> <span class="br0">{</span>
 
  <span class="kw1">if</span> <span class="br0">(</span>Action != ActionPrev<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw1">switch</span> <span class="br0">(</span>Action<span class="br0">)</span> <span class="br0">{</span>
      <span class="kw1">case</span> Action_Fading:     Fade = <span class="nu0">0.0</span>;  Delay = DelayFade;    <span class="kw1">break</span>;
      <span class="kw1">case</span> Action_Scrolling:  Fade = <span class="nu0">1.0</span>;  Delay = DelayScroll;  <span class="kw1">break</span>;
      <span class="br0">}</span>
 
    ActionPrev = Action;
    <span class="br0">}</span>
 
  <span class="kw1">if</span> <span class="br0">(</span>Delay &gt; <span class="nu0">0.0</span><span class="br0">)</span> <span class="br0">{</span>
    Delay = <span class="kw7">FMax</span><span class="br0">(</span><span class="nu0">0.0</span>, Delay - TimeDelta<span class="br0">)</span>;
    <span class="kw1">return</span>;
    <span class="br0">}</span>
 
  <span class="kw1">switch</span> <span class="br0">(</span>Action<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw1">case</span> Action_Fading:
      Fade = <span class="kw7">FMin</span><span class="br0">(</span><span class="nu0">1.0</span>, Fade + SpeedFade * TimeDelta<span class="br0">)</span>;
      <span class="kw1">if</span> <span class="br0">(</span>Fade == <span class="nu0">1.0</span><span class="br0">)</span>
        Action = Action_Scrolling;
      <span class="kw1">break</span>;
 
    <span class="kw1">case</span> Action_Scrolling:
      <span class="kw1">if</span> <span class="br0">(</span>!bMouseDown<span class="br0">)</span>
        Offset += SpeedScroll * TimeDelta;
      <span class="kw1">break</span>;
    <span class="br0">}</span>
  <span class="br0">}</span>
 
 
<span class="co1">// ============================================================================</span>
<span class="co1">// Click</span>
<span class="co1">// ============================================================================</span>
 
<span class="kw5">function</span> Click<span class="br0">(</span><span class="kw4">float</span> X, <span class="kw4">float</span> Y<span class="br0">)</span> <span class="br0">{</span>
 
  <span class="kw6">Super</span>.<span class="me1">Click</span><span class="br0">(</span>X, Y<span class="br0">)</span>;
 
  <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">Len</span><span class="br0">(</span>TextUrlCurrent<span class="br0">)</span> == <span class="nu0">0</span><span class="br0">)</span>
    <span class="kw1">return</span>;
 
  <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">Left</span><span class="br0">(</span>TextUrlCurrent, <span class="nu0">4</span><span class="br0">)</span> ~= <span class="st0">"www."</span><span class="br0">)</span>
    GetPlayerOwner<span class="br0">(</span><span class="br0">)</span>.<span class="me1">ConsoleCommand</span><span class="br0">(</span><span class="st0">"start http://"</span> $ TextUrlCurrent<span class="br0">)</span>;
  <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">Left</span><span class="br0">(</span>TextUrlCurrent, <span class="nu0">4</span><span class="br0">)</span> ~= <span class="st0">"ftp."</span><span class="br0">)</span>
    GetPlayerOwner<span class="br0">(</span><span class="br0">)</span>.<span class="me1">ConsoleCommand</span><span class="br0">(</span><span class="st0">"start ftp://"</span> $ TextUrlCurrent<span class="br0">)</span>;
  <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">Left</span><span class="br0">(</span>TextUrlCurrent, <span class="nu0">9</span><span class="br0">)</span> ~= <span class="st0">"unreal://"</span><span class="br0">)</span>
    GetPlayerOwner<span class="br0">(</span><span class="br0">)</span>.<span class="me1">ClientTravel</span><span class="br0">(</span>TextUrlCurrent, TRAVEL_Absolute, <span class="kw9">false</span><span class="br0">)</span>;
  <span class="kw1">else</span>
    GetPlayerOwner<span class="br0">(</span><span class="br0">)</span>.<span class="me1">ConsoleCommand</span><span class="br0">(</span><span class="st0">"start"</span> @ TextUrlCurrent<span class="br0">)</span>;
  <span class="br0">}</span>
 
 
<span class="co1">// ============================================================================</span>
<span class="co1">// BeforePaint</span>
<span class="co1">// ============================================================================</span>
 
<span class="kw5">function</span> BeforePaint<span class="br0">(</span>Canvas Canvas, <span class="kw4">float</span> X, <span class="kw4">float</span> Y<span class="br0">)</span> <span class="br0">{</span>
 
  Update<span class="br0">(</span>Canvas<span class="br0">)</span>;
 
  <span class="kw6">Super</span>.<span class="me1">BeforePaint</span><span class="br0">(</span>Canvas, X, Y<span class="br0">)</span>;
  <span class="br0">}</span>
 
 
<span class="co1">// ============================================================================</span>
<span class="co1">// Paint</span>
<span class="co1">// ============================================================================</span>
 
<span class="kw5">function</span> Paint<span class="br0">(</span>Canvas Canvas, <span class="kw4">float</span> X, <span class="kw4">float</span> Y<span class="br0">)</span> <span class="br0">{</span>
 
  <span class="kw5">local</span> <span class="kw4">int</span> IndexLine;
  <span class="kw5">local</span> <span class="kw4">int</span> OffsetCurrent;
 
  <span class="kw1">if</span> <span class="br0">(</span>bMouseDown<span class="br0">)</span>
    <span class="kw1">if</span> <span class="br0">(</span>FlagDrag<span class="br0">)</span>
      Offset = OffsetDrag - Y;
    <span class="kw1">else</span>
      OffsetDrag = Offset + Y;
  FlagDrag = bMouseDown;
 
  DrawStretchedTexture<span class="br0">(</span>Canvas, <span class="nu0">0</span>, <span class="nu0">0</span>, WinWidth, WinHeight, <a href="/Texture"><span class="kw10">Texture</span></a> <span class="st0">'UWindow.BlackTexture'</span><span class="br0">)</span>;
 
  OffsetCurrent = -Offset;
 
  <span class="kw1">for</span> <span class="br0">(</span>IndexLine = <span class="nu0">0</span>; IndexLine &lt; CountLines; IndexLine++<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw1">if</span> <span class="br0">(</span>OffsetCurrent + Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Height</span> &gt; <span class="nu0">0</span><span class="br0">)</span>
      <span class="kw1">break</span>;
    OffsetCurrent += Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Height</span> + Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Padding</span>;
    <span class="br0">}</span>
 
  TextUrlCurrent = <span class="st0">""</span>;
  Canvas.<span class="me1">bNoSmooth</span> = <span class="kw9">false</span>;
 
  <span class="kw1">for</span> <span class="br0">(</span>IndexLine = IndexLine; IndexLine &lt; CountLines; IndexLine++<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw1">if</span> <span class="br0">(</span>OffsetCurrent &gt; WinHeight<span class="br0">)</span>
      <span class="kw1">break</span>;
 
    <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">Len</span><span class="br0">(</span>Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Text</span><span class="br0">)</span> &gt; <span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span>
      <span class="kw1">if</span> <span class="br0">(</span>Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="kw4">Color</span>.<span class="me1">R</span> == <span class="nu0">0</span> &amp;&amp;
          Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="kw4">Color</span>.<span class="me1">G</span> == <span class="nu0">0</span> &amp;&amp;
          Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="kw4">Color</span>.<span class="me1">B</span> == <span class="nu0">0</span><span class="br0">)</span>
        Canvas.<span class="me1">DrawColor</span> = ColorDefault;
      <span class="kw1">else</span>
        Canvas.<span class="me1">DrawColor</span> = Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="kw4">Color</span>;
 
      Canvas.<span class="me1">DrawColor</span> = Canvas.<span class="me1">DrawColor</span> * Fade;
      Canvas.<span class="me1">Font</span> = Root.<span class="me1">Fonts</span><span class="br0">[</span>Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Font</span><span class="br0">]</span>;
      ClipText<span class="br0">(</span>Canvas, Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Indent</span>, OffsetCurrent, Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Text</span><span class="br0">)</span>;
 
      <span class="kw1">if</span> <span class="br0">(</span>Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Underline</span><span class="br0">)</span>
        DrawStretchedTexture<span class="br0">(</span>Canvas, Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Indent</span>,
                                     Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Height</span> + OffsetCurrent - <span class="nu0">1</span>,
                                     Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Width</span>,
                                     <span class="nu0">1</span>,
                                     <a href="/Texture"><span class="kw10">Texture</span></a> <span class="st0">'UWindow.WhiteTexture'</span><span class="br0">)</span>;
 
      <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">Len</span><span class="br0">(</span>Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Url</span><span class="br0">)</span> &gt; <span class="nu0">0</span> &amp;&amp;
          <span class="kw7">Clamp</span><span class="br0">(</span>X, Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Indent</span>, Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Indent</span> + Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Width</span><span class="br0">)</span> == <span class="kw4">int</span><span class="br0">(</span>X<span class="br0">)</span> &amp;&amp;
          <span class="kw7">Clamp</span><span class="br0">(</span>Y, OffsetCurrent, OffsetCurrent + Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Height</span><span class="br0">)</span> == <span class="kw4">int</span><span class="br0">(</span>Y<span class="br0">)</span><span class="br0">)</span>
        TextUrlCurrent = Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Url</span>;
      <span class="br0">}</span>
 
    <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Image</span> != <span class="kw9">None</span><span class="br0">)</span> <span class="br0">{</span>
      Canvas.<span class="me1">DrawColor</span> = ColorImage * Fade;
      DrawStretchedTexture<span class="br0">(</span>Canvas, Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Indent</span>,
                                   OffsetCurrent,
                                   Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Width</span>,
                                   Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Height</span>, Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Image</span><span class="br0">)</span>;
      <span class="br0">}</span>
 
    OffsetCurrent += Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Height</span> + Lines<span class="br0">[</span>IndexLine<span class="br0">]</span>.<span class="me1">Padding</span>;
    <span class="br0">}</span>
 
  <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">Len</span><span class="br0">(</span>TextUrlCurrent<span class="br0">)</span> == <span class="nu0">0</span><span class="br0">)</span>
    Cursor = Root.<span class="me1">NormalCursor</span>;
  <span class="kw1">else</span>
    Cursor = Root.<span class="me1">HandCursor</span>;
 
  <span class="kw1">if</span> <span class="br0">(</span>OffsetCurrent + Lines<span class="br0">[</span>IndexLine - <span class="nu0">1</span><span class="br0">]</span>.<span class="me1">Height</span> &lt;= <span class="nu0">0</span><span class="br0">)</span>
    Reset<span class="br0">(</span><span class="br0">)</span>;
  <span class="br0">}</span>
 
 
<span class="co1">// ============================================================================</span>
<span class="co1">// Color Operators</span>
<span class="co1">// ============================================================================</span>
 
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw6">operator</span><span class="br0">(</span><span class="nu0">16</span><span class="br0">)</span> <span class="kw4">Color</span> * <span class="br0">(</span><span class="kw4">float</span> Fade, <span class="kw4">Color</span> <span class="kw4">Color</span><span class="br0">)</span> <span class="br0">{</span>
 
  <span class="kw4">Color</span>.<span class="me1">R</span> = <span class="kw4">byte</span><span class="br0">(</span><span class="kw7">FClamp</span><span class="br0">(</span>Fade, <span class="nu0">0.0</span>, <span class="nu0">1.0</span><span class="br0">)</span> * <span class="kw4">float</span><span class="br0">(</span><span class="kw4">Color</span>.<span class="me1">R</span><span class="br0">)</span><span class="br0">)</span>;
  <span class="kw4">Color</span>.<span class="me1">G</span> = <span class="kw4">byte</span><span class="br0">(</span><span class="kw7">FClamp</span><span class="br0">(</span>Fade, <span class="nu0">0.0</span>, <span class="nu0">1.0</span><span class="br0">)</span> * <span class="kw4">float</span><span class="br0">(</span><span class="kw4">Color</span>.<span class="me1">G</span><span class="br0">)</span><span class="br0">)</span>;
  <span class="kw4">Color</span>.<span class="me1">B</span> = <span class="kw4">byte</span><span class="br0">(</span><span class="kw7">FClamp</span><span class="br0">(</span>Fade, <span class="nu0">0.0</span>, <span class="nu0">1.0</span><span class="br0">)</span> * <span class="kw4">float</span><span class="br0">(</span><span class="kw4">Color</span>.<span class="me1">B</span><span class="br0">)</span><span class="br0">)</span>;
 
  <span class="kw1">return</span> <span class="kw4">Color</span>;
  <span class="br0">}</span>
 
 
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw6">operator</span><span class="br0">(</span><span class="nu0">16</span><span class="br0">)</span> <span class="kw4">Color</span> * <span class="br0">(</span><span class="kw4">Color</span> <span class="kw4">Color</span>, <span class="kw4">float</span> Fade<span class="br0">)</span> <span class="br0">{</span>
 
  <span class="kw1">return</span> Fade * <span class="kw4">Color</span>;
  <span class="br0">}</span>
 
 
<span class="co1">// ============================================================================</span>
<span class="co1">// Default Properties</span>
<span class="co1">// ============================================================================</span>
 
<span class="kw1">defaultproperties</span> <span class="br0">{</span>
 
  ColorDefault=<span class="br0">(</span>R=<span class="nu0">224</span>,G=<span class="nu0">224</span>,B=<span class="nu0">224</span><span class="br0">)</span>
  ColorImage=<span class="br0">(</span>R=<span class="nu0">255</span>,G=<span class="nu0">255</span>,B=<span class="nu0">255</span><span class="br0">)</span>
  ColorLink=<span class="br0">(</span>R=<span class="nu0">64</span>,G=<span class="nu0">64</span>,B=<span class="nu0">255</span><span class="br0">)</span>
 
  DelayFade=<span class="nu0">0.5</span>
  DelayScroll=<span class="nu0">2.0</span>
 
  SpeedFade=<span class="nu0">1.0</span>
  SpeedScroll=<span class="nu0">30.0</span>
  <span class="br0">}</span>
</pre></div>

<!-- 
NewPP limit report
Preprocessor node count: 16/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
#ifexist count: 0/100
-->
<div class="printfooter">
</div>
	    	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-legacy"
	       class="selected"	       ><a href="../../../../articles/u/s/e/Legacy%7EUseful_UWindow_Extensions_Scrolling_Credits_845d.html">Legacy</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../../articles/u/s/e/Legacy_talk%7EUseful_UWindow_Extensions_Scrolling_Credits_5cc0.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://wiki.beyondunreal.com/Legacy:Useful_UWindow_Extensions/Scrolling_Credits">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../../misc/uewiki.png);"
	    href="../../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-mainpage"><a href="../../../../index.html">Main Page</a></li>
	     	      <li id="n-portal"><a href="../../../../articles/c/o/m/Unreal_Wiki%7ECommunity_Portal_3311.html">Community portal</a></li>
	     	      <li id="n-help"><a href="../../../../articles/c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="../../../../../COPYING.html"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt='Attribution-Noncommercial-Share Alike 3.0' /></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 18:42, 25 June 2002 by Anonymous user(s) of Unreal Wiki. </li>	  <li id="f-copyright">Licensed as <a href="../../../../articles/c/o/p/Unreal_Wiki%7ECopyrights_e561.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>	  <li id="f-about"><a href="../../../../articles/a/b/o/Unreal_Wiki%7EAbout_9ce6.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>	  <li id="f-disclaimer"><a href="../../../../articles/g/e/n/Unreal_Wiki%7EGeneral_disclaimer_a0a2.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>
