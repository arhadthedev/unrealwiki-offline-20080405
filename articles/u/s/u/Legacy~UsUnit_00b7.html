<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- headlinks removed -->
	<link rel="shortcut icon" href="../../../../misc/uewiki-favicon.png"/>
    <title>Legacy:UsUnit - Unreal Wiki</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../../skins/offline/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/md5.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/utf8.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/lookup.js"></script>
    <script type="text/javascript" src="../../../../articles/-/_/_/-.html"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../../articles/c/o/m/MediaWiki%7ECommon.css_d42e.html";
@import "../../../../articles/m/o/n/MediaWiki%7EMonobook.css_fb19.html";
@import "../../../../articles/-/_/_/-.html";
/*]]>*/</style>          </head>
  <body
    class="ns-100">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Legacy:UsUnit</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</h3>
	    <div id="contentSub"></div>
	    	    	    <!-- start content -->
	    <p><b>UsUnit</b> is an UnrealScript Unit Testing Framework, much like <a href="http://www.junit.org" class="external text" title="http://www.junit.org" rel="nofollow">JUnit</a> and <a href="http://dunit.sf.net" class="external text" title="http://dunit.sf.net" rel="nofollow">DUnit</a> being developed by <a href="../../../../articles/e/l/_/Legacy%7EEl_Muerte_4874.html" class="mw-redirect" title="Legacy:El Muerte">El Muerte</a>.</p>
<p><a href="http://en.wikipedia.org/wiki/Unit_test" class="extiw" title="wikipedia:Unit_test">Wikipedia:Unit testing</a> makes it easier to validate correct behavior of the program during development. Tests can be seperated from the base code and can easily be rerun in order to validate if the changes made didn't break functionality.</p>
<p>Unit testing might seem like a lot of work, but there's a huge gain in the end.</p>
<p>The UsUnit Testing Framework is released under the <a href="../../../../articles/l/e/s/Legacy%7ELesserOpenUnrealModLicense_2924.html" title="Legacy:LesserOpenUnrealModLicense">LesserOpenUnrealModLicense</a>, this means you can use it without limitations (even for commercial products).</p>
<p><b>Note:</b> never include the UsUnit package and related tests with your game\mod. It should not belong in there, so make sure you don't create dependencies on UsUnit in your base code.</p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#Usage"><span class="tocnumber">1</span> <span class="toctext">Usage</span></a>
<ul>
<li class="toclevel-2"><a href="#TestRunner"><span class="tocnumber">1.1</span> <span class="toctext">TestRunner</span></a>
<ul>
<li class="toclevel-3"><a href="#Configuration"><span class="tocnumber">1.1.1</span> <span class="toctext">Configuration</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#TestReporter"><span class="tocnumber">1.2</span> <span class="toctext">TestReporter</span></a>
<ul>
<li class="toclevel-3"><a href="#Configuration_2"><span class="tocnumber">1.2.1</span> <span class="toctext">Configuration</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#Creating_a_test_case"><span class="tocnumber">2</span> <span class="toctext">Creating a test case</span></a>
<ul>
<li class="toclevel-2"><a href="#Properties"><span class="tocnumber">2.1</span> <span class="toctext">Properties</span></a></li>
<li class="toclevel-2"><a href="#Events"><span class="tocnumber">2.2</span> <span class="toctext">Events</span></a></li>
<li class="toclevel-2"><a href="#Functions"><span class="tocnumber">2.3</span> <span class="toctext">Functions</span></a></li>
<li class="toclevel-2"><a href="#UCPP_Notice"><span class="tocnumber">2.4</span> <span class="toctext">UCPP Notice</span></a></li>
<li class="toclevel-2"><a href="#Example_Test_Case"><span class="tocnumber">2.5</span> <span class="toctext">Example Test Case</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Creating_a_Test_Suite"><span class="tocnumber">3</span> <span class="toctext">Creating a Test Suite</span></a>
<ul>
<li class="toclevel-2"><a href="#Example_Test_Suite"><span class="tocnumber">3.1</span> <span class="toctext">Example Test Suite</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Downloads"><span class="tocnumber">4</span> <span class="toctext">Downloads</span></a>
<ul>
<li class="toclevel-2"><a href="#Development_releases"><span class="tocnumber">4.1</span> <span class="toctext">Development releases</span></a></li>
<li class="toclevel-2"><a href="#CVS_Access"><span class="tocnumber">4.2</span> <span class="toctext">CVS Access</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Additional_Information"><span class="tocnumber">5</span> <span class="toctext">Additional Information</span></a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script>
<p><a name="Usage" id="Usage"></a></p>
<h2><span class="mw-headline">Usage</span></h2>
<p>All UsUnit classes use the same external configuration file: <code>UsUnit.ini</code></p>
<p><a name="TestRunner" id="TestRunner"></a></p>
<h3><span class="mw-headline">TestRunner</span></h3>
<p>This is the main class that will run all given test cases and suites. There are a few ways to execute the TestRunner.</p>
<dl>
<dt>ServerActor</dt>
<dd>Simply add <code>UsUnit.TestRunner</code> to the ServerActors list and start a server. The tests will be started depending on the <tt>fDelayedStart</tt> value of the TestRunner.</dd>
<dt>WebAdmin</dt>
<dd>Upon installation of UsUnit via the ut4mod the webadmin module will automatically be registered. All you have to do is to enable the webadmin, start a server and visit the WebAdmin page.</dd>
<dt>Mutator</dt>
<dd>A mutator is included that can also start the test runner. The mutator name is <code>UsUnit.UsUnitMutator</code>. The mutator is current in the beta stage. You can start the test runner and view some results. But that is pretty much it.</dd>
</dl>
<p><a name="Configuration" id="Configuration"></a></p>
<h4><span class="mw-headline">Configuration</span></h4>
<p>By default TestRunner doesn't do much. You will have to define which tests to run. This can be done directly in the main configuration file <code>UsUnit.ini</code> or via the WebAdmin.</p>
<pre>
[UsUnit.TestRunner]
Tests=MyTests.CASE_StartupTest
Tests=MyTests.SUITE_Algorithms
fDelayedStart=0
</pre>
<dl>
<dt>Tests</dt>
<dd>this is a dynamic string array containing the fully qualified names of the test cases and suites to execute. They will be executed in that order. By default this list is empty.</dd>
<dt>fDelayedStart</dt>
<dd>this defines the number of seconds to wait before automatically starting the tests. When it's set to 0 it will start the tests as soon as the TestRunner has been spawned. If the value is negative it will not start the tests automatically, it will wait until the run command is explicitly called. fDelayedStart is only used when it's started as a ServerActor.</dd>
</dl>
<p><a name="TestReporter" id="TestReporter"></a></p>
<h3><span class="mw-headline">TestReporter</span></h3>
<p>The TestReporter is resposible for reporting the test progress and results. The TestReporter can have multiple output modules. The following come standard with the UsUnit package:</p>
<dl>
<dt><code>Output_HTML</code></dt>
<dd>This will produce a HTML file in the UserLogs directory containing the results of the tests.</dd>
</dl>
<p><a name="Configuration_2" id="Configuration_2"></a></p>
<h4><span class="mw-headline">Configuration</span></h4>
<pre>
[UsUnit.TestReporter]
bGenerateLogErrors=true
OutputClasses=UsUnit.Output_HTML
</pre>
<dl>
<dt>bGenerateLogErrors</dt>
<dd>This will generate "error" log entries in the main log file. These can be parsed by a program to find the exact location of the check that failed. For this to work best you should use <a href="../../../../articles/u/c/p/Legacy%7EUCPP_4ad2.html" title="Legacy:UCPP">UCPP</a> and the correct macros (that come with the UsUnit package).</dd>
<dt>OutputClasses</dt>
<dd>A dynamic string list containing all output modules to use.</dd>
</dl>
<p><a name="Creating_a_test_case" id="Creating_a_test_case"></a></p>
<h2><span class="mw-headline">Creating a test case</span></h2>
<p>A test case extends the actor <tt>TestCase</tt>. This class will contain the code that performs the actual tests can checks. A normal test run will be like this:</p>
<ol>
<li><i>TestCase.setUp()</i></li>
<li><i>TestCase.run()</i>
<ol>
<li>perform tests</li>
<li>call <i>done()</i></li>
</ol>
</li>
<li><i>TestCase.tearDown()</i></li>
</ol>
<p><b>Note:</b> test cases are spawned only once and never destroyed (not until a level restart). If your tests needs to initialize some data before the test is actually executed implement the <i>setUp</i> function, do not use any of the <i>BeginPlay</i> events.</p>
<p>The most important thing you need to do for a test case is implement the <i>run()</i> function. After you performed all tests in this test case you should call the function <i>done()</i>, if you do not do this the test cycle will never be completed.</p>
<p><a name="Properties" id="Properties"></a></p>
<h4><span class="mw-headline">Properties</span></h4>
<dl>
<dt>TestName</dt>
<dd>a human readable name for the test</dd>
<dt>TestDescription</dt>
<dd>a short description of the test</dd>
</dl>
<p><a name="Events" id="Events"></a></p>
<h4><span class="mw-headline">Events</span></h4>
<dl>
<dt>run()</dt>
<dd>will be called to run the test. You need to implement this.</dd>
<dt>setUp()</dt>
<dd>will be called right before run() is called, but outside the timed section. Use it to initialize data.</dd>
<dt>tearDown()</dt>
<dd>will be called after the test case was completed, but outside the timed section. Use it to clean up data.</dd>
</dl>
<p><a name="Functions" id="Functions"></a></p>
<h4><span class="mw-headline">Functions</span></h4>
<dl>
<dt>Check(bool expression, coerce string message)</dt>
<dd>the actual check if a given condition results in true. If the condition given by <tt>expression</tt> is false this check failed. <tt>message</tt> contains a description of the current test.</dd>
<dt>Done()</dt>
<dd>this function <b>must</b> be called after all checks have been performed, otherwise the test cycle will not continue.</dd>
</dl>
<p><a name="UCPP_Notice" id="UCPP_Notice"></a></p>
<h3><span class="mw-headline">UCPP Notice</span></h3>
<p>UsUnit comes with a macro file (<tt>UsUnit/macros.inc</tt>) that can be used with <a href="../../../../articles/u/c/p/Legacy%7EUCPP_4ad2.html" title="Legacy:UCPP">UCPP</a>. This will add some extra magic to the Check functions. The following macros are defined:</p>
<dl>
<dt>CHECK(expr,msg)</dt>
<dd>this behaves much like the normal Check function, except that it will append the current filename and line where this function was called. This can be useful to find the check that failed.</dd>
<dt>CHECK(expr)</dt>
<dd>this will be translated to CHECK(expr,"expr"). In other words, the expression content will be converted to the description. This makes it easier in some cases like: <tt>CHECK(1+1 == 2)</tt>.</dd>
</dl>
<p>To use the macro file simply add the following line before you call any CHECK:</p>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="kw2">#pragma</span> ucpp include ../../UsUnit/macros.<span class="me1">inc</span>
</pre></div>
<p><i>Note:</i> make sure you read the <a href="../../../../articles/u/c/p/Legacy%7EUCPP_4ad2.html" title="Legacy:UCPP">UCPP</a> instructions on how to use it.</p>
<p><a name="Example_Test_Case" id="Example_Test_Case"></a></p>
<h3><span class="mw-headline">Example Test Case</span></h3>
<p><i>More examples can be found in the UsUnitExamples package.</i></p>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="kw2">#pragma</span> ucpp notice - precompile this unit with UCPP
<span class="kw2">#pragma</span> ucpp version
<span class="co1">// include the CHECK() macros to add filenames and location</span>
<span class="kw2">#pragma</span> ucpp include ../../UsUnit/macros.<span class="me1">inc</span>
 
<span class="kw5">class</span> TEST_SimpleTests <span class="kw5">extends</span> TestCase;
 
<span class="kw5">function</span> run<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw5">local</span> array&lt;string&gt; dummy;
    CHECK<span class="br0">(</span><span class="nu0">1</span><span class="nu0">+1</span> == <span class="nu0">2</span><span class="br0">)</span>;
    CHECK<span class="br0">(</span><span class="st0">"CaseInsensitive"</span> ~= <span class="st0">"caseinsensitive"</span><span class="br0">)</span>;
    CHECK<span class="br0">(</span><span class="kw9">false</span>, <span class="st0">"false; will always fail"</span><span class="br0">)</span>;
    CHECK<span class="br0">(</span><span class="kw7">split</span><span class="br0">(</span><span class="st0">"one two three four five"</span>, <span class="st0">" "</span>, dummy<span class="br0">)</span> == <span class="nu0">5</span>, <span class="st0">"<span class="es0">\"</span>one two three four five<span class="es0">\"</span> has 5 words"</span><span class="br0">)</span>;
    CHECK<span class="br0">(</span><span class="kw7">split</span><span class="br0">(</span><span class="st0">"one"</span>, <span class="st0">" "</span>, dummy<span class="br0">)</span> == <span class="nu0">1</span>, <span class="st0">"<span class="es0">\"</span>one<span class="es0">\"</span> is 1 word"</span><span class="br0">)</span>;
    CHECK<span class="br0">(</span><span class="kw7">round</span><span class="br0">(</span><span class="nu0">1.5</span><span class="br0">)</span> == <span class="nu0">2</span><span class="br0">)</span>;
    CHECK<span class="br0">(</span><span class="kw4">int</span><span class="br0">(</span><span class="nu0">1.5</span><span class="br0">)</span> == <span class="nu0">1</span><span class="br0">)</span>;
    done<span class="br0">(</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">defaultproperties</span>
<span class="br0">{</span>
    TestName=<span class="st0">"Simple Tests"</span>
    TestDescription=<span class="st0">"Example test case, performs some simple tests basic math testing."</span>
<span class="br0">}</span>
</pre></div>
<p><a name="Creating_a_Test_Suite" id="Creating_a_Test_Suite"></a></p>
<h2><span class="mw-headline">Creating a Test Suite</span></h2>
<p>A test suite is nothing more than a collection of test cases and\or test suites to be executed sequentially. A test suite extends the class <tt>TestSuite</tt>. It usually doesn't contain any code, just values in the defaultproperties section.</p>
<p>The following class properties are of interest:</p>
<dl>
<dt><tt>TestName</tt></dt>
<dd>the name of the suite</dd>
<dt><tt>TestDescription</tt></dt>
<dd>a short description of the test suite (optional)</dd>
<dt><tt>TestClasses</tt></dt>
<dd>a dynamic array with class references to test cases and test suites that are part of this suite.</dd>
<dt><tt>bBreakOnFail</tt></dt>
<dd>if set to true it will it will not continue with the next test class when the current class failed a single check. Default: <tt>true</tt></dd>
</dl>
<p><a name="Example_Test_Suite" id="Example_Test_Suite"></a></p>
<h3><span class="mw-headline">Example Test Suite</span></h3>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="kw5">class</span> SUITE_ExampleSuite <span class="kw5">extends</span> TestSuite;
 
<span class="kw1">defaultproperties</span>
<span class="br0">{</span>
    TestName=<span class="st0">"Example Test Suite"</span>
    TestDescription=<span class="st0">"Bundles all example tests from the UsUnitExamples package"</span>
 
    TestClasses<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span>=<span class="kw5">class</span><span class="st0">'TEST_SimpleTests'</span>
    TestClasses<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span>=<span class="kw5">class</span><span class="st0">'TEST_TimedTest'</span>
<span class="br0">}</span>
</pre></div>
<p><a name="Downloads" id="Downloads"></a></p>
<h2><span class="mw-headline">Downloads</span></h2>
<ul>
<li><b><a href="http://ut2004.elmuerte.com/files/UsUnit_v101_ut4mod.zip" class="external text" title="http://ut2004.elmuerte.com/files/UsUnit_v101_ut4mod.zip" rel="nofollow">Version 1.1.14</a></b></li>
<li><a href="http://ut2004.elmuerte.com/files/UsUnit_v100_ut4mod.zip" class="external text" title="http://ut2004.elmuerte.com/files/UsUnit_v100_ut4mod.zip" rel="nofollow">Version 1.0.11</a></li>
</ul>
<p><a name="Development_releases" id="Development_releases"></a></p>
<h3><span class="mw-headline">Development releases</span></h3>
<p>Not really releases but just the lastest updates of the UsUnit packages straight from the CVS</p>
<ul>
<li><a href="http://el-muerte.student.utwente.nl/cgi-bin/cvsweb/UT2004/UsUnit/UsUnit.zip?tarball=1" class="external text" title="http://el-muerte.student.utwente.nl/cgi-bin/cvsweb/UT2004/UsUnit/UsUnit.zip?tarball=1" rel="nofollow">Main UsUnit package</a></li>
<li><a href="http://el-muerte.student.utwente.nl/cgi-bin/cvsweb/UT2004/UsUnitExamples/UsUnitExamples.zip?tarball=1" class="external text" title="http://el-muerte.student.utwente.nl/cgi-bin/cvsweb/UT2004/UsUnitExamples/UsUnitExamples.zip?tarball=1" rel="nofollow">UsUnitExamples package</a></li>
</ul>
<p><a name="CVS_Access" id="CVS_Access"></a></p>
<h3><span class="mw-headline">CVS Access</span></h3>
<dl>
<dt>Anonymous access</dt>
<dd>:pserver:anonymous@el-muerte.student.utwente.nl:/usr/local/cvsroot/UT2004</dd>
</dl>
<dl>
<dt>Module names</dt>
<dd>UsUnit<br />
UsUnitExamples</dd>
</dl>
<p><a name="Additional_Information" id="Additional_Information"></a></p>
<h2><span class="mw-headline">Additional Information</span></h2>
<ul>
<li><a href="../../../../articles/u/s/u/Legacy%7EUsUnit_ChangeLog_6c95.html" title="Legacy:UsUnit/ChangeLog">Legacy:UsUnit/ChangeLog</a> – changes for the various releases</li>
<li><a href="../../../../articles/u/s/u/Legacy%7EUsUnit_Discussion_f79e.html" title="Legacy:UsUnit/Discussion">Legacy:UsUnit/Discussion</a></li>
</ul>

<!-- 
NewPP limit report
Preprocessor node count: 69/1000000
Post-expand include size: 24/2097152 bytes
Template argument size: 0/2097152 bytes
#ifexist count: 0/100
-->
<div class="printfooter">
</div>
	    	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-legacy"
	       class="selected"	       ><a href="../../../../articles/u/s/u/Legacy%7EUsUnit_00b7.html">Legacy</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../../articles/u/s/u/Legacy_talk%7EUsUnit_aa84.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://wiki.beyondunreal.com/Legacy:UsUnit">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../../misc/uewiki.png);"
	    href="../../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-mainpage"><a href="../../../../index.html">Main Page</a></li>
	     	      <li id="n-portal"><a href="../../../../articles/c/o/m/Unreal_Wiki%7ECommunity_Portal_3311.html">Community portal</a></li>
	     	      <li id="n-help"><a href="../../../../articles/c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="../../../../../COPYING.html"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt='Attribution-Noncommercial-Share Alike 3.0' /></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 09:01, 23 January 2007 by <a href="../../../../articles/t/a/r/User%7ETarquin_cdb6.html" title="User:Tarquin">tarquin</a>. Based on work by Anonymous user(s) of Unreal Wiki.</li>	  <li id="f-copyright">Licensed as <a href="../../../../articles/c/o/p/Unreal_Wiki%7ECopyrights_e561.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>	  <li id="f-about"><a href="../../../../articles/a/b/o/Unreal_Wiki%7EAbout_9ce6.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>	  <li id="f-disclaimer"><a href="../../../../articles/g/e/n/Unreal_Wiki%7EGeneral_disclaimer_a0a2.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>
