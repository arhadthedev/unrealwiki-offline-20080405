<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- headlinks removed -->
	<link rel="shortcut icon" href="../../../../misc/uewiki-favicon.png"/>
    <title>Legacy:UnrealScript Quirks - Unreal Wiki</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../../skins/offline/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/md5.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/utf8.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/lookup.js"></script>
    <script type="text/javascript" src="../../../../articles/-/_/_/-.html"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../../articles/c/o/m/MediaWiki%7ECommon.css_d42e.html";
@import "../../../../articles/m/o/n/MediaWiki%7EMonobook.css_fb19.html";
@import "../../../../articles/-/_/_/-.html";
/*]]>*/</style>          </head>
  <body
    class="ns-100">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Legacy:UnrealScript Quirks</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</h3>
	    <div id="contentSub"></div>
	    	    	    <!-- start content -->
	    <p>This page lists all those little annoying things that you wouldn't expect <a href="../../../../articles/u/n/r/Legacy%7EUnrealScript_a9c5.html" title="Legacy:UnrealScript">UnrealScript</a> to do, but it does. Especially those things that are unintuitive or cause very hard to diagnose problems.</p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#Logging_Rotators"><span class="tocnumber">1</span> <span class="toctext">Logging Rotators</span></a></li>
<li class="toclevel-1"><a href="#Up_is_left_Padawan"><span class="tocnumber">2</span> <span class="toctext">Up is left Padawan</span></a></li>
<li class="toclevel-1"><a href="#Physics_changes_take_a_tick"><span class="tocnumber">3</span> <span class="toctext">Physics changes take a tick</span></a></li>
<li class="toclevel-1"><a href="#Simulated"><span class="tocnumber">4</span> <span class="toctext">Simulated</span></a></li>
<li class="toclevel-1"><a href="#UCC_GPF"><span class="tocnumber">5</span> <span class="toctext">UCC GPF</span></a></li>
<li class="toclevel-1"><a href="#5_meters_is_5_meters.2C_except_when_it.27s_not"><span class="tocnumber">6</span> <span class="toctext">5 meters is 5 meters, except when it's not</span></a></li>
<li class="toclevel-1"><a href="#There_is_no_include"><span class="tocnumber">7</span> <span class="toctext">There is no include</span></a></li>
<li class="toclevel-1"><a href="#Initializing_bloat"><span class="tocnumber">8</span> <span class="toctext">Initializing bloat</span></a></li>
<li class="toclevel-1"><a href="#Vectors_and_Rotators_on_the_Fly..._sort_of"><span class="tocnumber">9</span> <span class="toctext">Vectors and Rotators on the Fly... sort of</span></a></li>
<li class="toclevel-1"><a href="#Log.27s_Double_Dishonesty"><span class="tocnumber">10</span> <span class="toctext">Log's Double Dishonesty</span></a></li>
<li class="toclevel-1"><a href="#DesiredRotation_Undesirable"><span class="tocnumber">11</span> <span class="toctext">DesiredRotation Undesirable</span></a></li>
<li class="toclevel-1"><a href="#Not_all_strings_are_in_code"><span class="tocnumber">12</span> <span class="toctext">Not all strings are in code</span></a></li>
<li class="toclevel-1"><a href="#Related_Topics"><span class="tocnumber">13</span> <span class="toctext">Related Topics</span></a></li>
<li class="toclevel-1"><a href="#Discussion"><span class="tocnumber">14</span> <span class="toctext">Discussion</span></a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script>
<p><a name="Logging_Rotators" id="Logging_Rotators"></a></p>
<h3><span class="mw-headline">Logging Rotators</span></h3>
<p>When you log a <a href="../../../../articles/r/o/t/Legacy%7ERotator_9443.html" title="Legacy:Rotator">rotator</a>, its values automatically get wrapped to 0-65535, even if they're outside that range. Log lies!</p>
<p><a name="Up_is_left_Padawan" id="Up_is_left_Padawan"></a></p>
<h3><span class="mw-headline">Up is left Padawan</span></h3>
<p>The <a href="../../../../articles/u/n/r/Legacy%7EUnreal_World_4893.html" title="Legacy:Unreal World">Unreal World</a> uses a <a href="../../../../articles/l/e/f/Legacy%7ELeft-Handed_Coordinate_System_4ca7.html" title="Legacy:Left-Handed Coordinate System">Left-Handed Coordinate System</a>. This means that the y-axis goes the 'wrong way'. Quite unreal.</p>
<p><a name="Physics_changes_take_a_tick" id="Physics_changes_take_a_tick"></a></p>
<h3><span class="mw-headline">Physics changes take a tick</span></h3>
<p>If you decide to change a <a href="../../../../articles/p/a/w/Legacy%7EPawn_d11f.html" title="Legacy:Pawn">Pawn</a>'s physics, don't then write code assuming the change happens immediately. A tick has to pass before the change registers.</p>
<p><b>Foxpaw:</b> Can you elaborate on what exactly is meant by this?</p>
<p><b>dataangel:</b> Sure. If you use SetPhysics on something (actually come to think of it this probably isn't just for pawn) the physics doesn't actually change until one game tick has passed (one iteration through the main game loop, look at the tick funtion in Actor/Methods on the wiki). I'm not sure if logging Pawn.Physics will show the new physics or the old one, but if you try and call some native function that only works when the pawn is in a certain physics, it'll treat the pawn as if it had the old physics until the next tick.</p>
<p><a name="Simulated" id="Simulated"></a></p>
<h3><span class="mw-headline">Simulated</span></h3>
<p>The simulated keyword means that a function CAN run on a client, not that it will. This is not a magic fix, which will suddenly make your code run on the network. See <a href="../../../../articles/s/i/m/Legacy%7ESimulated_Function_71f0.html" title="Legacy:Simulated Function">simulated function</a>.</p>
<p><a name="UCC_GPF" id="UCC_GPF"></a></p>
<h3><span class="mw-headline">UCC GPF</span></h3>
<p>Making your class DependsOn a class that ucc can't find will cause it to fault. No, it does not give you a nice descriptive error. It crashes and laughs at you.</p>
<p><a name="5_meters_is_5_meters.2C_except_when_it.27s_not"></a></p>
<h3><span class="mw-headline">5 meters is 5 meters, except when it's not</span></h3>
<p>The <a href="../../../../articles/k/a/r/Legacy%7EKarma_3d96.html" title="Legacy:Karma">Karma</a> functions and the rest of Unreal use completely different scales. Yes, even though it is the same engine. Be sure to convert between the two. See <a href="../../../../articles/u/n/r/Legacy%7EUnreal_Unit_2651.html" title="Legacy:Unreal Unit">Unreal Unit</a>.</p>
<p><b>Solid Snake</b>: This has been noted many times before. All of the Karma references will also mention that the units used between Karma and Unreal are different on a linear scale.</p>
<p><a name="There_is_no_include" id="There_is_no_include"></a></p>
<h3><span class="mw-headline">There is no include</span></h3>
<p>There's no way for you to add your own global functions without purchasing the engine and editing object.uc yourself. You can get very very ugly long <a href="../../../../articles/s/t/a/Legacy%7EStatic_Function_4b1d.html" title="Legacy:Static Function">static functions</a> by declaring a class, making the functions static, then referencing them like so: class'myClass'.static.myfunc.</p>
<p><b>El Muerte:</b> Actually, there is an <i>include</i>, but it does not work as you expect and it has some quirks. The include is a macro:</p>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="kw2">#include</span> Path/Relative/To/Package.<span class="me1">inc</span>
</pre></div>
<p>This will include the file <code>../Package/Path/Relative/To/Package.inc</code> AS IS. However, this will screw up the linecount, so if that file contains 6 lines the compile might claim a error on the n'th line you should look at the (n-6)th line in your code. Ofcourse this option doesn't solve the issue that you can't define global functions (you can't do that in Java either, so who cares). <i>It's best to avoid the #include directive.</i></p>
<p>However, there is a way to create non static global functions. This requires you to create an class containing these global non static functions. Create an include file like this:</p>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="co1">// include this file before the first function declaration</span>
<span class="kw5">var</span> MyGlobalActor mgo;
 
<span class="coMULTI">/** call this function in PreBeginPlay */</span>
<span class="kw5">function</span> InitGlobalObject<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
  forearch AllActors<span class="br0">(</span><span class="kw5">class</span><span class="st0">'MyGlobalActor'</span>, mgo<span class="br0">)</span> <span class="kw1">break</span>;
  <span class="kw1">if</span> <span class="br0">(</span>mgo == <span class="kw9">none</span><span class="br0">)</span> mgo = spawn<span class="br0">(</span><span class="kw5">class</span><span class="st0">'MyGlobalActor'</span>, <span class="kw8">Level</span><span class="br0">)</span>;
<span class="br0">}</span>
</pre></div>
<p>Ofcourse this won't solve all your problems, but in some cases it might help you a bit.</p>
<p>Note: when you are creating a new gametype, you're better of creating a new GRI class that contains your new global functions.</p>
<p><a name="Initializing_bloat" id="Initializing_bloat"></a></p>
<h3><span class="mw-headline">Initializing bloat</span></h3>
<p>You can't declare a variable and initialize it in the same line, unlike most other programming languages. UCC is not very kind about this either. It will give you all sorts of cryptic errors depending on where you attempt this. I am almost certain there is code in ucc to explicitly prevent it from giving you a clear error message for this by selecting one at random.</p>
<p><a name="Vectors_and_Rotators_on_the_Fly..._sort_of" id="Vectors_and_Rotators_on_the_Fly..._sort_of"></a></p>
<h3><span class="mw-headline">Vectors and Rotators on the Fly... sort of</span></h3>
<p>The builtin vect(x,y,z) and rot(Pitch,Yaw,Roll) operators for creating vectors and rotators on the fly may <i>seem</i> useful. But then try to pass anything but constants. rot(0, 200, 50) will work but rot(myvar, 300, 200) will not. Luckily, ucc will print out a random error message to assist you. Which will lead you for some arbitrary reason thought of at Epic to do this:</p>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="kw5">local</span> <span class="kw4">rotator</span> temp;
 
temp.<span class="me1">Pitch</span> = myvar;
temp.<span class="me1">Yaw</span> = <span class="nu0">300</span>;
temp.<span class="me1">Roll</span> = <span class="nu0">200</span>;
</pre></div>
<p><b>Foxpaw:</b> The reason why Epic did this is very simple. Rot(100,0,0) is a constant, like "I love strings" or 5. It's syntax makes it <i>look</i> like a function, but it isn't one. Constants are considerably faster at runtime than evaluating a function with constant arguments.</p>
<p><b>dataangel:</b> Nor though would it have been terribly difficult for them to make it a native function that works with variables and only optimize for constants when you specify all constants. Then it would act intuitively =) But you're right and that's not the point. I'll change the description above to explain that.</p>
<p><b>Solid Snake:</b> I think it's like when you attempt to do this, dynamicarray.length++;. The syntax is correct and UCC will compile it, but you can't do that.</p>
<p><a name="Log.27s_Double_Dishonesty" id="Log.27s_Double_Dishonesty"></a></p>
<h3><span class="mw-headline">Log's Double Dishonesty</span></h3>
<p>Not only does log report rotators incorrectly, it'll also truncate your float values. See also: Baudrillard.</p>
<p><a name="DesiredRotation_Undesirable" id="DesiredRotation_Undesirable"></a></p>
<h3><span class="mw-headline">DesiredRotation Undesirable</span></h3>
<p>If you want to use DesiredRotation for actors with physics other than PHYS_Rotating or PHYS_Projectile, you're out of luck. No matter what you do the engine will not do the rotation for you. You'll have to come up with your own system.</p>
<p><a name="Not_all_strings_are_in_code" id="Not_all_strings_are_in_code"></a></p>
<h3><span class="mw-headline">Not all strings are in code</span></h3>
<p>If there's a string for your mod you want to override, and you can't find it anywhere in the .uc files, chances are for localization reasons it's stored in the <a href="../../../../articles/i/n/t/Legacy%7EINT_File_d5d3.html" title="Legacy:INT File">INT files</a>. Search those.</p>
<p><b>Solid Snake</b>: That makes no sense. You define the contents of the INT or other language files inside UC file. You can't randomly just put a variable definition inside a language file and get away with it. Thus, you need to say that rather than trying to find the definition of the variable string or whatever else, look in the language file, although the variable itself is declared in the UC file.</p>
<p><b>dataangel</b>: Eh, when I say string I don't mean the variable declaration. I mean the actual string literal. When people see "The game will begin in 3..2..1.." and stuff like that they type that string in and search their .uc files and wonder why there are no results.</p>
<p><a name="Related_Topics" id="Related_Topics"></a></p>
<h2><span class="mw-headline">Related Topics</span></h2>
<ul>
<li><a href="../../../../articles/u/n/r/Legacy%7EUnrealScript_a9c5.html" title="Legacy:UnrealScript">UnrealScript</a></li>
</ul>
<p><a name="Discussion" id="Discussion"></a></p>
<h2><span class="mw-headline">Discussion</span></h2>
<p><b>dataangel</b>: I'm sure I've missed a ton, but these were the quirks I remembered and had caused me the most time wasted today&#160;;) Please add.</p>

<!-- 
NewPP limit report
Preprocessor node count: 26/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
#ifexist count: 0/100
-->
<div class="printfooter">
</div>
	    	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-legacy"
	       class="selected"	       ><a href="../../../../articles/u/n/r/Legacy%7EUnrealScript_Quirks_863d.html">Legacy</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../../articles/u/n/r/Legacy_talk%7EUnrealScript_Quirks_2e19.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://wiki.beyondunreal.com/Legacy:UnrealScript_Quirks">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../../misc/uewiki.png);"
	    href="../../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-mainpage"><a href="../../../../index.html">Main Page</a></li>
	     	      <li id="n-portal"><a href="../../../../articles/c/o/m/Unreal_Wiki%7ECommunity_Portal_3311.html">Community portal</a></li>
	     	      <li id="n-help"><a href="../../../../articles/c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="../../../../../COPYING.html"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt='Attribution-Noncommercial-Share Alike 3.0' /></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 21:54, 17 December 2005 by Anonymous user(s) of Unreal Wiki. Based on work by <a href="../../../../articles/t/a/r/User%7ETarquin_cdb6.html" title="User:Tarquin">tarquin</a>.</li>	  <li id="f-copyright">Licensed as <a href="../../../../articles/c/o/p/Unreal_Wiki%7ECopyrights_e561.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>	  <li id="f-about"><a href="../../../../articles/a/b/o/Unreal_Wiki%7EAbout_9ce6.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>	  <li id="f-disclaimer"><a href="../../../../articles/g/e/n/Unreal_Wiki%7EGeneral_disclaimer_a0a2.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>
