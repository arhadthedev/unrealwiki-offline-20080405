<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- headlinks removed -->
	<link rel="shortcut icon" href="../../../../misc/uewiki-favicon.png"/>
    <title>Legacy:WUtils/WString - Unreal Wiki</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../../skins/offline/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/md5.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/utf8.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/lookup.js"></script>
    <script type="text/javascript" src="../../../../articles/-/_/_/-.html"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../../articles/c/o/m/MediaWiki%7ECommon.css_d42e.html";
@import "../../../../articles/m/o/n/MediaWiki%7EMonobook.css_fb19.html";
@import "../../../../articles/-/_/_/-.html";
/*]]>*/</style>          </head>
  <body
    class="ns-100">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Legacy:WUtils/WString</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</h3>
	    <div id="contentSub"><span class="subpages">&lt; <a href="../../../../articles/w/u/t/Legacy%7EWUtils_ea6b.html" title="Legacy:WUtils">Legacy:WUtils</a></span></div>
	    	    	    <!-- start content -->
	    <div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="co1">///////////////////////////////////////////////////////////////////////////////</span>
<span class="co1">// filename:    wString.uc</span>
<span class="co1">// revision:    103</span>
<span class="co1">// authors:     various UnrealWiki members (http://wiki.beyondunreal.com)</span>
<span class="co1">//              http://wiki.beyondunreal.com/WUtils</span>
<span class="co1">///////////////////////////////////////////////////////////////////////////////</span>
 
<span class="kw5">class</span> wString <span class="kw5">extends</span> <a href="/Object"><span class="kw10">Object</span></a>;
 
<span class="coMULTI">/** Shifts an element off a string                              &lt;br /&gt;
    example (delim = ' '): 'this is a string' -&gt; 'is a string'  &lt;br /&gt;
    if quotechar = " : '"this is" a string' -&gt; 'a string'       */</span>
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw5">function</span> <span class="kw4">string</span> StrShift<span class="br0">(</span><span class="kw6">out</span> <span class="kw4">string</span> line, <span class="kw4">string</span> delim, <span class="kw6">optional</span> <span class="kw4">string</span> quotechar<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw5">local</span> <span class="kw4">int</span> delimpos, quotepos;
    <span class="kw5">local</span> <span class="kw4">string</span> result;
 
    <span class="kw1">if</span> <span class="br0">(</span> quotechar != <span class="st0">""</span> &amp;&amp; <span class="kw7">Left</span><span class="br0">(</span>line, <span class="kw7">Len</span><span class="br0">(</span>quotechar<span class="br0">)</span><span class="br0">)</span> == quotechar <span class="br0">)</span> <span class="br0">{</span>
        <span class="kw1">do</span> <span class="br0">{</span>
            quotepos = InstrFrom<span class="br0">(</span>line, quotechar, quotepos + <span class="nu0">1</span><span class="br0">)</span>;
        <span class="br0">}</span> <span class="kw1">until</span> <span class="br0">(</span>quotepos == <span class="nu0">-1</span> || quotepos + <span class="kw7">Len</span><span class="br0">(</span>quotechar<span class="br0">)</span> == <span class="kw7">Len</span><span class="br0">(</span>line<span class="br0">)</span>
                || <span class="kw7">Mid</span><span class="br0">(</span>line, quotepos + <span class="kw7">len</span><span class="br0">(</span>quotechar<span class="br0">)</span>, <span class="kw7">len</span><span class="br0">(</span>delim<span class="br0">)</span><span class="br0">)</span> == delim<span class="br0">)</span>;
    <span class="br0">}</span>
    <span class="kw1">if</span> <span class="br0">(</span> quotepos != <span class="nu0">-1</span> <span class="br0">)</span> <span class="br0">{</span>
        delimpos = InstrFrom<span class="br0">(</span>line, delim, quotepos<span class="br0">)</span>;
    <span class="br0">}</span>
    <span class="kw1">else</span> <span class="br0">{</span>
        delimpos = <span class="kw7">Instr</span><span class="br0">(</span>line, delim<span class="br0">)</span>;
    <span class="br0">}</span>
 
    <span class="kw1">if</span> <span class="br0">(</span>delimpos == <span class="nu0">-1</span><span class="br0">)</span>
    <span class="br0">{</span>
        result = line;
        line = <span class="st0">""</span>;
    <span class="br0">}</span>
    <span class="kw1">else</span> <span class="br0">{</span>
        result = <span class="kw7">Left</span><span class="br0">(</span>line,delimpos<span class="br0">)</span>;
        line = <span class="kw7">Mid</span><span class="br0">(</span>line,delimpos+<span class="kw7">len</span><span class="br0">(</span>delim<span class="br0">)</span><span class="br0">)</span>;
    <span class="br0">}</span>
    <span class="kw1">if</span> <span class="br0">(</span> quotechar != <span class="st0">""</span> &amp;&amp; <span class="kw7">Left</span><span class="br0">(</span>result, <span class="kw7">Len</span><span class="br0">(</span>quotechar<span class="br0">)</span><span class="br0">)</span> == quotechar <span class="br0">)</span> <span class="br0">{</span>
      result = <span class="kw7">Mid</span><span class="br0">(</span>result, <span class="kw7">Len</span><span class="br0">(</span>quotechar<span class="br0">)</span>, <span class="kw7">Len</span><span class="br0">(</span>result<span class="br0">)</span>-<span class="br0">(</span><span class="kw7">Len</span><span class="br0">(</span>quotechar<span class="br0">)</span>*<span class="nu0">2</span><span class="br0">)</span><span class="br0">)</span>;
    <span class="br0">}</span>
    <span class="kw1">return</span> result;
<span class="br0">}</span>
 
<span class="coMULTI">/** StrReplace using an array with replacements.
    will return the changed string, will replace all occurences unless bOnlyFirst */</span>
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw5">function</span> <span class="kw4">string</span> StrReplace<span class="br0">(</span><span class="kw6">coerce</span> <span class="kw4">string</span> target, array&lt;string&gt; replace, array&lt;string&gt; with, <span class="kw6">optional</span> <span class="kw4">bool</span> bOnlyFirst<span class="br0">)</span>
<span class="br0">{</span>
  <span class="kw5">local</span> <span class="kw4">int</span> i,j;
  <span class="kw5">local</span> <span class="kw4">string</span> <span class="kw6">Input</span>;
 
  <span class="co1">// cycle trough replacement list</span>
  <span class="kw1">for</span> <span class="br0">(</span>j = <span class="nu0">0</span>; j &lt; replace.<span class="kw6">length</span>; j++<span class="br0">)</span>
  <span class="br0">{</span>
    <span class="kw6">Input</span> = target;
    target = <span class="st0">""</span>;
    i = <span class="kw7">InStr</span><span class="br0">(</span><span class="kw6">input</span>, Replace<span class="br0">[</span>j<span class="br0">]</span><span class="br0">)</span>;
    <span class="kw1">while</span><span class="br0">(</span>i != <span class="nu0">-1</span><span class="br0">)</span>
    <span class="br0">{</span> 
      target = target $ <span class="kw7">Left</span><span class="br0">(</span><span class="kw6">Input</span>, i<span class="br0">)</span> $ With<span class="br0">[</span>j<span class="br0">]</span>;
      <span class="kw6">Input</span> = <span class="kw7">Mid</span><span class="br0">(</span><span class="kw6">Input</span>, i + <span class="kw7">Len</span><span class="br0">(</span>Replace<span class="br0">[</span>j<span class="br0">]</span><span class="br0">)</span><span class="br0">)</span>;  
      <span class="kw1">if</span> <span class="br0">(</span>bOnlyFirst<span class="br0">)</span> <span class="kw1">break</span>; <span class="co1">// only replace first occurance</span>
      i = <span class="kw7">InStr</span><span class="br0">(</span><span class="kw6">Input</span>, Replace<span class="br0">[</span>j<span class="br0">]</span><span class="br0">)</span>;
    <span class="br0">}</span>
    target = target $ <span class="kw6">Input</span>;
  <span class="br0">}</span>
  <span class="kw1">return</span> target;
<span class="br0">}</span>
 
<span class="coMULTI">/** StrSubst will replace %s in target with r# where # is the place of %s in the string */</span>
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw5">function</span> <span class="kw4">string</span> StrSubst<span class="br0">(</span><span class="kw6">coerce</span> <span class="kw4">string</span> target, <span class="kw6">optional</span> <span class="kw4">string</span> r0, <span class="kw6">optional</span> <span class="kw4">string</span> r1, <span class="kw6">optional</span> <span class="kw4">string</span> r2, <span class="kw6">optional</span> <span class="kw4">string</span> r3, 
  <span class="kw6">optional</span> <span class="kw4">string</span> r4, <span class="kw6">optional</span> <span class="kw4">string</span> r5, <span class="kw6">optional</span> <span class="kw4">string</span> r6, <span class="kw6">optional</span> <span class="kw4">string</span> r7, <span class="kw6">optional</span> <span class="kw4">string</span> r8, <span class="kw6">optional</span> <span class="kw4">string</span> r9<span class="br0">)</span>
<span class="br0">{</span>
  <span class="kw5">local</span> array&lt;string&gt; replace, with;
  <span class="kw5">local</span> <span class="kw4">int</span> i;
  replace.<span class="kw6">length</span>=<span class="nu0">10</span>;
  <span class="kw1">for</span> <span class="br0">(</span>i = <span class="nu0">0</span>; i &lt; replace.<span class="kw6">length</span>; i++<span class="br0">)</span> replace<span class="br0">[</span>i<span class="br0">]</span> = <span class="st0">"%s"</span>;
  with.<span class="kw6">length</span>=<span class="nu0">10</span>;
  with<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span>=r0;
  with<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span>=r1;
  with<span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span>=r2;
  with<span class="br0">[</span><span class="nu0">3</span><span class="br0">]</span>=r3;
  with<span class="br0">[</span><span class="nu0">4</span><span class="br0">]</span>=r4;
  with<span class="br0">[</span><span class="nu0">5</span><span class="br0">]</span>=r5;
  with<span class="br0">[</span><span class="nu0">6</span><span class="br0">]</span>=r6;
  with<span class="br0">[</span><span class="nu0">7</span><span class="br0">]</span>=r7;
  with<span class="br0">[</span><span class="nu0">8</span><span class="br0">]</span>=r8;
  with<span class="br0">[</span><span class="nu0">9</span><span class="br0">]</span>=r9;
  <span class="kw1">return</span> StrReplace<span class="br0">(</span>target, replace, with, <span class="kw9">true</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="coMULTI">/** Turn a string to lower case &lt;br /&gt;
    example: 'This Is A String' -&gt; 'this is a string' */</span>
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw5">function</span> <span class="kw4">string</span> Lower<span class="br0">(</span><span class="kw6">coerce</span> <span class="kw4">string</span> Text<span class="br0">)</span> 
<span class="br0">{</span>
  <span class="kw5">local</span> <span class="kw4">int</span> IndexChar;
  <span class="kw1">for</span> <span class="br0">(</span>IndexChar = <span class="nu0">0</span>; IndexChar &lt; <span class="kw7">Len</span><span class="br0">(</span>Text<span class="br0">)</span>; IndexChar++<span class="br0">)</span>
    <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">Mid</span><span class="br0">(</span>Text, IndexChar, <span class="nu0">1</span><span class="br0">)</span> &gt;= <span class="st0">"A"</span> &amp;&amp;
        <span class="kw7">Mid</span><span class="br0">(</span>Text, IndexChar, <span class="nu0">1</span><span class="br0">)</span> &lt;= <span class="st0">"Z"</span><span class="br0">)</span>
      Text = <span class="kw7">Left</span><span class="br0">(</span>Text, IndexChar<span class="br0">)</span> $ <span class="kw7">Chr</span><span class="br0">(</span><span class="kw7">Asc</span><span class="br0">(</span><span class="kw7">Mid</span><span class="br0">(</span>Text, IndexChar, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> + <span class="nu0">32</span><span class="br0">)</span> $ <span class="kw7">Mid</span><span class="br0">(</span>Text, IndexChar + <span class="nu0">1</span><span class="br0">)</span>;
  <span class="kw1">return</span> Text;
<span class="br0">}</span>
 
<span class="coMULTI">/** Checks if a string is all uppercase */</span>
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw5">function</span> <span class="kw4">bool</span> IsUpper<span class="br0">(</span><span class="kw6">coerce</span> <span class="kw4">string</span> S<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">return</span> S == <span class="kw7">Caps</span><span class="br0">(</span>S<span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="coMULTI">/** Checks if a string is all lowercase */</span>
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw5">function</span> <span class="kw4">bool</span> IsLower<span class="br0">(</span><span class="kw6">coerce</span> <span class="kw4">string</span> S<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">return</span> S == Lower<span class="br0">(</span>S<span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="coMULTI">/** Trim leading spaces */</span>
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw5">function</span> <span class="kw4">string</span> LTrim<span class="br0">(</span><span class="kw6">coerce</span> <span class="kw4">string</span> S<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">while</span> <span class="br0">(</span><span class="kw7">Left</span><span class="br0">(</span>S, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">" "</span><span class="br0">)</span>
        S = <span class="kw7">Right</span><span class="br0">(</span>S, <span class="kw7">Len</span><span class="br0">(</span>S<span class="br0">)</span> - <span class="nu0">1</span><span class="br0">)</span>;
    <span class="kw1">return</span> S;
<span class="br0">}</span>
 
<span class="coMULTI">/** Trim trailing spaces */</span>
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw5">function</span> <span class="kw4">string</span> RTrim<span class="br0">(</span><span class="kw6">coerce</span> <span class="kw4">string</span> S<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">while</span> <span class="br0">(</span><span class="kw7">Right</span><span class="br0">(</span>S, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">" "</span><span class="br0">)</span>
        S = <span class="kw7">Left</span><span class="br0">(</span>S, <span class="kw7">Len</span><span class="br0">(</span>S<span class="br0">)</span> - <span class="nu0">1</span><span class="br0">)</span>;
    <span class="kw1">return</span> S;
<span class="br0">}</span>
 
<span class="coMULTI">/** Trim leading and trailing spaces */</span>
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw5">function</span> <span class="kw4">string</span> Trim<span class="br0">(</span><span class="kw6">coerce</span> <span class="kw4">string</span> S<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">return</span> LTrim<span class="br0">(</span>RTrim<span class="br0">(</span>S<span class="br0">)</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="coMULTI">/** Internal function used for MaskedCompare */</span>
<span class="kw6">static</span> <span class="kw6">private</span> <span class="kw6">final</span> <span class="kw5">function</span> <span class="kw4">bool</span> _match<span class="br0">(</span><span class="kw6">out</span> <span class="kw4">string</span> mask, <span class="kw6">out</span> <span class="kw4">string</span> target<span class="br0">)</span>
<span class="br0">{</span>
  <span class="kw5">local</span> <span class="kw4">string</span> m, mp, cp;
  m = <span class="kw7">Left</span><span class="br0">(</span>mask, <span class="nu0">1</span><span class="br0">)</span>;
  <span class="kw1">while</span> <span class="br0">(</span><span class="br0">(</span>target != <span class="st0">""</span><span class="br0">)</span> &amp;&amp; <span class="br0">(</span>m != <span class="st0">"*"</span><span class="br0">)</span><span class="br0">)</span>
  <span class="br0">{</span>
    <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>m != <span class="kw7">Left</span><span class="br0">(</span>target, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> &amp;&amp; <span class="br0">(</span>m != <span class="st0">"?"</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">return</span> <span class="kw9">false</span>;
    mask = <span class="kw7">Mid</span><span class="br0">(</span>Mask, <span class="nu0">1</span><span class="br0">)</span>;
    target = <span class="kw7">Mid</span><span class="br0">(</span>target, <span class="nu0">1</span><span class="br0">)</span>;
    m = <span class="kw7">Left</span><span class="br0">(</span>mask, <span class="nu0">1</span><span class="br0">)</span>;
  <span class="br0">}</span>
 
  <span class="kw1">while</span> <span class="br0">(</span>target != <span class="st0">""</span><span class="br0">)</span> 
  <span class="br0">{</span>
    <span class="kw1">if</span> <span class="br0">(</span>m == <span class="st0">"*"</span><span class="br0">)</span> 
    <span class="br0">{</span>
      mask = <span class="kw7">Mid</span><span class="br0">(</span>Mask, <span class="nu0">1</span><span class="br0">)</span>;
      <span class="kw1">if</span> <span class="br0">(</span>mask == <span class="st0">""</span><span class="br0">)</span> <span class="kw1">return</span> <span class="kw9">true</span>; <span class="co1">// only "*" mask -&gt; always true</span>
      mp = mask;
      cp = <span class="kw7">Mid</span><span class="br0">(</span>target, <span class="nu0">1</span><span class="br0">)</span>;
      m = <span class="kw7">Left</span><span class="br0">(</span>mask, <span class="nu0">1</span><span class="br0">)</span>;
    <span class="br0">}</span> 
    <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>m == <span class="kw7">Left</span><span class="br0">(</span>target, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> || <span class="br0">(</span>m == <span class="st0">"?"</span><span class="br0">)</span><span class="br0">)</span> 
    <span class="br0">{</span>
      mask = <span class="kw7">Mid</span><span class="br0">(</span>Mask, <span class="nu0">1</span><span class="br0">)</span>;
      target = <span class="kw7">Mid</span><span class="br0">(</span>target, <span class="nu0">1</span><span class="br0">)</span>;
      m = <span class="kw7">Left</span><span class="br0">(</span>mask, <span class="nu0">1</span><span class="br0">)</span>;
    <span class="br0">}</span> 
    <span class="kw1">else</span> 
    <span class="br0">{</span>
      mask = mp;
      m = <span class="kw7">Left</span><span class="br0">(</span>mask, <span class="nu0">1</span><span class="br0">)</span>;
      target = cp;
      cp = <span class="kw7">Mid</span><span class="br0">(</span>cp, <span class="nu0">1</span><span class="br0">)</span>;
    <span class="br0">}</span>
  <span class="br0">}</span>
 
  <span class="kw1">while</span> <span class="br0">(</span><span class="kw7">Left</span><span class="br0">(</span>mask, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"*"</span><span class="br0">)</span> 
  <span class="br0">{</span>
    mask = <span class="kw7">Mid</span><span class="br0">(</span>Mask, <span class="nu0">1</span><span class="br0">)</span>;
  <span class="br0">}</span>
  <span class="kw1">return</span> <span class="br0">(</span>mask == <span class="st0">""</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="coMULTI">/** Compare a string with a mask              &lt;br /&gt;
    Wildcards: * = X chars; ? = 1 char        &lt;br /&gt;
    Wildcards can appear anywhere in the mask */</span>
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw5">function</span> <span class="kw4">bool</span> MaskedCompare<span class="br0">(</span><span class="kw6">coerce</span> <span class="kw4">string</span> target, <span class="kw4">string</span> mask, <span class="kw6">optional</span> <span class="kw4">bool</span> casesensitive<span class="br0">)</span>
<span class="br0">{</span>
  <span class="kw1">if</span> <span class="br0">(</span>!casesensitive<span class="br0">)</span>
  <span class="br0">{</span>
    mask = <span class="kw7">Caps</span><span class="br0">(</span>mask<span class="br0">)</span>;
    target = <span class="kw7">Caps</span><span class="br0">(</span>target<span class="br0">)</span>;
  <span class="br0">}</span>
  <span class="kw1">if</span> <span class="br0">(</span>mask == <span class="st0">"*"</span><span class="br0">)</span> <span class="kw1">return</span> <span class="kw9">true</span>;
 
  <span class="kw1">return</span> _match<span class="br0">(</span>mask, target<span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="coMULTI">/** InStr starting from an offset */</span>
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw5">function</span> <span class="kw4">int</span> InStrFrom<span class="br0">(</span><span class="kw6">coerce</span> <span class="kw4">string</span> StrText, <span class="kw6">coerce</span> <span class="kw4">string</span> StrPart, <span class="kw6">optional</span> <span class="kw4">int</span> OffsetStart<span class="br0">)</span>
<span class="br0">{</span>
  <span class="kw5">local</span> <span class="kw4">int</span> OffsetPart;
 
  OffsetPart = <span class="kw7">InStr</span><span class="br0">(</span><span class="kw7">Mid</span><span class="br0">(</span>StrText, OffsetStart<span class="br0">)</span>, StrPart<span class="br0">)</span>;
  <span class="kw1">if</span> <span class="br0">(</span>OffsetPart &gt;= <span class="nu0">0</span><span class="br0">)</span>
    OffsetPart += OffsetStart;
  <span class="kw1">return</span> OffsetPart;
<span class="br0">}</span>
 
<span class="coMULTI">/**
   Replace key=value sets: ?key=valye?otherkey=othervalue?...      &lt;br /&gt;
   Options: the string containing these key=value sets             &lt;br /&gt;
   Key: the key to replace/add                                     &lt;br /&gt;
   NewValue: the new value of the Key                              &lt;br /&gt;
   bAddIfMissing: add the key=value pair if it doesn't exist       &lt;br /&gt;
   OldValue: this will contain the previous value                  &lt;br /&gt;
   delim: the delimiter of the key=value pairs, by default: ?      &lt;br /&gt;
*/</span>
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw5">function</span> <span class="kw4">bool</span> ReplaceOption<span class="br0">(</span> <span class="kw6">out</span> <span class="kw4">string</span> Options, <span class="kw4">string</span> Key, <span class="kw4">string</span> NewValue, <span class="kw6">optional</span> <span class="kw4">bool</span> bAddIfMissing, <span class="kw6">optional</span> <span class="kw6">out</span> <span class="kw4">string</span> OldValue, <span class="kw6">optional</span> <span class="kw4">string</span> delim<span class="br0">)</span>
<span class="br0">{</span>
  <span class="kw5">local</span> array&lt;string&gt; OptionsArray;
  <span class="kw5">local</span> <span class="kw4">int</span> i;
  <span class="kw5">local</span> <span class="kw4">string</span> CurrentKey, CurrentValue;
  <span class="kw5">local</span> <span class="kw4">bool</span> bReplaced;
  bReplaced = <span class="kw9">false</span>;
 
  <span class="kw1">if</span> <span class="br0">(</span>delim == <span class="st0">""</span><span class="br0">)</span> delim = <span class="st0">"?"</span>; <span class="co1">// default delim is ?</span>
  Split2<span class="br0">(</span> Options, delim, OptionsArray <span class="br0">)</span>;
  <span class="co1">// find the key</span>
  <span class="kw1">for</span> <span class="br0">(</span> i = <span class="nu0">0</span>; i &lt; OptionsArray.<span class="kw6">Length</span>; i++ <span class="br0">)</span> <span class="br0">{</span>
    <span class="kw7">Divide</span><span class="br0">(</span> OptionsArray<span class="br0">[</span>i<span class="br0">]</span>, <span class="st0">"="</span>, CurrentKey, CurrentValue <span class="br0">)</span>;
 
    <span class="kw1">if</span> <span class="br0">(</span> CurrentKey ~= Key <span class="br0">)</span> <span class="br0">{</span>
      OldValue = CurrentValue;
      OptionsArray<span class="br0">[</span>i<span class="br0">]</span> = CurrentKey$<span class="st0">"="</span>$NewValue;
      bReplaced = <span class="kw9">true</span>;
    <span class="br0">}</span>
  <span class="br0">}</span>
  <span class="co1">// add if missing</span>
  <span class="kw1">if</span> <span class="br0">(</span> !bReplaced &amp;&amp; bAddIfMissing <span class="br0">)</span> OptionsArray<span class="br0">[</span>OptionsArray.<span class="kw6">Length</span><span class="br0">]</span> = Key$<span class="st0">"="</span>$NewValue;
  <span class="co1">// join the strings</span>
  Options = <span class="kw5">class</span><span class="st0">'wArray'</span>.<span class="kw6">static</span>.<span class="me1">Join</span><span class="br0">(</span>OptionsArray, delim<span class="br0">)</span>;
  <span class="kw1">return</span> bReplaced;
<span class="br0">}</span>
 
<span class="coMULTI">/** Capitalize a string. &lt;br /&gt;
    example: 'this is a STRING' -&gt; 'This Is A String' */</span>
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw5">function</span> <span class="kw4">string</span> Capitalize<span class="br0">(</span><span class="kw6">coerce</span> <span class="kw4">string</span> S<span class="br0">)</span>
<span class="br0">{</span>
  <span class="kw5">local</span> array&lt;string&gt; parts;
  <span class="kw5">local</span> <span class="kw4">int</span> i;
  Split2<span class="br0">(</span>s, <span class="st0">" "</span>, parts<span class="br0">)</span>;
  <span class="kw1">for</span> <span class="br0">(</span>i = <span class="nu0">0</span>; i &lt; parts.<span class="kw6">length</span>; i++<span class="br0">)</span>
  <span class="br0">{</span>
    parts<span class="br0">[</span>i<span class="br0">]</span> = <span class="kw7">Caps</span><span class="br0">(</span><span class="kw7">Left</span><span class="br0">(</span>parts<span class="br0">[</span>i<span class="br0">]</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span>$Lower<span class="br0">(</span><span class="kw7">Mid</span><span class="br0">(</span>parts<span class="br0">[</span>i<span class="br0">]</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span>;
  <span class="br0">}</span>
  <span class="kw1">return</span> <span class="kw5">class</span><span class="st0">'wArray'</span>.<span class="kw6">static</span>.<span class="me1">join</span><span class="br0">(</span>parts, <span class="st0">" "</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="coMULTI">/**
   Fixed split method                        &lt;br /&gt;
   no problems when it starts with a delim   &lt;br /&gt;
   no problems with ending spaces            &lt;br /&gt;
   delim can be a string                     &lt;br /&gt;
*/</span>
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw5">function</span> <span class="kw4">int</span> Split2<span class="br0">(</span><span class="kw6">coerce</span> <span class="kw4">string</span> src, <span class="kw4">string</span> delim, <span class="kw6">out</span> array&lt;string&gt; parts, <span class="kw6">optional</span> <span class="kw4">bool</span> ignoreEmpty, <span class="kw6">optional</span> <span class="kw4">string</span> quotechar<span class="br0">)</span>
<span class="br0">{</span>
  <span class="kw5">local</span> <span class="kw4">string</span> temp;
  Parts.<span class="kw6">Remove</span><span class="br0">(</span><span class="nu0">0</span>, Parts.<span class="kw6">Length</span><span class="br0">)</span>;
  <span class="kw1">if</span> <span class="br0">(</span>delim == <span class="st0">""</span> || Src == <span class="st0">""</span> <span class="br0">)</span> <span class="kw1">return</span> <span class="nu0">0</span>;
  <span class="kw1">while</span> <span class="br0">(</span>src != <span class="st0">""</span><span class="br0">)</span>
  <span class="br0">{</span>
    temp = StrShift<span class="br0">(</span>src, delim, quotechar<span class="br0">)</span>;
    <span class="kw1">if</span> <span class="br0">(</span>temp == <span class="st0">""</span><span class="br0">)</span>
    <span class="br0">{</span>
      <span class="kw1">if</span> <span class="br0">(</span>!ignoreEmpty<span class="br0">)</span>
      <span class="br0">{</span>
        parts.<span class="kw6">length</span> = parts.<span class="me1">length</span><span class="nu0">+1</span>;
        parts<span class="br0">[</span>parts.<span class="me1">length</span><span class="nu0">-1</span><span class="br0">]</span> = temp;
      <span class="br0">}</span>
    <span class="br0">}</span>
    <span class="kw1">else</span> <span class="br0">{</span>
      parts.<span class="kw6">length</span> = parts.<span class="me1">length</span><span class="nu0">+1</span>;
      parts<span class="br0">[</span>parts.<span class="me1">length</span><span class="nu0">-1</span><span class="br0">]</span> = temp;
    <span class="br0">}</span>
  <span class="br0">}</span>
  <span class="kw1">return</span> parts.<span class="kw6">length</span>;
<span class="br0">}</span>
 
<span class="coMULTI">/** Replaces part of a string with a new string. &lt;br /&gt;
    ReplaceInString("A stupid string.", 2, 6, "good") == "A good string."  */</span>
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw5">function</span> <span class="kw4">string</span> ReplaceInString<span class="br0">(</span><span class="kw6">coerce</span> <span class="kw4">string</span> src, <span class="kw4">int</span> from, <span class="kw4">int</span> <span class="kw6">length</span>, <span class="kw6">coerce</span> <span class="kw4">string</span> with<span class="br0">)</span>
<span class="br0">{</span>
  <span class="kw1">return</span> <span class="kw7">Left</span><span class="br0">(</span>src, from<span class="br0">)</span>$with$Mid<span class="br0">(</span>src, from+<span class="kw6">length</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="coMULTI">/** Moves NUM lements from Source to Dest */</span>
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw5">function</span> Eat<span class="br0">(</span><span class="kw6">out</span> <span class="kw4">string</span> Dest, <span class="kw6">out</span> <span class="kw4">string</span> Source, <span class="kw4">int</span> Num<span class="br0">)</span>
<span class="br0">{</span>
  Dest = Dest $ <span class="kw7">Left</span><span class="br0">(</span>Source, Num<span class="br0">)</span>;
  Source = <span class="kw7">Mid</span><span class="br0">(</span>Source, Num<span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="coMULTI">/** Converts a float to a string representation */</span>
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw5">function</span> <span class="kw4">string</span> FloatToString<span class="br0">(</span><span class="kw4">float</span> Value, <span class="kw6">optional</span> <span class="kw4">int</span> Precision<span class="br0">)</span>
<span class="br0">{</span>
  <span class="kw5">local</span> <span class="kw4">int</span> IntPart;
  <span class="kw5">local</span> <span class="kw4">float</span> FloatPart;
  <span class="kw5">local</span> <span class="kw4">string</span> IntString, FloatString;
 
  Precision = <span class="kw7">Max</span><span class="br0">(</span>Precision, <span class="nu0">1</span><span class="br0">)</span>;  <span class="co1">// otherwise a simple int cast should be used</span>
 
  <span class="kw1">if</span> <span class="br0">(</span> Value &lt; <span class="nu0">0</span> <span class="br0">)</span> <span class="br0">{</span>
    IntString = <span class="st0">"-"</span>;
    Value *= <span class="nu0">-1</span>;
  <span class="br0">}</span>
  IntPart = <span class="kw4">int</span><span class="br0">(</span>Value<span class="br0">)</span>;
  FloatPart = Value - IntPart;
  IntString = IntString $ <span class="kw4">string</span><span class="br0">(</span>IntPart<span class="br0">)</span>;
  FloatString = <span class="kw4">string</span><span class="br0">(</span><span class="kw4">int</span><span class="br0">(</span>FloatPart * <span class="nu0">10</span> ** Precision<span class="br0">)</span><span class="br0">)</span>;
  <span class="kw1">while</span> <span class="br0">(</span><span class="kw7">Len</span><span class="br0">(</span>FloatString<span class="br0">)</span> &lt; Precision<span class="br0">)</span>
    FloatString = <span class="st0">"0"</span> $ FloatString;
 
  <span class="kw1">return</span> IntString$<span class="st0">"."</span>$FloatString;
<span class="br0">}</span>
 
<span class="kw5">function</span> <span class="kw6">static</span> <span class="kw4">string</span> AlignLeft<span class="br0">(</span><span class="kw6">coerce</span> <span class="kw4">string</span> line, <span class="kw4">int</span> <span class="kw6">length</span>, <span class="kw6">optional</span> <span class="kw4">string</span> padchar<span class="br0">)</span>
<span class="br0">{</span>
  <span class="kw5">local</span> <span class="kw4">int</span> i;
  <span class="kw1">if</span> <span class="br0">(</span>padchar == <span class="st0">""</span><span class="br0">)</span> padchar = <span class="st0">" "</span>;
  i = length-<span class="kw7">Len</span><span class="br0">(</span>line<span class="br0">)</span>;
  <span class="kw1">while</span> <span class="br0">(</span>i &gt; <span class="nu0">0</span><span class="br0">)</span>
  <span class="br0">{</span>
    line = line$padchar;
    i--;
  <span class="br0">}</span>
  <span class="kw1">if</span> <span class="br0">(</span>i &lt; <span class="nu0">0</span><span class="br0">)</span> line = <span class="kw7">Left</span><span class="br0">(</span>line, <span class="kw6">length</span><span class="br0">)</span>;
  <span class="kw1">return</span> line;
<span class="br0">}</span>
 
<span class="kw5">function</span> <span class="kw6">static</span> <span class="kw4">string</span> AlignRight<span class="br0">(</span><span class="kw6">coerce</span> <span class="kw4">string</span> line, <span class="kw4">int</span> <span class="kw6">length</span>, <span class="kw6">optional</span> <span class="kw4">string</span> padchar<span class="br0">)</span>
<span class="br0">{</span>
  <span class="kw5">local</span> <span class="kw4">int</span> i;
  <span class="kw1">if</span> <span class="br0">(</span>padchar == <span class="st0">""</span><span class="br0">)</span> padchar = <span class="st0">" "</span>;
  i = length-<span class="kw7">Len</span><span class="br0">(</span>line<span class="br0">)</span>;
  <span class="kw1">while</span> <span class="br0">(</span>i &gt; <span class="nu0">0</span><span class="br0">)</span>
  <span class="br0">{</span>
    line = padchar$line;
    i--;
  <span class="br0">}</span>
  <span class="kw1">if</span> <span class="br0">(</span>i &lt; <span class="nu0">0</span><span class="br0">)</span> line = <span class="kw7">Right</span><span class="br0">(</span>line, <span class="kw6">length</span><span class="br0">)</span>;
  <span class="kw1">return</span> line;
<span class="br0">}</span>
 
<span class="kw5">function</span> <span class="kw6">static</span> <span class="kw4">string</span> AlignCenter<span class="br0">(</span><span class="kw6">coerce</span> <span class="kw4">string</span> line, <span class="kw4">int</span> <span class="kw6">length</span>, <span class="kw6">optional</span> <span class="kw4">string</span> padchar<span class="br0">)</span>
<span class="br0">{</span>
  <span class="kw5">local</span> <span class="kw4">int</span> i, j;
  <span class="kw1">if</span> <span class="br0">(</span>padchar == <span class="st0">""</span><span class="br0">)</span> padchar = <span class="st0">" "</span>;
  i = <span class="kw7">Len</span><span class="br0">(</span>line<span class="br0">)</span>/<span class="nu0">2</span>;
  j = <span class="kw7">Len</span><span class="br0">(</span>line<span class="br0">)</span>-i;
  <span class="kw1">return</span> AlignRight<span class="br0">(</span><span class="kw7">Left</span><span class="br0">(</span>line, i<span class="br0">)</span>, length-<span class="br0">(</span><span class="kw6">length</span>/<span class="nu0">2</span><span class="br0">)</span>, padchar<span class="br0">)</span>$AlignLeft<span class="br0">(</span><span class="kw7">Right</span><span class="br0">(</span>line, j<span class="br0">)</span>, <span class="kw6">length</span>/<span class="nu0">2</span>, padchar<span class="br0">)</span>;
<span class="br0">}</span>
</pre></div>

<!-- 
NewPP limit report
Preprocessor node count: 5/1000000
Post-expand include size: 14/2097152 bytes
Template argument size: 0/2097152 bytes
#ifexist count: 0/100
-->
<div class="printfooter">
</div>
	    <div id="catlinks"><p class='catlinks'><a href="../../../../articles/c/a/t/Special%7ECategories_101d.html" title="Special:Categories">Category</a>: <span dir='ltr'><a href="../../../../articles/l/e/g/Category%7ELegacy_Custom_Class_%28UT2004%29_0b8c.html" title="Category:Legacy Custom Class (UT2004)">Legacy Custom Class (UT2004)</a></span></p></div>	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-legacy"
	       class="selected"	       ><a href="../../../../articles/w/u/t/Legacy%7EWUtils_WString_0adc.html">Legacy</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../../articles/w/u/t/Legacy_talk%7EWUtils_WString_e922.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://wiki.beyondunreal.com/Legacy:WUtils/WString">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../../misc/uewiki.png);"
	    href="../../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-mainpage"><a href="../../../../index.html">Main Page</a></li>
	     	      <li id="n-portal"><a href="../../../../articles/c/o/m/Unreal_Wiki%7ECommunity_Portal_3311.html">Community portal</a></li>
	     	      <li id="n-help"><a href="../../../../articles/c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="../../../../../COPYING.html"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt='Attribution-Noncommercial-Share Alike 3.0' /></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 13:49, 26 February 2008 by Anonymous user(s) of Unreal Wiki. Based on work by Unreal Wiki user(s) <a href="../../../../articles/w/o/r/User%7EWormbo_7d13.html" title="User:Wormbo">Wormbo</a>.</li>	  <li id="f-copyright">Licensed as <a href="../../../../articles/c/o/p/Unreal_Wiki%7ECopyrights_e561.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>	  <li id="f-about"><a href="../../../../articles/a/b/o/Unreal_Wiki%7EAbout_9ce6.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>	  <li id="f-disclaimer"><a href="../../../../articles/g/e/n/Unreal_Wiki%7EGeneral_disclaimer_a0a2.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>
