<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- headlinks removed -->
	<link rel="shortcut icon" href="../../../../misc/uewiki-favicon.png"/>
    <title>Legacy:ONSWeapon - Unreal Wiki</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../../skins/offline/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/md5.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/utf8.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/lookup.js"></script>
    <script type="text/javascript" src="../../../../articles/-/_/_/-.html"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../../articles/c/o/m/MediaWiki%7ECommon.css_d42e.html";
@import "../../../../articles/m/o/n/MediaWiki%7EMonobook.css_fb19.html";
@import "../../../../articles/-/_/_/-.html";
/*]]>*/</style>          </head>
  <body
    class="ns-100">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Legacy:ONSWeapon</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</h3>
	    <div id="contentSub"></div>
	    	    	    <!-- start content -->
	    <div class="infobox infobox-class infobox-legacy"><a href="../../../../articles/u/t/2/Legacy%7EUT2004_5921.html" class="mw-redirect" title="Legacy:UT2004">UT2004</a>&#160;:: <a href="../../../../articles/a/c/t/Legacy%7EActor_5985.html" title="Legacy:Actor">Actor</a> &gt;&gt; ONSWeapon (Package: Onslaught)</div>
<p>This is the non-placable parent class of all of the vehicle and turret weapons found in the Onslaught <a href="../../../../articles/g/a/m/Legacy%7EGametype_98de.html" title="Legacy:Gametype">Gametype</a>.</p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#Properties"><span class="tocnumber">1</span> <span class="toctext">Properties</span></a>
<ul>
<li class="toclevel-2"><a href="#Weapon_Bone_Rotation_System"><span class="tocnumber">1.1</span> <span class="toctext">Weapon Bone Rotation System</span></a>
<ul>
<li class="toclevel-3"><a href="#Main"><span class="tocnumber">1.1.1</span> <span class="toctext">Main</span></a></li>
<li class="toclevel-3"><a href="#Hidden"><span class="tocnumber">1.1.2</span> <span class="toctext">Hidden</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Flags"><span class="tocnumber">1.2</span> <span class="toctext">Flags</span></a>
<ul>
<li class="toclevel-3"><a href="#Main_2"><span class="tocnumber">1.2.1</span> <span class="toctext">Main</span></a></li>
<li class="toclevel-3"><a href="#Hidden_2"><span class="tocnumber">1.2.2</span> <span class="toctext">Hidden</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Aiming"><span class="tocnumber">1.3</span> <span class="toctext">Aiming</span></a>
<ul>
<li class="toclevel-3"><a href="#Main_3"><span class="tocnumber">1.3.1</span> <span class="toctext">Main</span></a></li>
<li class="toclevel-3"><a href="#Hidden_3"><span class="tocnumber">1.3.2</span> <span class="toctext">Hidden</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Impact.2FDamage"><span class="tocnumber">1.4</span> <span class="toctext">Impact/Damage</span></a></li>
<li class="toclevel-2"><a href="#Team_Skins"><span class="tocnumber">1.5</span> <span class="toctext">Team Skins</span></a>
<ul>
<li class="toclevel-3"><a href="#Main_4"><span class="tocnumber">1.5.1</span> <span class="toctext">Main</span></a></li>
<li class="toclevel-3"><a href="#Hidden_4"><span class="tocnumber">1.5.2</span> <span class="toctext">Hidden</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Timing"><span class="tocnumber">1.6</span> <span class="toctext">Timing</span></a>
<ul>
<li class="toclevel-3"><a href="#Main_5"><span class="tocnumber">1.6.1</span> <span class="toctext">Main</span></a></li>
<li class="toclevel-3"><a href="#Hidden_5"><span class="tocnumber">1.6.2</span> <span class="toctext">Hidden</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Effects"><span class="tocnumber">1.7</span> <span class="toctext">Effects</span></a>
<ul>
<li class="toclevel-3"><a href="#Main_6"><span class="tocnumber">1.7.1</span> <span class="toctext">Main</span></a></li>
<li class="toclevel-3"><a href="#Hidden_6"><span class="tocnumber">1.7.2</span> <span class="toctext">Hidden</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Sound"><span class="tocnumber">1.8</span> <span class="toctext">Sound</span></a></li>
<li class="toclevel-2"><a href="#Force_Feedback"><span class="tocnumber">1.9</span> <span class="toctext">Force Feedback</span></a></li>
<li class="toclevel-2"><a href="#Instant_Fire_Stuff"><span class="tocnumber">1.10</span> <span class="toctext">Instant Fire Stuff</span></a></li>
<li class="toclevel-2"><a href="#Projectile_Fire_Stuff"><span class="tocnumber">1.11</span> <span class="toctext">Projectile Fire Stuff</span></a>
<ul>
<li class="toclevel-3"><a href="#Main_7"><span class="tocnumber">1.11.1</span> <span class="toctext">Main</span></a></li>
<li class="toclevel-3"><a href="#Hidden_7"><span class="tocnumber">1.11.2</span> <span class="toctext">Hidden</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Camera_Shakes"><span class="tocnumber">1.12</span> <span class="toctext">Camera Shakes</span></a></li>
<li class="toclevel-2"><a href="#AI"><span class="tocnumber">1.13</span> <span class="toctext">AI</span></a></li>
<li class="toclevel-2"><a href="#Debugging"><span class="tocnumber">1.14</span> <span class="toctext">Debugging</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Replication"><span class="tocnumber">2</span> <span class="toctext">Replication</span></a></li>
<li class="toclevel-1"><a href="#Functions"><span class="tocnumber">3</span> <span class="toctext">Functions</span></a></li>
<li class="toclevel-1"><a href="#Events"><span class="tocnumber">4</span> <span class="toctext">Events</span></a></li>
<li class="toclevel-1"><a href="#States"><span class="tocnumber">5</span> <span class="toctext">States</span></a>
<ul>
<li class="toclevel-2"><a href="#InstantFireMode"><span class="tocnumber">5.1</span> <span class="toctext">InstantFireMode</span></a>
<ul>
<li class="toclevel-3"><a href="#Functions_2"><span class="tocnumber">5.1.1</span> <span class="toctext">Functions</span></a></li>
<li class="toclevel-3"><a href="#Events_2"><span class="tocnumber">5.1.2</span> <span class="toctext">Events</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#ProjectileFireMode"><span class="tocnumber">5.2</span> <span class="toctext">ProjectileFireMode</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Notes"><span class="tocnumber">6</span> <span class="toctext">Notes</span></a></li>
<li class="toclevel-1"><a href="#Discussion"><span class="tocnumber">7</span> <span class="toctext">Discussion</span></a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script>
<p><a name="Properties" id="Properties"></a></p>
<h2><span class="mw-headline">Properties</span></h2>
<p><a name="Weapon_Bone_Rotation_System" id="Weapon_Bone_Rotation_System"></a></p>
<h3><span class="mw-headline">Weapon Bone Rotation System</span></h3>
<p><a name="Main" id="Main"></a></p>
<h4><span class="mw-headline">Main</span></h4>
<dl>
<dt>name YawBone&#160;</dt>
<dt>float YawStartConstraint&#160;</dt>
<dt>float YawEndConstraint&#160;</dt>
<dt>name PitchBone&#160;</dt>
<dt>int PitchUpLimit&#160;</dt>
<dt>int PitchDownLimit&#160;</dt>
<dt>name WeaponFireAttachmentBone&#160;</dt>
<dt>name GunnerAttachmentBone&#160;</dt>
<dt>float WeaponFireOffset&#160;</dt>
<dt>float DualFireOffset&#160;</dt>
<dd>If your weapon has twin muzzles, e.g. Energy Turret and Raptor, this causes shots to alternate from each barrel.</dd>
<dt>vector WeaponOffset&#160;</dt>
<dt>rotator LastRotation&#160;</dt>
<dt>float RotationsPerSecond&#160;</dt>
</dl>
<p><a name="Hidden" id="Hidden"></a></p>
<h4><span class="mw-headline">Hidden</span></h4>
<dl>
<dt>float YawConstraintDelta&#160;</dt>
<dt>rotator CurrentAim&#160;</dt>
<dt>vector WeaponFireLocation&#160;</dt>
<dd>written by CalcWeaponFire</dd>
<dt>rotator WeaponFireRotation&#160;</dt>
<dd>written by CalcWeaponFire</dd>
</dl>
<p><a name="Flags" id="Flags"></a></p>
<h3><span class="mw-headline">Flags</span></h3>
<p><a name="Main_2" id="Main_2"></a></p>
<h4><span class="mw-headline">Main</span></h4>
<dl>
<dt>bool bInstantFire&#160;</dt>
<dd>As Noted Above specifies InstantFireState instead of ProjectileFireState for the generic weapon firing code to use.</dd>
<dt>bool bDualIndependantTargeting&#160;</dt>
<dd>When using a DualFireOffset each shot will be independantly targeted at the crosshair</dd>
<dt>bool bAimable&#160;</dt>
<dd>Determines whether the weapon can be physically turned by the player (i.e. turret rotation or gun barrel pitch).</dd>
<dt>bool bAmbientFireSound&#160;</dt>
<dt>bool bAmbientAltFireSound&#160;</dt>
<dt>bool bInheritVelocity&#160;</dt>
<dt>bool bReflective&#160;</dt>
<dd>Can be reflected by shield gun shield?</dd>
</dl>
<p><a name="Hidden_2" id="Hidden_2"></a></p>
<h4><span class="mw-headline">Hidden</span></h4>
<dl>
<dt>bool bInstantRotation&#160;</dt>
<dd>NOTE: Gradual rotation via RotationsPerSecond still used for non-owning net clients to smooth rotation changes</dd>
<dt>bool bActive&#160;</dt>
<dt>bool bShowChargingBar&#160;</dt>
<dd>Bender Style?</dd>
<dt>bool bCallInstigatorPostRender&#160;</dt>
<dd>If Instigator exists, during this actor's native PostRender(), call Instigator-&gt;PostRender() (used when weapon is visible but owner is bHidden)</dd>
<dt>bool bForceCenterAim&#160;</dt>
<dd>Not Used on The Goliath?</dd>
<dt>bool bDoOffsetTrace&#160;</dt>
<dd>Trace from outside vehicle's collision back towards weapon to determine firing offset. Probably Another Goliathy Type Feature</dd>
<dt>bool bIsAltFire&#160;</dt>
<dt>bool bIsRepeatingFF&#160;</dt>
<dt>bool bCorrectAim (out, native, const)&#160;</dt>
<dd>Indicates gun can hit what controller is aiming at</dd>
</dl>
<p><a name="Aiming" id="Aiming"></a></p>
<h3><span class="mw-headline">Aiming</span></h3>
<p><a name="Main_3" id="Main_3"></a></p>
<h4><span class="mw-headline">Main</span></h4>
<dl>
<dt>float FireIntervalAimLock&#160;</dt>
<dd>Fraction of FireInterval/AltFireInterval during which you can't move the gun</dd>
</dl>
<p><a name="Hidden_3" id="Hidden_3"></a></p>
<h4><span class="mw-headline">Hidden</span></h4>
<dl>
<dt>float AimLockReleaseTime&#160;</dt>
<dd>When this time is reached gun can move again</dd>
<dt>vector CurrentHitLocation&#160;</dt>
<dt>float Spread&#160;</dt>
<dt>float AimTraceRange&#160;</dt>
</dl>
<p><a name="Impact.2FDamage" id="Impact.2FDamage"></a></p>
<h3><span class="mw-headline">Impact/Damage</span></h3>
<p>Each of these properties is hidden.</p>
<dl>
<dt>vector LastHitLocation&#160;</dt>
<dt>byte FlashCount&#160;</dt>
<dt>byte OldFlashCount&#160;</dt>
<dt>byte HitCount&#160;</dt>
<dt>byte OldHitCount&#160;</dt>
</dl>
<p><a name="Team_Skins" id="Team_Skins"></a></p>
<h3><span class="mw-headline">Team Skins</span></h3>
<p><a name="Main_4" id="Main_4"></a></p>
<h4><span class="mw-headline">Main</span></h4>
<dl>
<dt>Material RedSkin&#160;</dt>
<dt>Material BlueSkin&#160;</dt>
</dl>
<p><a name="Hidden_4" id="Hidden_4"></a></p>
<h4><span class="mw-headline">Hidden</span></h4>
<dl>
<dt>var byte Team&#160;</dt>
</dl>
<p><a name="Timing" id="Timing"></a></p>
<h3><span class="mw-headline">Timing</span></h3>
<p><a name="Main_5" id="Main_5"></a></p>
<h4><span class="mw-headline">Main</span></h4>
<dl>
<dt>float FireInterval, AltFireInterval&#160;</dt>
</dl>
<p><a name="Hidden_5" id="Hidden_5"></a></p>
<h4><span class="mw-headline">Hidden</span></h4>
<dl>
<dt>float FireCountDown&#160;</dt>
</dl>
<p><a name="Effects" id="Effects"></a></p>
<h3><span class="mw-headline">Effects</span></h3>
<p><a name="Main_6" id="Main_6"></a></p>
<h4><span class="mw-headline">Main</span></h4>
<dl>
<dt>class&lt;<a href="../../../../articles/e/m/i/Legacy%7EEmitter_1879.html" title="Legacy:Emitter">Emitter</a>&gt; FlashEmitterClass&#160;</dt>
<dt>class&lt;<a href="../../../../articles/e/m/i/Legacy%7EEmitter_1879.html" title="Legacy:Emitter">Emitter</a>&gt; EffectEmitterClass&#160;</dt>
<dt>class&lt;ONSWeaponAmbientEmitter&gt; AmbientEffectEmitterClass&#160;</dt>
</dl>
<p><a name="Hidden_6" id="Hidden_6"></a></p>
<h4><span class="mw-headline">Hidden</span></h4>
<dl>
<dt><a href="../../../../articles/e/m/i/Legacy%7EEmitter_1879.html" title="Legacy:Emitter">Emitter</a> FlashEmitter&#160;</dt>
<dt><a href="../../../../articles/e/m/i/Legacy%7EEmitter_1879.html" title="Legacy:Emitter">Emitter</a> EffectEmitter&#160;</dt>
<dt>ONSWeaponAmbientEmitter AmbientEffectEmitter&#160;</dt>
</dl>
<p><a name="Sound" id="Sound"></a></p>
<h3><span class="mw-headline">Sound</span></h3>
<p>Each of these properties are available to edit.</p>
<dl>
<dt>sound FireSoundClass&#160;</dt>
<dt>float FireSoundVolume&#160;</dt>
<dt>float FireSoundRadius&#160;</dt>
<dt>float FireSoundPitch&#160;</dt>
<dt>sound AltFireSoundClass&#160;</dt>
<dt>float AltFireSoundVolume&#160;</dt>
<dt>float AltFireSoundRadius&#160;</dt>
<dt>float AltFireSoundPitch&#160;</dt>
<dd>Why ISN'T this here?&#160;:0</dd>
<dt>float AmbientSoundScaling&#160;</dt>
</dl>
<p><a name="Force_Feedback" id="Force_Feedback"></a></p>
<h3><span class="mw-headline">Force Feedback</span></h3>
<p>Each of these properties are available to edit.</p>
<dl>
<dt>string FireForce&#160;</dt>
<dt>string AltFireForce&#160;</dt>
</dl>
<p><a name="Instant_Fire_Stuff" id="Instant_Fire_Stuff"></a></p>
<h3><span class="mw-headline">Instant Fire Stuff</span></h3>
<p>Each of these properties are hidden.</p>
<dl>
<dt>class&lt;<a href="../../../../articles/d/a/m/Legacy%7EDamageType_c81e.html" title="Legacy:DamageType">DamageType</a>&gt; DamageType&#160;</dt>
<dt>int DamageMin, DamageMax&#160;</dt>
<dd>Instant Hits work by applying damage as RealDamage = DamageMin + Rand(DamageMax-DamageMin)</dd>
<dt>float TraceRange&#160;</dt>
<dt>float Momentum&#160;</dt>
</dl>
<p><a name="Projectile_Fire_Stuff" id="Projectile_Fire_Stuff"></a></p>
<h3><span class="mw-headline">Projectile Fire Stuff</span></h3>
<p><a name="Main_7" id="Main_7"></a></p>
<h4><span class="mw-headline">Main</span></h4>
<dl>
<dt>class&lt;<a href="../../../../articles/p/r/o/Legacy%7EProjectile_699a.html" title="Legacy:Projectile">Projectile</a>&gt; ProjectileClass&#160;</dt>
<dt>class&lt;<a href="../../../../articles/p/r/o/Legacy%7EProjectile_699a.html" title="Legacy:Projectile">Projectile</a>&gt; AltFireProjectileClass&#160;</dt>
</dl>
<p><a name="Hidden_7" id="Hidden_7"></a></p>
<h4><span class="mw-headline">Hidden</span></h4>
<dl>
<dt>array&lt;<a href="../../../../articles/p/r/o/Legacy%7EProjectile_699a.html" title="Legacy:Projectile">Projectile</a>&gt; Projectiles&#160;</dt>
<dd>Ignore these when doing third person aiming trace (only necessary if projectiles fired have bProjTarget==true)</dd>
</dl>
<p><a name="Camera_Shakes" id="Camera_Shakes"></a></p>
<h3><span class="mw-headline">Camera Shakes</span></h3>
<p>Each of these properties are available to edit.</p>
<dl>
<dt>vector ShakeRotMag&#160;</dt>
<dd>How far to rot view</dd>
<dt>vector ShakeRotRate</dt>
<dd>How fast to rot view</dd>
<dt>float ShakeRotTime</dt>
<dd>How much time to rot the instigator's view</dd>
<dt>vector ShakeOffsetMag</dt>
<dd>Max view offset vertically</dd>
<dt>vector ShakeOffsetRate</dt>
<dd>How fast to offset view vertically</dd>
<dt>float ShakeOffsetTime</dt>
<dd>How much time to offset view</dd>
</dl>
<p><a name="AI" id="AI"></a></p>
<h3><span class="mw-headline">AI</span></h3>
<p>ONSWeapon defines the struct <a href="../../../../articles/o/n/s/Legacy%7EONSWeaponAIInfo_6917.html" title="Legacy:ONSWeaponAIInfo">ONSWeaponAIInfo</a>. These properties are hidden.</p>
<dl>
<dt><a href="../../../../articles/o/n/s/Legacy%7EONSWeaponAIInfo_6917.html" title="Legacy:ONSWeaponAIInfo">ONSWeaponAIInfo</a> AIInfo[2]&#160;</dt>
<dt>FireProperties SavedFireProperties[2]&#160;</dt>
</dl>
<p><a name="Debugging" id="Debugging"></a></p>
<h3><span class="mw-headline">Debugging</span></h3>
<p>This property is hidden.</p>
<dl>
<dt>string DebugInfo&#160;</dt>
</dl>
<p><a name="Replication" id="Replication"></a></p>
<h2><span class="mw-headline">Replication</span></h2>
<p>The following properties are <b>reliable if</b> <tt>Role == ROLE_Authority</tt> and <tt>bNetDirty</tt> is true:</p>
<dl>
<dt>HitCount</dt>
<dt>LastHitLocation</dt>
<dt>bActive</dt>
<dt>bForceCenterAim</dt>
<dt>bCallInstigatorPostRender</dt>
</dl>
<p>If in addition to the above conditions the following properties are also <b>reliable if</b> <tt>bNetOwner</tt> is false:</p>
<dl>
<dt>CurrentHitLocation</dt>
<dt>FlashCount</dt>
</dl>
<p><a name="Functions" id="Functions"></a></p>
<h2><span class="mw-headline">Functions</span></h2>
<dl>
<dt>int LimitPitch( int Pitch, rotator ForwardRotation, optional int WeaponYaw ) (native)&#160;</dt>
<dt>DisplayDebug( <a href="../../../../articles/c/a/n/Legacy%7ECanvas_89bb.html" title="Legacy:Canvas">Canvas</a> Canvas, out float YL, out float YPos ) (simulated)&#160;</dt>
<dd>This will draw the state of bActive, bCorrectAim and the DebugInfo String&#160;:</dd>
<dt>PostBeginPlay() (simulated)&#160;</dt>
<dd>
<dl>
<dd>
<dl>
<dd>Calculate YawConstraintDelta</dd>
<dd>Setup Drawing of the Charging Bar</dd>
<dd>Apply Berserk Fire Modifier If APplicable?</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<dl>
<dt>PostNetBeginPlay() (simulated)&#160;</dt>
<dd>
<dl>
<dd>
<dl>
<dd>Sets the weapon into a state, either InstantFireMode if bInstantFire == true or ProjectileFireMode</dd>
<dd>InitEffect</dd>
<dd>Super()</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<dl>
<dt>InitEffects() (simulated)&#160;</dt>
<dd>Attaches FlashEmitterClass and AmbientEffectEmitterClass to their locations based on WeaponFireAttachmentBone if they are&#160;!= none</dd>
<dt>SetGRI( <a href="../../../../articles/g/a/m/Legacy%7EGameReplicationInfo_504d.html" title="Legacy:GameReplicationInfo">GameReplicationInfo</a> GRI ) (simulated)&#160;</dt>
<dt>SetFireRateModifier( float Modifier ) (simulated)&#160;</dt>
<dt>SpawnHitEffects( <a href="../../../../articles/a/c/t/Legacy%7EActor_5985.html" title="Legacy:Actor">Actor</a> HitActor, vector HitLocation, vector HitNormal )&#160;</dt>
<dd>EMPTY</dd>
<dt>ShakeView() (simulated)&#160;</dt>
<dd>If the person using our ONSWeapon is a player controller call WeaponShakeView(ShakeRotMag, ShakeRotRate, SHakeRotTime, ShakeOffsetMag, ShakeOffsetRate, ShakeOffsetTime)</dd>
<dt>ClientStartFire( <a href="../../../../articles/c/o/n/Legacy%7EController_ee75.html" title="Legacy:Controller">Controller</a> C, bool bAltFire ) (simulated)&#160;</dt>
<dd>ClientStartFire() and ClientStopFire() are only called for the client that owns the weapon (and not at all for bots)
<dl>
<dd>This is where force feedback is activated and OwnerEffects() is called</dd>
</dl>
</dd>
</dl>
<dl>
<dt>ClientStopFire( <a href="../../../../articles/c/o/n/Legacy%7EController_ee75.html" title="Legacy:Controller">Controller</a> C, bool bWasAltFire ) (simulated)&#160;</dt>
<dd>Stops Force Feedback and our AmbientEffectEmitter if it exists</dd>
<dt>ClientPlayForceFeedback( String EffectName ) (simulated)&#160;</dt>
<dd>Verify It's a Valid PlayerController And Get TO IT</dd>
<dt>StopForceFeedback( String EffectName ) (simulated)&#160;</dt>
<dd>Verify It's a Valid PlayerController and Get TO IT</dd>
<dt>OwnerEffects() (simulated)&#160;</dt>
<dd>//do effects (muzzle flash, force feedback, etc) immediately for the weapon's owner (don't wait for replication)</dd>
<dt>rotator AdjustAim( bool bAltFire )&#160;</dt>
<dd>This tells a bot how to line up a shot</dd>
<dt>byte BestMode()&#160;</dt>
<dd>AI: return the best fire mode for the situation</dd>
<dt>Fire( <a href="../../../../articles/c/o/n/Legacy%7EController_ee75.html" title="Legacy:Controller">Controller</a> C )&#160;</dt>
<dd>This Non-State Version just writes a friendly message to the logs</dd>
<dt>AltFire( <a href="../../../../articles/c/o/n/Legacy%7EController_ee75.html" title="Legacy:Controller">Controller</a> C )&#160;</dt>
<dd>This Non-State Version just writes a friendly message to the logs</dd>
<dt>bool CanAttack( <a href="../../../../articles/a/c/t/Legacy%7EActor_5985.html" title="Legacy:Actor">Actor</a> Other)&#160;</dt>
<dd>Return false if out of range, can't see target, etc.</dd>
<dt>float MaxRange() (simulated)&#160;</dt>
<dd>Gives a max distance for bots to use when deciding how to use a weapon.</dd>
<dt><a href="../../../../articles/p/r/o/Legacy%7EProjectile_699a.html" title="Legacy:Projectile">Projectile</a> SpawnProjectile( class&lt;<a href="../../../../articles/p/r/o/Legacy%7EProjectile_699a.html" title="Legacy:Projectile">Projectile</a>&gt; ProjClass, bool bAltFire )&#160;</dt>
<dd>
<dl>
<dd>
<dl>
<dd>First thing this function does is determine the spawn location, this can either be WeaponFireLocation or is computed through a collision trace if bDoOffsetTrace == true</dd>
<dd>Next the projectile is spawned, if bInheritVelocity == true then the Projectile.Velocity = Instigator.Velocity</dd>
<dd>Firing Noises are played using FireClass/AltFireClass and FireSoundRadius/AltFireSoundRadius</dd>
<dd>As i look at the code here, i notice that AltFireSoundVolume is not used here but rather FireSoundVolume/255.0 is used in both the primary and secondary firing modes.</dd>
<dd>The projectile that was spawned is returned</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<dl>
<dt>CeaseFire( <a href="../../../../articles/c/o/n/Legacy%7EController_ee75.html" title="Legacy:Controller">Controller</a> C)&#160;</dt>
<dd>Stops ambient sounds being played and resets Flash/Hit Count</dd>
<dt>Destroyed() (simulated)&#160;</dt>
<dd>Cleans up Effects (DestroyEffects()) and calls SUper()</dd>
<dt>DestroyEffects() (simulated)&#160;</dt>
<dt>SetTeam( byte T ) (simulated)&#160;</dt>
<dd>Sets the current Skin to the proper teams skin</dd>
<dt>SimulateTraceFire( out vector Start, out Rotator Dir, out vector HitLocation, out vector HitNormal ) (simulated)&#160;</dt>
<dd>Client Side Trace, does NOT apply damage, Does predict hit locations</dd>
<dt>TraceFire( vector Start, rotator dir )&#160;</dt>
<dd>Does a trace and applies damage</dd>
<dt>SpawnBeamEffect( vector Start, rotator Dir, vector HitLocation, vector HitNormal, int ReflectNum )&#160;</dt>
<dd>EMPTY</dd>
<dt>CalcWeaponFire() (simulated)&#160;</dt>
<dd>Calculates the exact spot the weapon is firing From based on rotation/coords/bDualIndependentTargeting, and writes them to WeaponFireLocation and WeaponFireRotation</dd>
<dt>float ChargeBar() (simulated)&#160;</dt>
<dt>StaticPrecache( <a href="../../../../articles/l/e/v/Legacy%7ELevelInfo_a2a1.html" title="Legacy:LevelInfo">LevelInfo</a> L ) (static)&#160;</dt>
</dl>
<p><a name="Events" id="Events"></a></p>
<h2><span class="mw-headline">Events</span></h2>
<dl>
<dt>ClientSpawnHitEffects() (simulated)&#160;</dt>
<dt>bool AttemptFire( <a href="../../../../articles/c/o/n/Legacy%7EController_ee75.html" title="Legacy:Controller">Controller</a> C, bool bAltFire)&#160;</dt>
<dd>Fire if we can (This means FireCountdown is &lt;= 0)
<dl>
<dd>
<dl>
<dd>If we can fire, we will call Fire() or AltFire()</dd>
<dd>If we can fire we will set FireCountdown to either FireInterval or AltFireInterval</dd>
<dd>If we can fire aimlock will be applied</dd>
<dd>If we can fire, we will return true</dd>
<dd>Aimlock is implemented here as AimLockReleaseTime = Level.TimeSeconds + FireCountDown*FireIntervalAimLock</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<dl>
<dt>FlashMuzzleFlash() (simulated)&#160;</dt>
</dl>
<p><a name="States" id="States"></a></p>
<h2><span class="mw-headline">States</span></h2>
<p><a name="InstantFireMode" id="InstantFireMode"></a></p>
<h3><span class="mw-headline">InstantFireMode</span></h3>
<p><a name="Functions_2" id="Functions_2"></a></p>
<h4><span class="mw-headline">Functions</span></h4>
<dl>
<dt>Fire( <a href="../../../../articles/c/o/n/Legacy%7EController_ee75.html" title="Legacy:Controller">Controller</a> C)&#160;</dt>
<dd>Apply Some Effects and Call TraceFire to do damage</dd>
<dt>AltFire( <a href="../../../../articles/c/o/n/Legacy%7EController_ee75.html" title="Legacy:Controller">Controller</a> C)&#160;</dt>
<dd>EMPTY</dd>
<dt>SpawnHitEffects( <a href="../../../../articles/a/c/t/Legacy%7EActor_5985.html" title="Legacy:Actor">Actor</a> HitActor, vector HitLocation, vector HitNormal ) (simulated)&#160;</dt>
<dd>Actually spawns hit effects on a client</dd>
</dl>
<p><a name="Events_2" id="Events_2"></a></p>
<h4><span class="mw-headline">Events</span></h4>
<dl>
<dt>ClientSpawnHitEffects() (simulated)&#160;</dt>
<dd>Determines the Hit Location and Calls SpawnHitEffects()</dd>
</dl>
<p><a name="ProjectileFireMode" id="ProjectileFireMode"></a></p>
<h3><span class="mw-headline">ProjectileFireMode</span></h3>
<dl>
<dt>Fire( <a href="../../../../articles/c/o/n/Legacy%7EController_ee75.html" title="Legacy:Controller">Controller</a> C)&#160;</dt>
<dd>Spawn the ProjectileClass()</dd>
<dt>AltFire( <a href="../../../../articles/c/o/n/Legacy%7EController_ee75.html" title="Legacy:Controller">Controller</a> C )&#160;</dt>
<dd>If the AltFireProjectileClass is None, then Fire. Otherwise, spawn the AltFireProjectileClass.</dd>
</dl>
<p><a name="Notes" id="Notes"></a></p>
<h2><span class="mw-headline">Notes</span></h2>
<p>ONSWeapon sub-classes can only fire when in one of the two firing states: InstantFireMode or ProjectileFireMode. This takes place through the ONSWeapon property bInstantFire which is checked in ONSWeapon's PostNetBeginPlay() function.</p>
<p><a name="Discussion" id="Discussion"></a></p>
<h2><span class="mw-headline">Discussion</span></h2>
<p><b>Sweavo:</b> anyone know how to tell when the player has released the fire button? AFAICT CeaseWeaponFire doesn't happen until after the FireInterval expires...?</p>
<p><b>SuperApe:</b> I believe there is a StopFiring() function within AIController or something. The function definitions should be separated from states and events, the words "function", "event", "simulated", etc. should be properly formatted. "var()" and "var" should be removed and the properties should be labeled as Hidden accordingly. EDIT: done.</p>

<!-- 
NewPP limit report
Preprocessor node count: 53/1000000
Post-expand include size: 150/2097152 bytes
Template argument size: 85/2097152 bytes
#ifexist count: 0/100
-->
<div class="printfooter">
</div>
	    <div id="catlinks"><p class='catlinks'><a href="../../../../articles/c/a/t/Special%7ECategories_101d.html" title="Special:Categories">Category</a>: <span dir='ltr'><a href="../../../../articles/l/e/g/Category%7ELegacy_Class_%28UT2004%29_5784.html" title="Category:Legacy Class (UT2004)">Legacy Class (UT2004)</a></span></p></div>	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-legacy"
	       class="selected"	       ><a href="../../../../articles/o/n/s/Legacy%7EONSWeapon_2448.html">Legacy</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../../articles/o/n/s/Legacy_talk%7EONSWeapon_23b2.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://wiki.beyondunreal.com/Legacy:ONSWeapon">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../../misc/uewiki.png);"
	    href="../../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-mainpage"><a href="../../../../index.html">Main Page</a></li>
	     	      <li id="n-portal"><a href="../../../../articles/c/o/m/Unreal_Wiki%7ECommunity_Portal_3311.html">Community portal</a></li>
	     	      <li id="n-help"><a href="../../../../articles/c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="../../../../../COPYING.html"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt='Attribution-Noncommercial-Share Alike 3.0' /></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 19:59, 31 December 2005 by Anonymous user(s) of Unreal Wiki. </li>	  <li id="f-copyright">Licensed as <a href="../../../../articles/c/o/p/Unreal_Wiki%7ECopyrights_e561.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>	  <li id="f-about"><a href="../../../../articles/a/b/o/Unreal_Wiki%7EAbout_9ce6.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>	  <li id="f-disclaimer"><a href="../../../../articles/g/e/n/Unreal_Wiki%7EGeneral_disclaimer_a0a2.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>
