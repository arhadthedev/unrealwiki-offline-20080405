<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- headlinks removed -->
	<link rel="shortcut icon" href="../../../../misc/uewiki-favicon.png"/>
    <title>Legacy:Occlusion Changes For UnrealEngine2 - Unreal Wiki</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../../skins/offline/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/md5.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/utf8.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/lookup.js"></script>
    <script type="text/javascript" src="../../../../articles/-/_/_/-.html"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../../articles/c/o/m/MediaWiki%7ECommon.css_d42e.html";
@import "../../../../articles/m/o/n/MediaWiki%7EMonobook.css_fb19.html";
@import "../../../../articles/-/_/_/-.html";
/*]]>*/</style>          </head>
  <body
    class="ns-100">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Legacy:Occlusion Changes For UnrealEngine2</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</h3>
	    <div id="contentSub"></div>
	    	    	    <!-- start content -->
	    <p>Occlusion behaviour has changed considerably from <a href="../../../../articles/u/n/r/Legacy%7EUnreal_Engine_4409.html" title="Legacy:Unreal Engine">Unreal engine</a> version 1 (Unreal and <a href="../../../../articles/u/t/_/Legacy%7EUT_9cbd.html" class="mw-redirect" title="Legacy:UT">UT</a>) to version 2 (<a href="../../../../articles/u/t/2/Legacy%7EUT2003_f97b.html" class="mw-redirect" title="Legacy:UT2003">UT2003</a> and beyond). As the Unreal Wiki changes to keep pace with developments, most of the material outlining changes between these two versions should be moved here to provide an overview and to simplify other pages.</p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#Seeing_occlusion_in_game"><span class="tocnumber">1</span> <span class="toctext">Seeing occlusion in game</span></a></li>
<li class="toclevel-1"><a href="#Occlusion_only_on_demand"><span class="tocnumber">2</span> <span class="toctext">Occlusion only on demand</span></a></li>
<li class="toclevel-1"><a href="#Zone_Portal_visibility"><span class="tocnumber">3</span> <span class="toctext">Zone Portal visibility</span></a>
<ul>
<li class="toclevel-2"><a href="#stuff_to_be_merged_from_the_other_page"><span class="tocnumber">3.1</span> <span class="toctext">stuff to be merged from the other page</span></a></li>
<li class="toclevel-2"><a href="#A_Change_in_Occlusion_Behaviour"><span class="tocnumber">3.2</span> <span class="toctext">A Change in Occlusion Behaviour</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Related_Topics"><span class="tocnumber">4</span> <span class="toctext">Related Topics</span></a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script>
<p><a name="Seeing_occlusion_in_game" id="Seeing_occlusion_in_game"></a></p>
<h2><span class="mw-headline">Seeing occlusion in game</span></h2>
<p>Try playing maps and typing "RMODE 1" into the console to see what is actually being rendered.</p>
<p><a name="Occlusion_only_on_demand" id="Occlusion_only_on_demand"></a></p>
<h2><span class="mw-headline">Occlusion only on demand</span></h2>
<p>In UnrealEngine1, all <a href="../../../../articles/b/s/p/Legacy%7EBSP_220f.html" title="Legacy:BSP">BSP</a> surfaces occlude everything: that is, they hide anything that is behind them when rendering, be it BSP geometry or meshes. This behaviour was no longer feasible with UT2003's much higher <a href="../../../../articles/p/o/l/Legacy%7EPolycount_c81c.html" title="Legacy:Polycount">polycounts</a>, so now BSP surfaces no longer hide meshes. They <i>appear</i> to hide meshes from the player's point of view, but in fact this is just due to over-drawing by the graphics card. Type "RMODE 1" into the Console to see what is really happening (see <a href="../../../../articles/c/o/n/Legacy%7EConsole_Commands_af01.html" title="Legacy:Console Commands">Console Commands</a> for more information). Everything within the current zone is being rendered.</p>
<p>Control over occlusion is now placed in the hands of the mapper. This is where <a href="../../../../articles/a/n/t/Legacy%7EAntiportal_c9ef.html" title="Legacy:Antiportal">Antiportals</a> come in: they are planes that block the rendering.</p>
<div class="center">
<div class="floatnone"><span><a href="../../../../articles/l/e/g/Image%7ELegacy_antiportal-occlusion-diagram.png_8ec3.html" class="image" title="Changes in occlusion behsaviour: in UT2003, an antiportal is needed to hide surfaces from the player"><img alt="Changes in occlusion behsaviour: in UT2003, an antiportal is needed to hide surfaces from the player" src="../../../../images/Legacy_antiportal-occlusion-diagram.png" width="400" height="170" border="0" /></a></span></div>
</div>
<p><a name="Zone_Portal_visibility" id="Zone_Portal_visibility"></a></p>
<h2><span class="mw-headline">Zone Portal visibility</span></h2>
<p>Zone portals are now nearly always visible in a particular zone. The ZP might be round a corner, but since BSP doesn't occlude, it counts as visible. It's rendered, and so the zone visible through is rendered, <i>even though you can see none of this onscreen</i>.</p>
<p><b>SuicideMissions{CLR}:</b> The Zone portal information in this page contradicts with the information on the <a href="../../../../articles/m/a/p/Legacy%7EMap_Optimization_c3b2.html" title="Legacy:Map Optimization">Map Optimization</a> page. At issue is whether or not the engine actually traces vectors from the viewer's camera to the objects beyond a zone portal OR alternatively, renders EVERYTHING in a zone beyond the zone portal. It is unlikely that it is this latter option (which this page claims!) because that would lead to serious programmatic contradictions!!! If the next zone is fully rendered, then so will its zone portals to yet another zone, and so on, and soon, ALL connected zones would be rendered, "rendering" Zoning useless! (excuse the pun). We would have a zoning meltdown!</p>
<p>Furthermore, if we assume that Antiportals work in a similar fashion to portals (except that they have the opposite effect: occlude vs. un-occlude) then zone portals definitely take into account the vectors from a player's camera, so this page is almost certainly wrong, and should be fixed to match the information on the <a href="../../../../articles/m/a/p/Legacy%7EMap_Optimization_c3b2.html" title="Legacy:Map Optimization">Map Optimization</a> page. The rays from a viewer's eyes THROUGH zone portals (not the sheer visibility of the zone portal itself) determine visibility of polygons in the next zone.</p>
<p><a name="stuff_to_be_merged_from_the_other_page" id="stuff_to_be_merged_from_the_other_page"></a></p>
<h3><span class="mw-headline">stuff to be merged from the other page</span></h3>
<p>Some History</p>
<p><i>This section to be moved &amp; incorporated into <strong class="selflink">Occlusion Changes For UnrealEngine2</strong></i></p>
<p>In <a href="../../../../articles/u/t/_/Legacy%7EUT_9cbd.html" class="mw-redirect" title="Legacy:UT">UT</a>, level optimization was primarily about keeping the number of visible polygons to a sensible number (150 polygons was considered about the most you wanted in view in the beginning, although most PCs will handle 400 with ease these days). In addition the number of visible objects (or meshes) needed to be kept to a minimum.</p>
<p><a href="../../../../articles/b/s/p/Legacy%7EBSP_220f.html" title="Legacy:BSP">BSP</a> geometry (the only kind available in <a href="../../../../articles/u/t/_/Legacy%7EUT_9cbd.html" class="mw-redirect" title="Legacy:UT">UT</a>) automatically occluded things behind it. The tools available for ensuring good map performance were <a href="../../../../articles/z/o/n/Legacy%7EZoning_64c1.html" title="Legacy:Zoning">Zoning</a>, the simplification of comlpex areas of geometry, and hiding as much BSP geometry and meshes behind other BSP geometry.</p>
<p><a name="A_Change_in_Occlusion_Behaviour" id="A_Change_in_Occlusion_Behaviour"></a></p>
<h3><span class="mw-headline">A Change in Occlusion Behaviour</span></h3>
<p>BSP before UT2003 occluded BSP (as well as meshes), and the calculations for that were mostly done at map-build time by making a data structure (tree). This is a data-structure approach as opposed to an algorithmic approach, and was the entire point of BSP. The main algorithmic aspect of BSP occlusion is comparing the players location against the nodes of the tree at runtime, which is relatively cheap compared to most other occlusion algorithms, and the reason for using BSP. But Epic decided to make BSP no longer occludes BSP or meshes at all, leaving the occlusion up to the mapmaker.</p>
<p>Today, there are 3 methods for occlusion, and you can use all of them:</p>
<p>1) Use <a href="../../../../articles/b/s/p/Legacy%7EBSP_220f.html" title="Legacy:BSP">BSP</a> mildly. It is best for floors, simply-shaped walls, large chunks of simply-shaped buildings, and so forth. BSP polygons do NOT occlude other BSP polygons, despite that the whole point of the BSP algorithm is that. BSP vertices can not be cached in the video card and instanced. Futhermore, BSP polygons are more slowly rendered than static mesh polygons.</p>
<p>2) Use <a href="../../../../articles/z/o/n/Legacy%7EZone_e5b7.html" title="Legacy:Zone">Zones</a> as much as they make sense. But do not try to zone areas that do not obviously look like zones, e.g. do not zone two open adjacent areas since you will *worsen* the efficiency of occlusion processing. Keep in mind that adjacent zones will occlude each others' meshes *except* for those meshes which can "seen" by the client through a zone portal.</p>
<p>3) Use <a href="../../../../articles/a/n/t/Legacy%7EAntiportal_c9ef.html" title="Legacy:Antiportal">Antiportals</a> where zoning can not be used. Use them generously in outdoors areas.</p>
<p>4) Player fustrum. This is basically the "line of sight" of the player, except of course that it is not a line, but rather a "fustrum " (perspective). Whatever is not in the players 180* fustrum, is occluded.</p>
<p><a name="Related_Topics" id="Related_Topics"></a></p>
<h2><span class="mw-headline">Related Topics</span></h2>
<ul>
<li><a href="../../../../articles/m/a/p/Legacy%7EMap_Optimization_c3b2.html" title="Legacy:Map Optimization">Map Optimization</a></li>
</ul>

<!-- 
NewPP limit report
Preprocessor node count: 7/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
#ifexist count: 0/100
-->
<div class="printfooter">
</div>
	    	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-legacy"
	       class="selected"	       ><a href="../../../../articles/o/c/c/Legacy%7EOcclusion_Changes_For_UnrealEngine2_9878.html">Legacy</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../../articles/o/c/c/Legacy_talk%7EOcclusion_Changes_For_UnrealEngine2_5ea1.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://wiki.beyondunreal.com/Legacy:Occlusion_Changes_For_UnrealEngine2">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../../misc/uewiki.png);"
	    href="../../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-mainpage"><a href="../../../../index.html">Main Page</a></li>
	     	      <li id="n-portal"><a href="../../../../articles/c/o/m/Unreal_Wiki%7ECommunity_Portal_3311.html">Community portal</a></li>
	     	      <li id="n-help"><a href="../../../../articles/c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="../../../../../COPYING.html"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt='Attribution-Noncommercial-Share Alike 3.0' /></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 12:34, 30 March 2005 by <a href="../../../../articles/t/a/r/User%7ETarquin_cdb6.html" title="User:Tarquin">tarquin</a>. Based on work by Anonymous user(s) of Unreal Wiki.</li>	  <li id="f-copyright">Licensed as <a href="../../../../articles/c/o/p/Unreal_Wiki%7ECopyrights_e561.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>	  <li id="f-about"><a href="../../../../articles/a/b/o/Unreal_Wiki%7EAbout_9ce6.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>	  <li id="f-disclaimer"><a href="../../../../articles/g/e/n/Unreal_Wiki%7EGeneral_disclaimer_a0a2.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>
