<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- headlinks removed -->
	<link rel="shortcut icon" href="../../../../misc/uewiki-favicon.png"/>
    <title>Legacy:Vehicle Weapon Changer Gun - Unreal Wiki</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../../skins/offline/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/md5.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/utf8.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/lookup.js"></script>
    <script type="text/javascript" src="../../../../articles/-/_/_/-.html"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../../articles/c/o/m/MediaWiki%7ECommon.css_d42e.html";
@import "../../../../articles/m/o/n/MediaWiki%7EMonobook.css_fb19.html";
@import "../../../../articles/-/_/_/-.html";
/*]]>*/</style>          </head>
  <body
    class="ns-100">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Legacy:Vehicle Weapon Changer Gun</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</h3>
	    <div id="contentSub"></div>
	    	    	    <!-- start content -->
	    <p>sample Submitted by {DDG}Vaptor vehicle weapon changer gun</p>
<p>Note: this works and its from what im working on</p>
<div class="hidden-block">
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="hint">&lt;/span&gt;&lt;div <span class="kw5">class</span>=<span class="st0">"hidden"</span>&gt;<span class="co1">//=============================================================================</span>
<span class="co1">// new allows to change the vehicle weapons</span>
<span class="co1">//=============================================================================</span>
<span class="kw5">class</span> mechGun <span class="kw5">extends</span> xwoeweapone;
 
<span class="co1">//Returns a sentinel belonging to the player, or a sentinel belonging to the same team if !bOnlyOwn, or any Sentinel if bAny.</span>
<span class="kw5">var</span> bot BodgedBot;
<span class="kw5">var</span> <span class="kw4">int</span> NextCheckTime, UpgradeCheckTime;
<span class="kw5">var</span> <span class="kw4">vector</span> MarkerLocations<span class="br0">[</span><span class="nu0">5</span><span class="br0">]</span>;
<span class="kw5">var</span> <span class="kw4">int</span> currentdefmode;
<span class="kw5">var</span> <span class="kw4">bool</span> bAllowUpgrades, bAllowTeamUpgrades,bdeploycars;
<span class="kw5">var</span> array&lt; class&lt;onsWeapon&gt; &gt; driverUpgradeClasses;
<span class="kw5">var</span> array&lt; class&lt;onsWeaponPawn&gt; &gt; PassengerUpgradeClasses;
<span class="kw5">var</span> array&lt;string&gt; Descriptions;
<span class="kw5">var</span><span class="br0">(</span><span class="br0">)</span> xEmitter  chargeEmitter;
<span class="kw5">var</span> Mutsentaddon myMut;
<span class="kw5">var</span> <span class="kw4">name</span> upgradebone;
<span class="kw5">var</span> <span class="kw4">float</span> upgraderange, repammo, nextgain;
<span class="kw5">var</span> class&lt;onsvehicle&gt; upgradeVehicle;
<span class="kw5">var</span> onsvehicle oldvehicle;
<span class="kw5">var</span><span class="br0">(</span><span class="br0">)</span> array&lt; class&lt;onsvehicle&gt; &gt; configvehiclelist;
<span class="kw5">var</span> onsvehicle myVehicle;
<span class="co1">//==============dynamic list for geting all weapons loaded on server======</span>
<span class="kw5">var</span> array&lt; class&lt;onsweapon&gt; &gt; vehadded;
<span class="kw5">var</span> <span class="kw6">config</span> array&lt; class&lt;onsweapon&gt; &gt; ConfigweaponList;
<span class="kw5">var</span> array&lt; class&lt;onsweaponpawn&gt; &gt; weaponpawnList;
<span class="kw5">var</span> array&lt; class&lt;onsweaponpawn&gt; &gt; ConfigweaponpawnList;
        <span class="kw4">Struct</span> AmmoDivider
        <span class="br0">{</span>
        <span class="kw5">var</span><span class="br0">(</span><span class="br0">)</span> <span class="kw4">int</span> FHP;
        <span class="kw5">var</span><span class="br0">(</span><span class="br0">)</span> <span class="kw4">int</span> FSPd;
        <span class="kw5">Var</span><span class="br0">(</span><span class="br0">)</span> <span class="kw4">int</span> fmass;
        <span class="br0">}</span>;
<span class="kw5">Var</span> Ammodivider mydiv;
 
<span class="kw1">replication</span>
<span class="br0">{</span>
    <span class="kw6">reliable</span> <span class="kw1">if</span> <span class="br0">(</span>bNetOwner &amp;&amp; bNetDirty &amp;&amp; <span class="kw8">Role</span> == <span class="kw9">ROLE_Authority</span><span class="br0">)</span>
        mydiv;
 
        <span class="kw6">reliable</span> <span class="kw1">if</span><span class="br0">(</span><span class="kw8">Role</span> == <span class="kw9">ROLE_Authority</span><span class="br0">)</span>
                oldvehicle,AddToUpgradeList,bAllowUpgrades,bAllowTeamUpgrades,vehadded,configvehiclelist,bdeploycars;
 
        <span class="kw6">unreliable</span> <span class="kw1">if</span><span class="br0">(</span><span class="kw8">Role</span> == <span class="kw9">ROLE_Authority</span><span class="br0">)</span>
                MarkerLocations,repammo,nextgain;
 
        <span class="kw6">reliable</span> <span class="kw1">if</span><span class="br0">(</span><span class="kw8">Role</span> &lt; <span class="kw9">ROLE_Authority</span><span class="br0">)</span>
                killscan, DoUpgrade, driverUpgradeClasses, myVehicle, Checkupgrades,deploycar;
 
<span class="br0">}</span>
 
<span class="kw6">simulated</span> <span class="kw5">function</span> PreBeginPlay<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
        SetTimer<span class="br0">(</span><span class="nu0">1.0</span>,<span class="kw9">true</span><span class="br0">)</span>;
 
        <span class="kw6">Super</span>.<span class="me1">PreBeginPlay</span><span class="br0">(</span><span class="br0">)</span>;
 
        NextCheckTime = <span class="kw8">Level</span>.<span class="me1">TimeSeconds</span> + <span class="nu0">1</span>;
        UpgradeCheckTime = NextCheckTime;
<span class="br0">}</span>
<span class="kw5">function</span> PostBeginPlay<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
<span class="kw5">local</span> <span class="kw4">int</span> ic;
 
        <span class="kw6">Super</span>.<span class="me1">PostBeginPlay</span><span class="br0">(</span><span class="br0">)</span>;
 
        <span class="kw1">if</span> <span class="br0">(</span>myMut == <span class="kw9">None</span><span class="br0">)</span>
        <span class="br0">{</span>
        mymut=<span class="kw5">class</span><span class="st0">'mutSentaddon'</span>.<span class="kw6">static</span>.<span class="me1">GetsentMutator</span><span class="br0">(</span><span class="kw8">Level</span>.<span class="me1">Game</span><span class="br0">)</span>;
        <span class="br0">}</span>
 
        <span class="kw1">if</span> <span class="br0">(</span>myMut != <span class="kw9">None</span><span class="br0">)</span>
        <span class="br0">{</span>
                <span class="kw1">if</span><span class="br0">(</span>mymut.<span class="me1">vehAdded</span>.<span class="kw6">length</span> &gt; vehadded.<span class="kw6">length</span><span class="br0">)</span>
                <span class="br0">{</span>
                        <span class="kw1">if</span><span class="br0">(</span>vehadded.<span class="kw6">length</span> &lt; mymut.<span class="me1">vehAdded</span>.<span class="kw6">length</span><span class="br0">)</span>
                        <span class="br0">{</span> <span class="co1">// reinforce data from client side</span>
                         vehadded.<span class="kw6">insert</span><span class="br0">(</span><span class="nu0">0</span>,mymut.<span class="me1">vehadded</span>.<span class="kw6">length</span><span class="br0">)</span>;
                                <span class="br0">}</span>
                                <span class="kw1">for</span><span class="br0">(</span>ic = <span class="nu0">0</span>; ic &lt; mymut.<span class="me1">vehAdded</span>.<span class="kw6">Length</span>; ic++<span class="br0">)</span>
                                <span class="br0">{</span>
                        vehadded<span class="br0">[</span>ic<span class="br0">]</span>=mymut.<span class="me1">Vehadded</span><span class="br0">[</span>ic<span class="br0">]</span>;
                        <span class="br0">}</span>
 
                <span class="br0">}</span>
                <span class="kw1">else</span>
                <span class="br0">{</span>
                <span class="kw7">log</span><span class="br0">(</span><span class="st0">"mutator preset parts"</span><span class="br0">)</span>;
                <span class="br0">}</span>
 
                <span class="kw1">if</span><span class="br0">(</span>mymut.<span class="me1">bdeploycars</span> || bdeploycars<span class="br0">)</span>
                <span class="br0">{</span>
                        bdeploycars=<span class="kw9">true</span>;
 
                        <span class="kw1">if</span><span class="br0">(</span>configvehiclelist.<span class="kw6">length</span> &lt; mymut.<span class="me1">configvehiclelist</span>.<span class="kw6">length</span><span class="br0">)</span>
                <span class="br0">{</span> <span class="co1">// reinforce data from client side</span>
                         configvehiclelist.<span class="kw6">insert</span><span class="br0">(</span><span class="nu0">0</span>,mymut.<span class="me1">configvehiclelist</span>.<span class="kw6">length</span><span class="br0">)</span>;
 
                                <span class="kw1">for</span><span class="br0">(</span>ic = <span class="nu0">0</span>; ic &lt; mymut.<span class="me1">configvehiclelist</span>.<span class="kw6">Length</span>; ic++<span class="br0">)</span>
                                <span class="br0">{</span>
                                configvehiclelist<span class="br0">[</span>ic<span class="br0">]</span>=mymut.<span class="me1">configvehiclelist</span><span class="br0">[</span>ic<span class="br0">]</span>;
 
                                <span class="br0">}</span>
 
                        <span class="br0">}</span>
 
                <span class="br0">}</span>
        <span class="br0">}</span>
        <span class="kw1">else</span>
        <span class="br0">{</span>
    <span class="kw7">log</span><span class="br0">(</span><span class="st0">"vehicle gun error no parts"</span><span class="br0">)</span>;
        <span class="br0">}</span>
 
        <span class="kw1">if</span><span class="br0">(</span><span class="br0">(</span><span class="kw8">Role</span> &lt; <span class="kw9">ROLE_Authority</span><span class="br0">)</span> &amp;&amp; <span class="br0">(</span>vehAdded.<span class="kw6">length</span> &gt; <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span>
                LoadUpgrades<span class="br0">(</span><span class="br0">)</span>;
 
<span class="br0">}</span>
 
<span class="kw5">function</span> Checkupgrades<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
<span class="kw5">local</span> <span class="kw4">int</span> ic;
 
<span class="kw1">if</span> <span class="br0">(</span>myMut == <span class="kw9">None</span><span class="br0">)</span>
<span class="br0">{</span>
mymut=<span class="kw5">class</span><span class="st0">'mutSentaddon'</span>.<span class="kw6">static</span>.<span class="me1">GetsentMutator</span><span class="br0">(</span><span class="kw8">Level</span>.<span class="me1">Game</span><span class="br0">)</span>;
<span class="br0">}</span>
 
        <span class="kw1">if</span> <span class="br0">(</span>myMut != <span class="kw9">None</span><span class="br0">)</span>
        <span class="br0">{</span>
         <span class="kw1">if</span><span class="br0">(</span>mymut.<span class="me1">vehAdded</span>.<span class="kw6">length</span> &gt; vehadded.<span class="kw6">length</span><span class="br0">)</span>
         <span class="br0">{</span>
                 <span class="kw1">if</span><span class="br0">(</span>vehadded.<span class="kw6">length</span> &lt; mymut.<span class="me1">vehAdded</span>.<span class="kw6">length</span><span class="br0">)</span>
                 <span class="br0">{</span> <span class="co1">// reinforce data from client side</span>
                 vehadded.<span class="kw6">insert</span><span class="br0">(</span><span class="nu0">0</span>,mymut.<span class="me1">vehadded</span>.<span class="kw6">length</span><span class="br0">)</span>;
                 <span class="br0">}</span>
                <span class="kw1">for</span><span class="br0">(</span>ic = <span class="nu0">0</span>; ic &lt; mymut.<span class="me1">vehAdded</span>.<span class="kw6">Length</span>; ic++<span class="br0">)</span>
                <span class="br0">{</span>
                vehadded<span class="br0">[</span>ic<span class="br0">]</span>=mymut.<span class="me1">Vehadded</span><span class="br0">[</span>ic<span class="br0">]</span>;
                <span class="br0">}</span>
         <span class="br0">}</span>
        <span class="kw1">if</span><span class="br0">(</span>mymut.<span class="me1">bdeploycars</span> || bdeploycars<span class="br0">)</span>
        <span class="br0">{</span>
        bdeploycars=<span class="kw9">true</span>;
        <span class="br0">}</span>
                        <span class="kw1">if</span><span class="br0">(</span>configvehiclelist.<span class="kw6">length</span> &lt; mymut.<span class="me1">configvehiclelist</span>.<span class="kw6">length</span><span class="br0">)</span>
                        <span class="br0">{</span> <span class="co1">// reinforce data from client side</span>
                         configvehiclelist.<span class="kw6">insert</span><span class="br0">(</span><span class="nu0">0</span>,mymut.<span class="me1">configvehiclelist</span>.<span class="kw6">length</span><span class="br0">)</span>;
 
                                <span class="kw1">for</span><span class="br0">(</span>ic = <span class="nu0">0</span>; ic &lt; mymut.<span class="me1">configvehiclelist</span>.<span class="kw6">Length</span>; ic++<span class="br0">)</span>
                                <span class="br0">{</span>
                                configvehiclelist<span class="br0">[</span>ic<span class="br0">]</span>=mymut.<span class="me1">configvehiclelist</span><span class="br0">[</span>ic<span class="br0">]</span>;
                                <span class="br0">}</span>
                        <span class="br0">}</span>
 
        <span class="kw1">else</span>
        <span class="br0">{</span>
        <span class="kw7">log</span><span class="br0">(</span><span class="st0">"vehicle gun error no parts"</span><span class="br0">)</span>;
        <span class="br0">}</span>
 
 <span class="br0">}</span>
<span class="br0">}</span>
<span class="kw5">function</span> GiveTo<span class="br0">(</span><a href="/Pawn"><span class="kw10">Pawn</span></a> Other, <span class="kw6">optional</span> Pickup Pickup<span class="br0">)</span>
<span class="br0">{</span>
        <span class="kw6">Super</span>.<span class="me1">GiveTo</span><span class="br0">(</span>Other, Pickup<span class="br0">)</span>;
 
        <span class="kw1">if</span><span class="br0">(</span><span class="kw8">Role</span> == <span class="kw9">ROLE_Authority</span> &amp;&amp; Instigator != <span class="kw9">None</span> &amp;&amp; Instigator.<span class="me1">Controller</span>.<span class="kw7">IsA</span><span class="br0">(</span><span class="st0">'Bot'</span><span class="br0">)</span><span class="br0">)</span>
        <span class="br0">{</span>
                NextCheckTime = <span class="kw8">Level</span>.<span class="me1">TimeSeconds</span> + <span class="nu0">5</span>; <span class="co1">//Never deploy right away.</span>
                BodgedBot = Bot<span class="br0">(</span>Instigator.<span class="me1">Controller</span><span class="br0">)</span>;
        <span class="br0">}</span>
<span class="br0">}</span>
<span class="kw6">simulated</span> <span class="kw5">function</span> onsvehicle SentinelInRange<span class="br0">(</span><span class="kw4">float</span> <span class="kw4">Range</span>, <span class="kw4">bool</span> bOnlyOwn, <span class="kw6">optional</span> <span class="kw4">bool</span> bAny<span class="br0">)</span>
<span class="br0">{</span>
        <span class="kw5">local</span> <span class="kw4">Vector</span> HitLocation, HitNormal;
        <span class="kw5">local</span> <a href="/Actor"><span class="kw10">Actor</span></a> A;
        <span class="kw5">local</span> <span class="kw4">Vector</span> X, Y, Z;
 
        <span class="kw5">local</span> <span class="kw4">bool</span> bSameTeam;
 
        GetViewAxes<span class="br0">(</span>X, Y, Z<span class="br0">)</span>;
        <span class="kw1">foreach</span> TraceActors<span class="br0">(</span><span class="kw5">class</span><span class="st0">'Actor'</span>, A, HitLocation, HitNormal, Instigator.<span class="me1">Location</span> + X * <span class="kw4">Range</span>, Instigator.<span class="me1">Location</span><span class="br0">)</span>
        <span class="br0">{</span>
                <span class="kw1">if</span><span class="br0">(</span>A == <span class="kw9">None</span><span class="br0">)</span>
                        <span class="kw1">continue</span>;
 
                <span class="kw1">if</span><span class="br0">(</span>A.<span class="me1">bWorldGeometry</span><span class="br0">)</span>
                        <span class="kw1">return</span> <span class="kw9">None</span>;
 
                <span class="kw1">if</span><span class="br0">(</span>A.<span class="kw7">IsA</span><span class="br0">(</span><span class="st0">'onsvehicle'</span><span class="br0">)</span><span class="br0">)</span>
                <span class="br0">{</span>
                        <span class="kw1">return</span> onsvehicle<span class="br0">(</span>A<span class="br0">)</span>;
                <span class="br0">}</span>
        <span class="br0">}</span>
 
        <span class="kw1">return</span> <span class="kw9">None</span>;
<span class="br0">}</span>
 
<span class="kw6">simulated</span> <span class="kw5">function</span> <span class="kw4">bool</span> HasAmmo<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
        <span class="kw1">return</span> <span class="kw9">true</span>;
<span class="br0">}</span>
<span class="co1">//Make bots really want this.</span>
<span class="co1">//Bots should never try to wield the weapon.</span>
<span class="kw5">function</span> <span class="kw4">float</span> GetAIRating<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
        <span class="kw1">return</span> <span class="nu0">0</span>;
<span class="br0">}</span>
<span class="co1">// by vaptor we destroy the old car and eject the peeps so they don't die</span>
<span class="co1">// then we register a new old vehicle with the server</span>
<span class="co1">//Simulated Function RegisterOwner(Onsvehicle newvehicle)</span>
<span class="co1">//{</span>
<span class="co1">//}</span>
<span class="co1">//================ ok this is the hard part =========== works 100%</span>
<span class="kw6">simulated</span> <span class="kw5">function</span> setupdriverweapon<span class="br0">(</span>onsvehicle upgradervehicle, class&lt;onsweapon&gt; newWeapon ,<span class="kw4">int</span> i<span class="br0">)</span>
<span class="br0">{</span>
<span class="kw5">local</span> <span class="kw4">name</span> xb; <span class="co1">// bone</span>
<span class="kw5">local</span> <span class="kw4">bool</span> bkilled;
 
bkilled=<span class="kw9">false</span>;
 
        <span class="kw1">if</span><span class="br0">(</span>upgradervehicle.<span class="me1">Weapons</span><span class="br0">[</span>i<span class="br0">]</span> == <span class="kw9">none</span> &amp;&amp; !bkilled<span class="br0">)</span>
        <span class="br0">{</span>
        Instigator.<span class="me1">ReceiveLocalizedMessage</span><span class="br0">(</span><span class="kw5">class</span><span class="st0">'HELMessage'</span>, <span class="nu0">8</span><span class="br0">)</span>;
        <span class="kw1">return</span>; <span class="co1">// prevents it from applying to non existant slots</span>
        <span class="br0">}</span>
        <span class="kw1">if</span><span class="br0">(</span>upgradervehicle.<span class="me1">Weapons</span><span class="br0">[</span>i<span class="br0">]</span> != <span class="kw9">none</span> &amp;&amp; !bkilled<span class="br0">)</span>
        <span class="br0">{</span>
        upgradervehicle.<span class="me1">Weapons</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">destroy</span><span class="br0">(</span><span class="br0">)</span>;
        bkilled=<span class="kw9">true</span>;
        <span class="br0">}</span>
        <span class="co1">// means there was a weapon that we destroyed</span>
        <span class="kw1">if</span><span class="br0">(</span>bkilled<span class="br0">)</span>
        <span class="br0">{</span>
        XB=upgradervehicle.<span class="kw1">Default</span>.<span class="me1">DriverWeapons</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">WeaponBone</span>;
            <span class="co1">// Spawn the new Weapon</span>
            upgradervehicle.<span class="me1">Weapons</span><span class="br0">[</span>i<span class="br0">]</span> = upgradervehicle.<span class="me1">spawn</span><span class="br0">(</span>newweapon, upgradervehicle,, upgradervehicle.<span class="me1">Location</span>, rot<span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">0</span>,<span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span>;
            upgradervehicle.<span class="me1">AttachToBone</span><span class="br0">(</span>upgradervehicle.<span class="me1">Weapons</span><span class="br0">[</span>i<span class="br0">]</span>, XB<span class="br0">)</span>;
        <span class="kw1">if</span> <span class="br0">(</span>!upgradervehicle.<span class="me1">Weapons</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">bAimable</span><span class="br0">)</span>
                upgradervehicle.<span class="me1">Weapons</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">CurrentAim</span> = rot<span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">32768</span>,<span class="nu0">0</span><span class="br0">)</span>;
        <span class="br0">}</span>
 
        <span class="kw1">if</span> <span class="br0">(</span>upgradervehicle.<span class="me1">ActiveWeapon</span> &lt; upgradervehicle.<span class="me1">Weapons</span>.<span class="kw6">length</span><span class="br0">)</span>
        <span class="br0">{</span>
            upgradervehicle.<span class="me1">PitchUpLimit</span> = upgradervehicle.<span class="me1">Weapons</span><span class="br0">[</span>upgradervehicle.<span class="me1">ActiveWeapon</span><span class="br0">]</span>.<span class="me1">PitchUpLimit</span>;
            upgradervehicle.<span class="me1">PitchDownLimit</span> = upgradervehicle.<span class="me1">Weapons</span><span class="br0">[</span>upgradervehicle.<span class="me1">ActiveWeapon</span><span class="br0">]</span>.<span class="me1">PitchDownLimit</span>;
        <span class="br0">}</span>
        upgradervehicle.<span class="me1">Weapons</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">team</span>=Instigator.<span class="me1">getTeamnum</span><span class="br0">(</span><span class="br0">)</span>;
        upgradervehicle.<span class="me1">SetTeamNum</span><span class="br0">(</span>Instigator.<span class="me1">getTeamnum</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>;
        upgradervehicle.<span class="me1">TeamChanged</span><span class="br0">(</span><span class="br0">)</span>;
<span class="br0">}</span>
<span class="co1">//============== ok driver weapon setup is ready now this part gets messy ========</span>
<span class="kw6">simulated</span> <span class="kw5">function</span> setuppasweapon<span class="br0">(</span>onsvehicle upgradervehicle, class&lt;onsweapon&gt; newpaswep, <span class="kw4">int</span> i<span class="br0">)</span>
<span class="br0">{</span>
<span class="kw5">local</span> <span class="kw4">bool</span> bkilled;
 
bkilled=<span class="kw9">false</span>;
 
        <span class="kw1">if</span><span class="br0">(</span>upgradervehicle.<span class="me1">WeaponPawns</span><span class="br0">[</span>i<span class="br0">]</span> == <span class="kw9">none</span> &amp;&amp; !bkilled<span class="br0">)</span>
        <span class="br0">{</span>
        Instigator.<span class="me1">ReceiveLocalizedMessage</span><span class="br0">(</span><span class="kw5">class</span><span class="st0">'HELMessage'</span>, <span class="nu0">8</span><span class="br0">)</span>;
        <span class="kw1">return</span>; <span class="co1">// prevents it from applying to non existant slots</span>
        <span class="br0">}</span>
        <span class="kw1">if</span><span class="br0">(</span>upgradervehicle.<span class="me1">WeaponPawns</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">gun</span> != <span class="kw9">none</span> &amp;&amp; !bkilled<span class="br0">)</span>
        <span class="br0">{</span>
        upgradervehicle.<span class="me1">WeaponPawns</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">gun</span>.<span class="me1">destroy</span><span class="br0">(</span><span class="br0">)</span>;
        bkilled=<span class="kw9">true</span>;
        <span class="br0">}</span>
        <span class="co1">// Spawn the Passenger Weapons</span>
            <span class="co1">// Spawn WeaponPawn</span>
        <span class="kw1">if</span><span class="br0">(</span>bkilled<span class="br0">)</span>
        <span class="br0">{</span>
            upgradervehicle.<span class="me1">WeaponPawns</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">gun</span> = upgradervehicle.<span class="me1">WeaponPawns</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">spawn</span><span class="br0">(</span>newpaswep,upgradervehicle.<span class="me1">WeaponPawns</span><span class="br0">[</span>i<span class="br0">]</span>,,upgradervehicle.<span class="me1">WeaponPawns</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">Location</span><span class="br0">)</span>;
            upgradervehicle.<span class="me1">WeaponPawns</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">AttachToVehicle</span><span class="br0">(</span>upgradervehicle,upgradervehicle.<span class="me1">PassengerWeapons</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">WeaponBone</span><span class="br0">)</span>;
            upgradervehicle.<span class="me1">WeaponPawns</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">ObjectiveGetOutDist</span> = upgradervehicle.<span class="me1">ObjectiveGetOutDist</span>;
        <span class="br0">}</span>
        upgradervehicle.<span class="me1">WeaponPawns</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">gun</span>.<span class="me1">team</span>=Instigator.<span class="me1">getTeamnum</span><span class="br0">(</span><span class="br0">)</span>;
        upgradervehicle.<span class="me1">SetTeamNum</span><span class="br0">(</span>Instigator.<span class="me1">getTeamnum</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>;
        upgradervehicle.<span class="me1">TeamChanged</span><span class="br0">(</span><span class="br0">)</span>;
<span class="br0">}</span>
<span class="co1">//Change ammo icon do indicate which type of Sentinel may be spawned.</span>
<span class="kw6">simulated</span> <span class="kw5">event</span> WeaponTick<span class="br0">(</span><span class="kw4">float</span> dt<span class="br0">)</span>
<span class="br0">{</span>
        <span class="kw5">local</span> <span class="kw4">int</span> ViewPitch;
        <span class="kw5">local</span> class&lt;Ammunition&gt; A;
 
        ViewPitch = Instigator.<span class="me1">GetViewRotation</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">Pitch</span>;
 
        <span class="kw1">if</span><span class="br0">(</span><span class="kw8">level</span>.<span class="me1">timeseconds</span> &gt; nextgain<span class="br0">)</span>
        <span class="br0">{</span>
        <span class="kw1">if</span><span class="br0">(</span>repammo &lt; <span class="nu0">4</span><span class="br0">)</span>
                RepAmmo+=<span class="nu0">1</span>;
 
        nextGain=<span class="kw8">level</span>.<span class="me1">timeseconds</span><span class="nu0">+2</span>;
        <span class="br0">}</span>
 
        A = GetAmmoClass<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span>;
 
        <span class="kw1">if</span><span class="br0">(</span>A != <span class="kw9">None</span><span class="br0">)</span>
        <span class="br0">{</span>
                <span class="kw1">if</span><span class="br0">(</span>ViewPitch &gt; <span class="nu0">1124</span> &amp;&amp; ViewPitch &lt; <span class="nu0">31744</span><span class="br0">)</span>
                <span class="br0">{</span>
                        A.<span class="kw1">Default</span>.<span class="me1">IconMaterial</span>=Finalblend<span class="st0">'ammoslothel'</span>;
                        A.<span class="kw1">Default</span>.<span class="me1">IconCoords</span>.<span class="me1">X1</span> = <span class="nu0">32</span>;
                        A.<span class="kw1">Default</span>.<span class="me1">IconCoords</span>.<span class="me1">Y1</span> = <span class="nu0">32</span>;
                        A.<span class="kw1">Default</span>.<span class="me1">IconCoords</span>.<span class="me1">X2</span> = <span class="nu0">96</span>;
                        A.<span class="kw1">Default</span>.<span class="me1">IconCoords</span>.<span class="me1">Y2</span> = <span class="nu0">96</span>;
                <span class="br0">}</span>
                <span class="kw1">else</span>
                <span class="br0">{</span>
                        A.<span class="kw1">Default</span>.<span class="me1">IconMaterial</span>=FinalBlend<span class="st0">'ammoslotsentNO'</span>;
                        A.<span class="kw1">Default</span>.<span class="me1">IconCoords</span>.<span class="me1">X1</span> = <span class="nu0">0</span>;
                        A.<span class="kw1">Default</span>.<span class="me1">IconCoords</span>.<span class="me1">y1</span> = <span class="nu0">0</span>;
                        A.<span class="kw1">Default</span>.<span class="me1">IconCoords</span>.<span class="me1">x2</span> = <span class="nu0">64</span>;
                        A.<span class="kw1">Default</span>.<span class="me1">IconCoords</span>.<span class="me1">y2</span> = <span class="nu0">64</span>;
                <span class="br0">}</span>
        <span class="br0">}</span>
 
<span class="br0">}</span>
<span class="kw6">simulated</span> <span class="kw5">function</span> PostnetBeginPlay<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
        <span class="kw6">Super</span>.<span class="me1">PostBeginPlay</span><span class="br0">(</span><span class="br0">)</span>;
 
        <span class="kw1">if</span><span class="br0">(</span><span class="kw8">Role</span> == <span class="kw9">ROLE_Authority</span><span class="br0">)</span>
                LoadUpgrades<span class="br0">(</span><span class="br0">)</span>;
<span class="br0">}</span>
<span class="kw6">simulated</span> <span class="kw5">Function</span> Loadupgrades<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
<span class="kw5">local</span> <span class="kw4">int</span> ic;
          <span class="kw1">if</span><span class="br0">(</span>vehadded.<span class="kw6">length</span> &gt; driverUpgradeClasses.<span class="kw6">length</span><span class="br0">)</span>
         <span class="br0">{</span> <span class="co1">// reinforce data from client side</span>
         driverUpgradeClasses.<span class="kw6">insert</span><span class="br0">(</span><span class="nu0">0</span>,vehadded.<span class="kw6">length</span><span class="br0">)</span>;
                        <span class="kw1">for</span><span class="br0">(</span>ic = <span class="nu0">0</span>; ic &lt; vehAdded.<span class="kw6">Length</span>; ic++<span class="br0">)</span>
                        <span class="br0">{</span>
                        AddToUpgradeList<span class="br0">(</span>ic,vehadded<span class="br0">[</span>ic<span class="br0">]</span><span class="br0">)</span>;
                        <span class="br0">}</span>
        <span class="br0">}</span>
<span class="br0">}</span>
<span class="kw6">simulated</span> <span class="kw5">function</span> DoUpgrade<span class="br0">(</span> <span class="kw4">int</span> i, <span class="kw6">optional</span> class&lt;onsweapon&gt; driveUpgrade, <span class="kw6">optional</span> class&lt;onsweapon&gt; pasUpgrade<span class="br0">)</span>
<span class="br0">{</span>
<span class="kw5">local</span> onsvehicle SentinelToUpgrade;
        <span class="kw1">if</span><span class="br0">(</span>!bAllowUpgrades<span class="br0">)</span>
        <span class="br0">{</span>
                <span class="kw7">warn</span><span class="br0">(</span><span class="st0">"Tried to add an upgrade but they are disabled."</span><span class="br0">)</span>;
                <span class="kw1">return</span>;
        <span class="br0">}</span>
        <span class="kw1">if</span><span class="br0">(</span>DriveUpgrade == <span class="kw9">None</span> &amp;&amp; pasupgrade == <span class="kw9">none</span><span class="br0">)</span>
        <span class="br0">{</span>
                <span class="kw7">warn</span><span class="br0">(</span><span class="st0">"Tried to add an upgrade that doesn't exist."</span><span class="br0">)</span>;
                <span class="kw1">return</span>;
        <span class="br0">}</span>
        SentinelToUpgrade = SentinelInRange<span class="br0">(</span><span class="kw5">class</span><span class="st0">'mechFire'</span>.<span class="kw1">Default</span>.<span class="me1">UpgradeRange</span>, <span class="kw9">true</span><span class="br0">)</span>;
        <span class="kw1">if</span><span class="br0">(</span>SentinelToUpgrade == <span class="kw9">None</span><span class="br0">)</span>
        <span class="br0">{</span>
                Instigator.<span class="me1">ReceiveLocalizedMessage</span><span class="br0">(</span><span class="kw5">class</span><span class="st0">'HELMessage'</span>, <span class="nu0">9</span><span class="br0">)</span>;
                <span class="kw1">return</span>;
        <span class="br0">}</span>
        <span class="kw1">if</span><span class="br0">(</span>AmmoAmount<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span> &lt; <span class="nu0">20</span><span class="br0">)</span>
        <span class="br0">{</span>
                Instigator.<span class="me1">ReceiveLocalizedMessage</span><span class="br0">(</span><span class="kw5">class</span><span class="st0">'HELMessage'</span>, <span class="nu0">8</span><span class="br0">)</span>;
                <span class="kw1">return</span>;
        <span class="br0">}</span>
        <span class="kw1">if</span><span class="br0">(</span>driveupgrade == <span class="kw5">class</span><span class="st0">'onslinkableweapon'</span> || pasupgrade == <span class="kw5">class</span><span class="st0">'onslinkableweapon'</span> <span class="br0">)</span>
        <span class="br0">{</span>
        <span class="kw1">return</span>;
        <span class="br0">}</span>
 
        <span class="kw1">if</span><span class="br0">(</span>driveupgrade != <span class="kw9">none</span><span class="br0">)</span>
        <span class="br0">{</span>
                <span class="kw1">if</span><span class="br0">(</span>AmmoAmount<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span> &gt; <span class="nu0">20</span><span class="br0">)</span>
                <span class="br0">{</span>
                setupdriverweapon<span class="br0">(</span>SentinelToUpgrade,driveUpgrade,I<span class="br0">)</span>;
                ConsumeAmmo<span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">20</span><span class="br0">)</span>;
                <span class="br0">}</span>
        <span class="br0">}</span>
        <span class="kw1">else</span>
        <span class="br0">{</span>
            <span class="kw1">if</span><span class="br0">(</span>AmmoAmount<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span> &gt; <span class="nu0">20</span><span class="br0">)</span>
                <span class="br0">{</span>
                setuppasweapon<span class="br0">(</span>SentinelToUpgrade,pasUpgrade,I<span class="br0">)</span>;
                ConsumeAmmo<span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">20</span><span class="br0">)</span>;
                <span class="br0">}</span>
        <span class="br0">}</span>
<span class="br0">}</span>
<span class="kw5">function</span> <span class="kw8">Tick</span><span class="br0">(</span><span class="kw4">float</span> DeltaTime<span class="br0">)</span>
<span class="br0">{</span>
        <span class="kw5">local</span> <span class="kw4">name</span> BotState, BotOrders;
 
        <span class="kw1">if</span><span class="br0">(</span><span class="kw8">Level</span>.<span class="me1">TimeSeconds</span> &gt;= UpgradeCheckTime<span class="br0">)</span>
        <span class="br0">{</span>
                UpgradeCheckTime = <span class="kw8">Level</span>.<span class="me1">TimeSeconds</span> + <span class="nu0">1</span>;
                mechFire<span class="br0">(</span>FireMode<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span>.<span class="me1">DoStuffe</span><span class="br0">(</span><span class="br0">)</span>;
        <span class="br0">}</span>
        <span class="kw1">if</span><span class="br0">(</span>BodgedBot == <span class="kw9">None</span> || <span class="kw8">Level</span>.<span class="me1">Game</span>.<span class="me1">bGameEnded</span><span class="br0">)</span>
                <span class="kw1">return</span>;
        <span class="kw1">if</span><span class="br0">(</span><span class="kw8">Level</span>.<span class="me1">TimeSeconds</span> &gt;= NextCheckTime &amp;&amp; VSize<span class="br0">(</span>Instigator.<span class="me1">Velocity</span><span class="br0">)</span> &lt; <span class="nu0">1</span><span class="br0">)</span>
        <span class="br0">{</span>
        NextCheckTime = <span class="kw8">Level</span>.<span class="me1">TimeSeconds</span> + <span class="nu0">1</span>;
        <span class="br0">}</span>
<span class="br0">}</span>
<span class="kw6">simulated</span> <span class="kw5">Function</span> DeployCar<span class="br0">(</span>class&lt;onsvehicle&gt; Type, <span class="kw4">int</span> RequiredAmmo <span class="br0">)</span>
<span class="br0">{</span>
<span class="kw5">local</span> <span class="kw4">int</span> AmmoConsume;
<span class="kw5">local</span> <span class="kw4">int</span> zx;
<span class="kw5">local</span> <span class="kw4">Vector</span> X, Y, Z;
<span class="kw5">local</span> <span class="kw4">Vector</span> DeployLocation;
 
<span class="kw1">if</span> <span class="br0">(</span> !<span class="kw8">Level</span>.<span class="me1">Game</span>.<span class="me1">bAllowVehicles</span><span class="br0">)</span>
<span class="br0">{</span>
<span class="kw8">Level</span>.<span class="me1">Game</span>.<span class="me1">bAllowVehicles</span>=<span class="kw9">true</span>; 
<span class="br0">}</span>
 
GetViewAxes<span class="br0">(</span>X, Y, Z<span class="br0">)</span>;
<span class="kw1">if</span><span class="br0">(</span>requiredammo &gt; <span class="nu0">200</span><span class="br0">)</span>
<span class="br0">{</span>
requiredammo=<span class="nu0">150</span>;
<span class="br0">}</span>
<span class="kw1">if</span><span class="br0">(</span>killscan<span class="br0">(</span>type.<span class="kw1">default</span>.<span class="me1">CollisionRadius</span><span class="br0">)</span> &amp;&amp; AmmoAmount<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span> &gt;= RequiredAmmo<span class="br0">)</span>
<span class="br0">{</span>
 
 <span class="kw1">IF</span><span class="br0">(</span>oldVehicle != <span class="kw9">none</span><span class="br0">)</span>
 <span class="br0">{</span>
        <span class="kw1">if</span><span class="br0">(</span>oldvehicle.<span class="me1">Driver</span> != <span class="kw9">none</span><span class="br0">)</span>
        <span class="br0">{</span>
        oldVehicle.<span class="me1">EjectDriver</span><span class="br0">(</span><span class="br0">)</span>;
 
                <span class="kw1">if</span><span class="br0">(</span>oldvehicle.<span class="me1">weaponpawns</span>.<span class="kw6">length</span> &gt; <span class="nu0">0</span><span class="br0">)</span>
                <span class="br0">{</span>
                        <span class="kw1">for</span> <span class="br0">(</span>zx = <span class="nu0">0</span>; zx &lt; oldvehicle.<span class="me1">WeaponPawns</span>.<span class="kw6">length</span>; zx++<span class="br0">)</span>
                        <span class="br0">{</span>
                        oldvehicle.<span class="me1">WeaponPawns</span><span class="br0">[</span>zx<span class="br0">]</span>.<span class="me1">EjectDriver</span><span class="br0">(</span><span class="br0">)</span>;
                        oldvehicle.<span class="me1">WeaponPawns</span><span class="br0">[</span>zx<span class="br0">]</span>.<span class="me1">Died</span><span class="br0">(</span><span class="kw9">None</span>, <span class="kw5">class</span><span class="st0">'DamageType'</span>, oldvehicle.<span class="me1">Location</span><span class="br0">)</span>;
                        <span class="br0">}</span>
                oldvehicle.<span class="me1">WeaponPawns</span>.<span class="kw6">length</span> = <span class="nu0">0</span>;
                <span class="br0">}</span>
 
        oldvehicle.<span class="me1">Died</span><span class="br0">(</span><span class="kw9">None</span>, <span class="kw5">class</span><span class="st0">'DamageType'</span>, oldvehicle.<span class="me1">Location</span><span class="br0">)</span>;
        oldVehicle=<span class="kw9">none</span>;
        <span class="br0">}</span>
 
 <span class="br0">}</span>
 
 <span class="kw1">if</span><span class="br0">(</span>oldvehicle == <span class="kw9">none</span><span class="br0">)</span><span class="co1">//seems to work but won't spawn</span>
 <span class="br0">{</span>
 DeployLocation = Instigator.<span class="me1">Location</span> + <span class="br0">(</span>X * <span class="br0">(</span><span class="nu0">20.0</span> + type.<span class="kw1">default</span>.<span class="me1">CollisionRadius</span><span class="br0">)</span><span class="br0">)</span> + <span class="br0">(</span>z * type.<span class="kw1">default</span>.<span class="me1">collisionheight</span><span class="br0">)</span>;
 OldVehicle= Spawn<span class="br0">(</span>type,,, DeployLocation, rot<span class="br0">(</span><span class="nu0">0</span>, <span class="nu0">-16384</span>, <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span>;
 ConsumeAmmo<span class="br0">(</span><span class="nu0">0</span>,RequiredAmmo<span class="br0">)</span>;
 <span class="br0">}</span>
<span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw6">simulated</span> <span class="kw5">function</span> NewDrawWeaponInfo<span class="br0">(</span>Canvas Canvas, <span class="kw4">float</span> YPos<span class="br0">)</span>
<span class="br0">{</span>
        <span class="kw5">local</span> PlayerController PC;
 
        PC = PlayerController<span class="br0">(</span>Instigator.<span class="me1">Controller</span><span class="br0">)</span>;
 
        <span class="kw1">if</span><span class="br0">(</span>PC == <span class="kw9">None</span><span class="br0">)</span>
                <span class="kw1">return</span>;
 
        HudBase<span class="br0">(</span>PC.<span class="me1">myHUD</span><span class="br0">)</span>.<span class="me1">TargetMaterial</span> = finalblend<span class="st0">'Targetcores'</span>;
 
        HudBase<span class="br0">(</span>PC.<span class="me1">myHUD</span><span class="br0">)</span>.<span class="me1">TargetMaterial</span> = HudBase<span class="br0">(</span>PC.<span class="me1">myHUD</span><span class="br0">)</span>.<span class="kw1">Default</span>.<span class="me1">TargetMaterial</span>;
<span class="br0">}</span>
<span class="co1">//=============================================================================</span>
<span class="co1">// Utility functions:</span>
<span class="co1">//=============================================================================</span>
<span class="co1">//Upgrades are replicated to clients here.</span>
<span class="kw6">simulated</span> <span class="kw5">function</span> AddToUpgradeList<span class="br0">(</span><span class="kw4">int</span> i, class&lt;onsweapon&gt; NextDriverClass<span class="br0">)</span>
<span class="br0">{</span>
        <span class="kw1">if</span><span class="br0">(</span>nextDriverClass != <span class="kw9">none</span><span class="br0">)</span>
                driverUpgradeClasses<span class="br0">[</span>i<span class="br0">]</span> = NextDriverClass; <span class="co1">// found a way to make it only need this data!</span>
<span class="br0">}</span>
<span class="kw6">static</span> <span class="kw5">function</span> <span class="kw4">int</span> GetCost<span class="br0">(</span>class&lt;onsvehicle&gt; vehiclewanted,<span class="kw4">int</span> total<span class="br0">)</span>
<span class="br0">{</span>
<span class="kw5">local</span> <span class="kw4">int</span> totalother;
<span class="kw5">local</span> <span class="kw4">float</span> divspd;
 
<span class="co1">// use percentage logic crud this may be too much math</span>
<span class="kw1">if</span><span class="br0">(</span>vehiclewanted != <span class="kw9">none</span><span class="br0">)</span>
<span class="br0">{</span>
totalother=vehiclewanted.<span class="kw1">default</span>.<span class="me1">GroundSpeed</span> + vehiclewanted.<span class="kw1">default</span>.<span class="me1">airSpeed</span> + vehiclewanted.<span class="kw1">default</span>.<span class="me1">mass</span> + vehiclewanted.<span class="kw1">default</span>.<span class="me1">health</span>;
<span class="br0">}</span>
divspd=total/<span class="nu0">200</span>; <span class="co1">// use to subtract from other values</span>
<span class="co1">//log(total);</span>
<span class="kw1">return</span><span class="br0">(</span>totalother/divspd<span class="br0">)</span>;
<span class="br0">}</span>
<span class="kw6">simulated</span> <span class="kw5">function</span> BringUp<span class="br0">(</span><span class="kw6">optional</span> Weapon PrevWeapon<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw6">Super</span>.<span class="me1">BringUp</span><span class="br0">(</span>PrevWeapon<span class="br0">)</span>;
<span class="br0">}</span>
<span class="kw6">simulated</span> <span class="kw5">function</span> <span class="kw4">bool</span> PutDown<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">if</span> <span class="br0">(</span> <span class="kw6">Super</span>.<span class="me1">PutDown</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">)</span>
    <span class="br0">{</span>
                <span class="kw7">GotoState</span><span class="br0">(</span><span class="st0">''</span><span class="br0">)</span>;
                <span class="kw1">return</span> <span class="kw9">true</span>;
        <span class="br0">}</span>
        <span class="kw1">return</span> <span class="kw9">false</span>;
<span class="br0">}</span>
 
<span class="kw5">function</span> <span class="kw4">bool</span> killscan<span class="br0">(</span><span class="kw4">int</span> radu<span class="br0">)</span> <span class="co1">// new code for telefragchecking by vaptor</span>
<span class="br0">{</span>
<span class="kw5">local</span> <span class="kw4">vector</span> checklocation,scy;
<span class="kw5">local</span> <span class="kw4">Vector</span> X, Y, Z, HitLocation, HitNormal;
<span class="kw5">local</span> <a href="/Actor"><span class="kw10">actor</span></a> victimizedactor;
 
        GetViewAxes<span class="br0">(</span>X, Y, Z<span class="br0">)</span>;
 
        checkLocation = Instigator.<span class="me1">Location</span> + X * <span class="nu0">100</span>;
        scy.<span class="me1">x</span>=radu;
        scy.<span class="me1">y</span>=radu;
        scy.<span class="me1">z</span>=<span class="nu0">16</span>;
        Victimizedactor = Trace<span class="br0">(</span>HitLocation, HitNormal, checkLocation, Instigator.<span class="me1">Location</span> , <span class="kw9">true</span>, scy<span class="br0">)</span>;
 
         <span class="co1">// set it false first</span>
 
        <span class="kw1">if</span><span class="br0">(</span>victimizedActor != <span class="kw9">none</span><span class="br0">)</span>
        <span class="br0">{</span>
         <span class="kw1">if</span><span class="br0">(</span>victimizedActor.<span class="kw7">isa</span><span class="br0">(</span><span class="st0">'Pawn'</span><span class="br0">)</span><span class="br0">)</span>
         <span class="br0">{</span>
                <span class="kw1">if</span><span class="br0">(</span><a href="/Pawn"><span class="kw10">pawn</span></a><span class="br0">(</span>victimizedActor<span class="br0">)</span> != <span class="kw9">none</span><span class="br0">)</span>
                <span class="br0">{</span>
                        <span class="kw1">if</span><span class="br0">(</span><a href="/Pawn"><span class="kw10">pawn</span></a><span class="br0">(</span>victimizedActor<span class="br0">)</span>.<span class="me1">Controller</span>.<span class="me1">SameTeamAs</span><span class="br0">(</span>Instigator.<span class="me1">Controller</span><span class="br0">)</span> <span class="br0">)</span> <span class="co1">// confirmed! stop them now!</span>
                        <span class="br0">{</span>
                                <span class="kw1">return</span> <span class="kw9">false</span>;
                        <span class="br0">}</span>
                        <span class="kw1">else</span>
                        <span class="br0">{</span>
                                <span class="kw1">return</span> <span class="kw9">true</span>;
                        <span class="br0">}</span>
                <span class="br0">}</span>
                <span class="kw1">else</span>
                <span class="br0">{</span>
                        <span class="kw1">return</span> <span class="kw9">true</span>;
                <span class="br0">}</span>
 
         <span class="br0">}</span>
 
        <span class="br0">}</span>
        <span class="kw1">return</span> <span class="kw9">true</span>;
<span class="br0">}</span>
<span class="kw1">defaultproperties</span>
<span class="br0">{</span>
     bAllowUpgrades=<span class="kw9">True</span>
     upgraderange=<span class="nu0">1200.000000</span>
     FireModeClass<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span>=<span class="kw5">Class</span><span class="st0">'sentsv12.mechFire'</span>
     FireModeClass<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span>=<span class="kw5">Class</span><span class="st0">'sentsv12.mechlaunchFire'</span>
     IdleAnim=<span class="st0">"Idle"</span>
     SelectAnim=<span class="st0">"Select"</span>
     SelectSound=<a href="/sound"><span class="kw10">Sound</span></a><span class="st0">'WeaponSounds.Misc.shieldgun_change'</span>
     SelectForce=<span class="st0">"ShieldGun_change"</span>
     AIRating=<span class="nu0">1.500000</span>
     CurrentRating=<span class="nu0">1.500000</span>
     Description=<span class="st0">"NEW weapon technology useing thinking machines to provide general support for soldiers"</span>
     EffectOffset=<span class="br0">(</span>X=<span class="nu0">70.000000</span>,Y=<span class="nu0">10.000000</span><span class="br0">)</span>
     SmallViewOffset=<span class="br0">(</span>X=<span class="nu0">23.000000</span>,Y=<span class="nu0">6.000000</span>,Z=<span class="nu0">-6.000000</span><span class="br0">)</span>
     CenteredOffsetY=<span class="nu0">-5.000000</span>
     CenteredRoll=<span class="nu0">5000</span>
     CenteredYaw=<span class="nu0">-300</span>
     CustomCrosshair=<span class="nu0">31</span>
     CustomCrossHairColor=<span class="br0">(</span>G=<span class="nu0">0</span>,R=<span class="nu0">0</span><span class="br0">)</span>
     CustomCrossHairTextureName=<span class="st0">"AS_FX_TX.Icons.OBJ_Destroy_Tex"</span>
     InventoryGroup=<span class="nu0">8</span>
     GroupOffset=<span class="nu0">158</span>
     PlayerViewOffset=<span class="br0">(</span>X=<span class="nu0">11.000000</span><span class="br0">)</span>
     BobDamping=<span class="nu0">1.575000</span>
     AttachmentClass=<span class="kw5">Class</span><span class="st0">'sentsv12.mechAttach'</span>
     IconMaterial=FinalBlend<span class="st0">'AS_FX_TX.Icons.OBJ_HellBender_FB'</span>
     IconCoords=<span class="br0">(</span>X2=<span class="nu0">64</span>,Y2=<span class="nu0">64</span><span class="br0">)</span>
     ItemName=<span class="st0">"VehicleMechanic"</span>
     Mesh=SkeletalMesh<span class="st0">'Weapons.BallLauncher_1st'</span>
     DrawScale=<span class="nu0">0.400000</span>
     Skins<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span>=Combiner<span class="st0">'sentsv12.Beams.ANGLETRAILxx'</span>
     Skins<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span>=FinalBlend<span class="st0">'sentsv12.Beams.casedvortex'</span>
     Skins<span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span>=Shader<span class="st0">'sentsv12.Beams.coilshader'</span>
<span class="br0">}</span></span>
</pre></div>
</div>
<p><a href="../../../../articles/l/e/g/Category%7ELegacy_Custom_Class_%28UT2004%29_0b8c.html" title="Category:Legacy Custom Class (UT2004)">Category:Legacy Custom Class (UT2004)</a></p>
<p><a href="../../../../articles/l/e/g/Category%7ELegacy_To_Do_47ce.html" title="Category:Legacy To Do">Category:Legacy To Do</a> what is this? the parent class doesn't show up on wiki. Delete it?</p>

<!-- 
NewPP limit report
Preprocessor node count: 10/1000000
Post-expand include size: 52/2097152 bytes
Template argument size: 0/2097152 bytes
#ifexist count: 0/100
-->
<div class="printfooter">
</div>
	    <div id="catlinks"><p class='catlinks'><a href="../../../../articles/c/a/t/Special%7ECategories_101d.html" title="Special:Categories">Categories</a>: <span dir='ltr'><a href="../../../../articles/l/e/g/Category%7ELegacy_Custom_Class_%28UT2004%29_0b8c.html" title="Category:Legacy Custom Class (UT2004)">Legacy Custom Class (UT2004)</a></span> | <span dir='ltr'><a href="../../../../articles/l/e/g/Category%7ELegacy_To_Do_47ce.html" title="Category:Legacy To Do">Legacy To Do</a></span></p></div>	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-legacy"
	       class="selected"	       ><a href="../../../../articles/v/e/h/Legacy%7EVehicle_Weapon_Changer_Gun_a076.html">Legacy</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../../articles/v/e/h/Legacy_talk%7EVehicle_Weapon_Changer_Gun_2bbe.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://wiki.beyondunreal.com/Legacy:Vehicle_Weapon_Changer_Gun">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../../misc/uewiki.png);"
	    href="../../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-mainpage"><a href="../../../../index.html">Main Page</a></li>
	     	      <li id="n-portal"><a href="../../../../articles/c/o/m/Unreal_Wiki%7ECommunity_Portal_3311.html">Community portal</a></li>
	     	      <li id="n-help"><a href="../../../../articles/c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="../../../../../COPYING.html"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt='Attribution-Noncommercial-Share Alike 3.0' /></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 22:46, 19 November 2007 by Anonymous user(s) of Unreal Wiki. </li>	  <li id="f-copyright">Licensed as <a href="../../../../articles/c/o/p/Unreal_Wiki%7ECopyrights_e561.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>	  <li id="f-about"><a href="../../../../articles/a/b/o/Unreal_Wiki%7EAbout_9ce6.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>	  <li id="f-disclaimer"><a href="../../../../articles/g/e/n/Unreal_Wiki%7EGeneral_disclaimer_a0a2.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>
