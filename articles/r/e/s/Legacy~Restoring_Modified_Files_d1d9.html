<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- headlinks removed -->
	<link rel="shortcut icon" href="../../../../misc/uewiki-favicon.png"/>
    <title>Legacy:Restoring Modified Files - Unreal Wiki</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../../skins/offline/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/md5.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/utf8.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/lookup.js"></script>
    <script type="text/javascript" src="../../../../articles/-/_/_/-.html"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../../articles/c/o/m/MediaWiki%7ECommon.css_d42e.html";
@import "../../../../articles/m/o/n/MediaWiki%7EMonobook.css_fb19.html";
@import "../../../../articles/-/_/_/-.html";
/*]]>*/</style>          </head>
  <body
    class="ns-100">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Legacy:Restoring Modified Files</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</h3>
	    <div id="contentSub"></div>
	    	    	    <!-- start content -->
	    <p>"<a href="../../../../articles/d/o/_/Legacy%7EDo_Not_Alter_Default_Packages_4b29.html" title="Legacy:Do Not Alter Default Packages">Do Not Alter Default Packages</a>" is one of the things people who are new to Unreal editing sometimes learn the hard way when they are no longer able to connect to game servers or, even worse, are kicked by cheat protection. Often the only easy way to get the game working online again is to reinstall it, but if you don't want to do that there usually is another way, which may be more complicated but usually saves a lot of time.</p>
<p>This page will describe some ways for restoring modified files.</p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#Knowing_The_Problems"><span class="tocnumber">1</span> <span class="toctext">Knowing The Problems</span></a></li>
<li class="toclevel-1"><a href="#Detecting_Damage"><span class="tocnumber">2</span> <span class="toctext">Detecting Damage</span></a></li>
<li class="toclevel-1"><a href="#Finding_The_Modified_File"><span class="tocnumber">3</span> <span class="toctext">Finding The Modified File</span></a>
<ul>
<li class="toclevel-2"><a href="#Version_Mismatch"><span class="tocnumber">3.1</span> <span class="toctext">Version Mismatch</span></a></li>
<li class="toclevel-2"><a href="#Modified_UPL_Files"><span class="tocnumber">3.2</span> <span class="toctext">Modified UPL Files</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Restoring_The_Original_File"><span class="tocnumber">4</span> <span class="toctext">Restoring The Original File</span></a>
<ul>
<li class="toclevel-2"><a href="#First_Attempt:_The_Patch"><span class="tocnumber">4.1</span> <span class="toctext">First Attempt: The Patch</span></a></li>
<li class="toclevel-2"><a href="#Second_Attempt:_Copying_From_The_Source_Disk.28s.29"><span class="tocnumber">4.2</span> <span class="toctext">Second Attempt: Copying From The Source Disk(s)</span></a>
<ul>
<li class="toclevel-3"><a href="#Know_The_Source_Disks"><span class="tocnumber">4.2.1</span> <span class="toctext">Know The Source Disks</span></a></li>
<li class="toclevel-3"><a href="#Extracting_The_Files"><span class="tocnumber">4.2.2</span> <span class="toctext">Extracting The Files</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#Related_Topics"><span class="tocnumber">5</span> <span class="toctext">Related Topics</span></a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script>
<p><a name="Knowing_The_Problems" id="Knowing_The_Problems"></a></p>
<h2><span class="mw-headline">Knowing The Problems</span></h2>
<p>There are several traps when creating new Unreal content.</p>
<p>For example it's tempting to add new textures to existing texture packages when building a map, but look at it from a practical way: How are other players supposed to get the new texture if it's inside <i>your</i> version of the package but not <i>theirs</i>? Anyway, if you really modified such a data package you can't just remove the texture and save again. The package will stay modified! You can only restore it from your game CD(s) or DVD in this case.</p>
<p>Another problem in UT200x could be the UPL files, which contain information about player models. For example <a href="../../../../articles/u/p/a/Legacy%7EUPaint_3e92.html" title="Legacy:UPaint">UPaint</a> likes to override existing characters to make sure you specify a different name as soon as possible. The game server won't mind if you modify them, but cheat protections like UTSecure, Anti TCC and SafeGame will detect modifications and call you a cheater! (You don't want that, right?)</p>
<p>Other potential problems include buggy mod installers, which accidently copy mod files over core game files or buggy mod <b>un</b>installers, which remove more than they were supposed to (Ok, developers deserve a slap for something like that, but that's nothing we want to discuss here.&#160;;)), as well as outdated patches such as the UnrealEd patches for UT2003, which should <i>only</i> be applied to the unpatched game and are obsoleted by any newer patch.</p>
<p>And finally, some people seem to be inclined to install stuff like "No CD Cracks" and the like â€“ don't do that, not only are you probably violating the EULA, but you may also break important game files.</p>
<p><a name="Detecting_Damage" id="Detecting_Damage"></a></p>
<h2><span class="mw-headline">Detecting Damage</span></h2>
<p>Sometimes modified files don't become appearant immediately.</p>
<p>Often you will notice modified packages when you connect to internet game servers. If a package required for the current game has been modified and is not dynamically loaded client-sidely, you will be disconnected with the message "Version Mismatch" and the package name. (If you get "Incompatible Game Files" instead, then it might be only a poorly coded mod that doesn't properly unload itself from memory when switching servers.)</p>
<p>If the server is running a cheat protection, it may also find other modifications such as UPL file changes. If you get disconnected from a server and get a mesage box, read it carefully. Often it tells you exactly what you need to look for.</p>
<p><a name="Finding_The_Modified_File" id="Finding_The_Modified_File"></a></p>
<h2><span class="mw-headline">Finding The Modified File</span></h2>
<p>Finding out which file is actually modified can be quite easy if you got a message with information about the problem.</p>
<p><a name="Version_Mismatch" id="Version_Mismatch"></a></p>
<h3><span class="mw-headline">Version Mismatch</span></h3>
<p>A "Version Mismatch" message usually contains a package name. This is the file name without file extension, so you will have to look in your package directories first.</p>
<p>If you aren't sure where you have to look for the files, just open your game's main INI file (UnrealTournament.ini, UT2003.ini, UT2004.ini, etc. in {<a href="../../../../articles/b/a/s/Legacy%7EBase_Directory_665f.html" title="Legacy:Base Directory">Base Directory</a>}\System) and look for the <code>[Core.System]</code> section. You will find several lines that begin with "Path=" followed by a string that represents a directory name and a file wildcard.</p>
<p>For example:</p>
<pre>
Paths=*.u
Paths=../Maps/*.ut2
Paths=../Textures/*.utx
</pre>
<p>This means the game looks for files with the extension .U in {<a href="../../../../articles/b/a/s/Legacy%7EBase_Directory_665f.html" title="Legacy:Base Directory">Base Directory</a>}\System (Paths=*.u), with the extension .UT2 in {<a href="../../../../articles/b/a/s/Legacy%7EBase_Directory_665f.html" title="Legacy:Base Directory">Base Directory</a>}\Maps and with the extension .UTX in {<a href="../../../../articles/b/a/s/Legacy%7EBase_Directory_665f.html" title="Legacy:Base Directory">Base Directory</a>}\Textures. So if you got a "Version Mismatch" for "DM-Modifier" you'd probably find the file DM-Modifier.ut2 in the Maps directory and know that it's not the same version as the server wants.</p>
<p><a name="Modified_UPL_Files" id="Modified_UPL_Files"></a></p>
<h3><span class="mw-headline">Modified UPL Files</span></h3>
<p>Some cheat protections may give you a message like "Modified Character Entry Detected". In this case you either have a modified UPL file or an additional UPL file that overrides entries in the original one.</p>
<p>Usually The game looks for them in {<a href="../../../../articles/b/a/s/Legacy%7EBase_Directory_665f.html" title="Legacy:Base Directory">Base Directory</a>}\System, but it seems UPL files can be placed somewhere else as well. You should look in your whole game directory and check every single UPL file you find, if they contain an entry for the supposedly modified character. UT2003 contains 147 and UT2004 179 uniquely named character entries and no other UPL file should use these.</p>
<p><a name="Restoring_The_Original_File" id="Restoring_The_Original_File"></a></p>
<h2><span class="mw-headline">Restoring The Original File</span></h2>
<p>Here comes the tricky part: You need to somehow find the original version of your file.</p>
<p><a name="First_Attempt:_The_Patch" id="First_Attempt:_The_Patch"></a></p>
<h3><span class="mw-headline">First Attempt: The Patch</span></h3>
<p>Modified or damaged .U, .EXE or .DLL files can usually be repaired by (re)applying the latest patch. For mod files you should simply reinstall the mod. This won't help against modified game data packages or UPL files, though.</p>
<p><a name="Second_Attempt:_Copying_From_The_Source_Disk.28s.29" id="Second_Attempt:_Copying_From_The_Source_Disk.28s.29"></a></p>
<h3><span class="mw-headline">Second Attempt: Copying From The Source Disk(s)</span></h3>
<p><a name="Know_The_Source_Disks" id="Know_The_Source_Disks"></a></p>
<h4><span class="mw-headline">Know The Source Disks</span></h4>
<dl>
<dt>UT2003&#160;</dt>
<dd>Usually the game comes on three CDs. (international version)<br />
On CD1 you will find the UPL files, the animation packages (*.ukx), the maps (*.ut2) and some textures (*.utx) and sounds. (*.uax) CD2 contains the remaining textures, static meshes (*.usx), the OGG music and localized sound packages for French. CD3 contains the localized sound packages for German, Italian and Spanish as well as a few tools.</dd>
<dt>UT2004&#160;</dt>
<dd>Usually the game comes on six CDs or one DVD, not counting the bonus DVD of the Special Edition. On the DVD there are multiple directories that correspond to the disks of the CD version.<br />
CD1 contains the UPL files, animations, maps and a few sounds. CD2 contains the remaining non-localized sounds, and some textures. CD3 contains only textures. CD4 contains the remaining textures, the static meshes and most of the OGG music. CD5 contains the remaining music and most of the localized sound packages. CD6 contains the remaining localized sound packages as well as some tools.</dd>
</dl>
<p><a name="Extracting_The_Files" id="Extracting_The_Files"></a></p>
<h4><span class="mw-headline">Extracting The Files</span></h4>
<p>UPL files can be copied as they are, but package files need to be decompressed before you can use them.</p>
<ol>
<li>Delete the modified package file.</li>
<li>Copy the compressed package file to the directory the file belongs in.</li>
<li>Decompress the file.<br />
Package files are UZ- or UZ2-compressed. Just run them through the UCC Decompress <a href="../../../../articles/c/o/m/Legacy%7ECommandlet_d39f.html" title="Legacy:Commandlet">commandlet</a> once they are in the correct directory and you are done. Here's a possible way for doing this:
<ol>
<li>Open a console window. Under Windows you would do this by selecting Start -&gt; Run... and enter "command" under Windows 98/ME in the dialog box, while under Windows 2000/XP you'd enter "cmd" there.<br />
You should now get the console window with a prompt that looks something like "<code>C:\Windows&gt;</code>" and a cursor blinking after that.</li>
<li>Change the drive to the one where your game is installed. For this example we have UT2004 installed in D:\UT2004, so type:</li>
</ol>
</li>
</ol>
<pre>
d:
</pre>
<p>The prompt should now change to "<code>D:\&gt;</code>".</p>
<ol>
<li>
<ol>
<li>Change to your game's System directory, in our example this is UT2004\System, so type:</li>
</ol>
</li>
</ol>
<pre>
cd \UT2004\System
</pre>
<p>The propt should have turned into "<code>D:\UT2004\System&gt;</code>" now.</p>
<ol>
<li>
<ol>
<li>Now you're ready to decompress the file or files you want to restore. For each file you need to type "UCC Decompress filename" now. For example if you want to restore PlayerSkins.utx in the Textures directory you'd type:</li>
</ol>
</li>
</ol>
<pre>
UCC Decompress ..\Textures\PlayerSkins.utx.uz2
</pre>
<p>UCC will tell you that it decompresses that file to ..\Textures\PlayerSkins.utx for you. Repeat this step for every .UZ or UZ2 file you copied from the CD or DVD.</p>
<p>That's all. Try connecting to servers to see if the files were properly restored and whether you need to restore other files as well.</p>
<p><a name="Related_Topics" id="Related_Topics"></a></p>
<h2><span class="mw-headline">Related Topics</span></h2>
<ul>
<li><a href="../../../../articles/d/o/_/Legacy%7EDo_Not_Alter_Default_Packages_4b29.html" title="Legacy:Do Not Alter Default Packages">Do Not Alter Default Packages</a></li>
<li><a href="../../../../articles/p/a/c/Legacy%7EPackage_c8e3.html" title="Legacy:Package">Package</a></li>
</ul>

<!-- 
NewPP limit report
Preprocessor node count: 25/1000000
Post-expand include size: 24/2097152 bytes
Template argument size: 0/2097152 bytes
#ifexist count: 0/100
-->
<div class="printfooter">
</div>
	    <div id="catlinks"><p class='catlinks'><a href="../../../../articles/c/a/t/Special%7ECategories_101d.html" title="Special:Categories">Category</a>: <span dir='ltr'><a href="../../../../articles/l/e/g/Category%7ELegacy_Troubleshooting_ddf5.html" title="Category:Legacy Troubleshooting">Legacy Troubleshooting</a></span></p></div>	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-legacy"
	       class="selected"	       ><a href="../../../../articles/r/e/s/Legacy%7ERestoring_Modified_Files_d1d9.html">Legacy</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../../articles/r/e/s/Legacy_talk%7ERestoring_Modified_Files_ebdc.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://wiki.beyondunreal.com/Legacy:Restoring_Modified_Files">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../../misc/uewiki.png);"
	    href="../../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-mainpage"><a href="../../../../index.html">Main Page</a></li>
	     	      <li id="n-portal"><a href="../../../../articles/c/o/m/Unreal_Wiki%7ECommunity_Portal_3311.html">Community portal</a></li>
	     	      <li id="n-help"><a href="../../../../articles/c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="../../../../../COPYING.html"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt='Attribution-Noncommercial-Share Alike 3.0' /></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 03:08, 4 January 2006 by Anonymous user(s) of Unreal Wiki. Based on work by Unreal Wiki user(s) <a href="../../../../articles/w/o/r/User%7EWormbo_7d13.html" title="User:Wormbo">Wormbo</a>.</li>	  <li id="f-copyright">Licensed as <a href="../../../../articles/c/o/p/Unreal_Wiki%7ECopyrights_e561.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>	  <li id="f-about"><a href="../../../../articles/a/b/o/Unreal_Wiki%7EAbout_9ce6.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>	  <li id="f-disclaimer"><a href="../../../../articles/g/e/n/Unreal_Wiki%7EGeneral_disclaimer_a0a2.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>
