<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- headlinks removed -->
	<link rel="shortcut icon" href="../../../../misc/uewiki-favicon.png"/>
    <title>Legacy:DoubleMetaPhone - Unreal Wiki</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../../skins/offline/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/md5.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/utf8.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/lookup.js"></script>
    <script type="text/javascript" src="../../../../articles/-/_/_/-.html"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../../articles/c/o/m/MediaWiki%7ECommon.css_d42e.html";
@import "../../../../articles/m/o/n/MediaWiki%7EMonobook.css_fb19.html";
@import "../../../../articles/-/_/_/-.html";
/*]]>*/</style>          </head>
  <body
    class="ns-100">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Legacy:DoubleMetaPhone</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</h3>
	    <div id="contentSub"></div>
	    	    	    <!-- start content -->
	    <p>This document implements a "sounds like" algorithm developed by Lawrence Philips which he published in the June, 2000 issue of <a href="http://www.cuj.com/documents/s=8038/cuj0006philips/" class="external text" title="http://www.cuj.com/documents/s=8038/cuj0006philips/" rel="nofollow">C/C++ Users Journal.</a></p>
<p>Double Metaphone is an improved version of Philips' original Metaphone algorithm.</p>
<p>The UnrealScript implementation has been adapted from Stephen Woodbridge's <a href="http://swoodbridge.com/DoubleMetaPhone/" class="external text" title="http://swoodbridge.com/DoubleMetaPhone/" rel="nofollow">PHP implementation</a> by <a href="../../../../articles/e/l/_/Legacy%7EEl_Muerte_4874.html" class="mw-redirect" title="Legacy:El Muerte">El Muerte</a>.</p>
<p><i>Note:</i> Because of the size of the algorithm there might be errors in it.</p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#The_algorithm"><span class="tocnumber">1</span> <span class="toctext">The algorithm</span></a></li>
<li class="toclevel-1"><a href="#Helper_functions"><span class="tocnumber">2</span> <span class="toctext">Helper functions</span></a></li>
<li class="toclevel-1"><a href="#Copyright"><span class="tocnumber">3</span> <span class="toctext">Copyright</span></a></li>
<li class="toclevel-1"><a href="#Related_Topics"><span class="tocnumber">4</span> <span class="toctext">Related Topics</span></a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script>
<p><a name="The_algorithm" id="The_algorithm"></a></p>
<h2><span class="mw-headline">The algorithm</span></h2>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="coMULTI">/**
        Returns the double metaphone value of in.
        The array always contains two values.
*/</span>
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw5">function</span> array&lt;string&gt; DoubleMetaPhone<span class="br0">(</span><span class="kw6">coerce</span> <span class="kw4">string</span> in, <span class="kw6">optional</span> <span class="kw4">int</span> mlen<span class="br0">)</span>
<span class="br0">{</span>
        <span class="kw5">local</span> array&lt;string&gt; res;
        <span class="kw5">local</span> <span class="kw4">string</span> prim, sec, tmp;
        <span class="kw5">local</span> <span class="kw4">int</span> cur, last, slen;
 
        <span class="kw1">if</span> <span class="br0">(</span>mlen == <span class="nu0">0</span><span class="br0">)</span> mlen = <span class="nu0">4</span>;
        slen = <span class="kw7">Len</span><span class="br0">(</span>in<span class="br0">)</span>;
        last = slen<span class="nu0">-1</span>;
        in = <span class="kw7">caps</span><span class="br0">(</span>in$<span class="st0">"     "</span><span class="br0">)</span>;
        <span class="co1">// skip this at beginning of word</span>
        <span class="kw1">switch</span> <span class="br0">(</span><span class="kw7">Left</span><span class="br0">(</span>in, <span class="nu0">2</span><span class="br0">)</span><span class="br0">)</span>
        <span class="br0">{</span>
                <span class="kw1">case</span> <span class="st0">"GN"</span>:
                <span class="kw1">case</span> <span class="st0">"KN"</span>:
                <span class="kw1">case</span> <span class="st0">"PN"</span>:
                <span class="kw1">case</span> <span class="st0">"WR"</span>:
                <span class="kw1">case</span> <span class="st0">"PS"</span>:
                        cur++;
        <span class="br0">}</span>
        <span class="co1">// Initial 'X' is pronounced 'Z' e.g. 'Xavier'</span>
        <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">Left</span><span class="br0">(</span>in, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"X"</span><span class="br0">)</span>
        <span class="br0">{</span>
                prim $= <span class="st0">"S"</span>; <span class="co1">// 'Z' maps to 'S'</span>
                sec  $= <span class="st0">"S"</span>;
                cur++;
        <span class="br0">}</span>
        <span class="co1">// main loop</span>
        <span class="kw1">while</span> <span class="br0">(</span><span class="kw7">len</span><span class="br0">(</span>prim<span class="br0">)</span> &lt; mlen || <span class="kw7">len</span><span class="br0">(</span>sec<span class="br0">)</span> &lt; mlen<span class="br0">)</span>
        <span class="br0">{</span>
                <span class="kw1">if</span> <span class="br0">(</span>cur &gt;= slen<span class="br0">)</span> <span class="kw1">break</span>;
                <span class="kw1">switch</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span>
                <span class="br0">{</span>
                        <span class="kw1">case</span> <span class="st0">"A"</span>:
                        <span class="kw1">case</span> <span class="st0">"E"</span>:
                        <span class="kw1">case</span> <span class="st0">"I"</span>:
                        <span class="kw1">case</span> <span class="st0">"O"</span>:
                        <span class="kw1">case</span> <span class="st0">"U"</span>:
                        <span class="kw1">case</span> <span class="st0">"Y"</span>:
                                <span class="kw1">if</span> <span class="br0">(</span>cur == <span class="nu0">0</span><span class="br0">)</span> <span class="co1">// all init vowels now map to 'A'</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">"A"</span>;
                                        sec      $= <span class="st0">"A"</span>;
                                <span class="br0">}</span>
                                cur++;
                                <span class="kw1">break</span>;
 
                        <span class="kw1">case</span> <span class="st0">"B"</span>: <span class="co1">// '-mb', e.g. "dumb", already skipped over ...</span>
                                prim $= <span class="st0">"P"</span>;
                                sec  $= <span class="st0">"P"</span>;
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur<span class="nu0">+1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"B"</span><span class="br0">)</span> cur += <span class="nu0">2</span>;
                                <span class="kw1">else</span> cur++;
                                <span class="kw1">break</span>;
 
                        <span class="kw1">case</span> <span class="st0">"Ã‡"</span>:
                                prim $= <span class="st0">"S"</span>;
                                sec  $= <span class="st0">"S"</span>;
                                cur++;
                                <span class="kw1">break</span>;
 
                        <span class="kw1">case</span> <span class="st0">"C"</span>: <span class="co1">// various gremanic</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>cur &gt; <span class="nu0">1</span><span class="br0">)</span>
                                        &amp;&amp; <span class="br0">(</span>!is_vowel<span class="br0">(</span>in, cur<span class="nu0">-2</span><span class="br0">)</span><span class="br0">)</span>
                                        &amp;&amp; <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur - <span class="nu0">1</span>, <span class="nu0">3</span><span class="br0">)</span> == <span class="st0">"ACH"</span><span class="br0">)</span>
                                        &amp;&amp; <span class="br0">(</span><span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">2</span>, <span class="nu0">1</span><span class="br0">)</span> != <span class="st0">"I"</span><span class="br0">)</span>
                                                &amp;&amp; <span class="br0">(</span><span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">2</span>, <span class="nu0">1</span><span class="br0">)</span> != <span class="st0">"E"</span><span class="br0">)</span>
                                                        || smid<span class="br0">(</span>in, cur - <span class="nu0">2</span>, <span class="nu0">6</span>, tmp<span class="br0">)</span> == <span class="st0">"BACHER"</span><span class="br0">)</span>
                                                        || tmp == <span class="st0">"MACHER"</span><span class="br0">)</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">"K"</span>;
                                        sec  $= <span class="st0">"K"</span>;
                                        cur += <span class="nu0">2</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="co1">// special case 'caesar'</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>cur == <span class="nu0">0</span><span class="br0">)</span> &amp;&amp; <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur, <span class="nu0">6</span><span class="br0">)</span> == <span class="st0">"CAESAR"</span><span class="br0">)</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">"S"</span>;
                                        sec  $= <span class="st0">"S"</span>;
                                        cur += <span class="nu0">2</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="co1">// italian 'chianti'</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur, <span class="nu0">4</span><span class="br0">)</span> == <span class="st0">"CHIA"</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">"K"</span>;
                                        sec  $= <span class="st0">"K"</span>;
                                        cur += <span class="nu0">2</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur, <span class="nu0">2</span><span class="br0">)</span> == <span class="st0">"CH"</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        <span class="co1">// find 'michael'</span>
                                        <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>cur &gt; <span class="nu0">0</span><span class="br0">)</span> &amp;&amp; <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur, <span class="nu0">4</span><span class="br0">)</span> == <span class="st0">"CHAE"</span><span class="br0">)</span><span class="br0">)</span>
                                        <span class="br0">{</span>
                                                prim $= <span class="st0">"K"</span>;
                                                sec  $= <span class="st0">"X"</span>;
                                                cur += <span class="nu0">2</span>;
                                                <span class="kw1">break</span>;
                                        <span class="br0">}</span>
 
                                        <span class="co1">// greek roots e.g. 'chemistry', 'chorus'</span>
                                        <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>cur == <span class="nu0">0</span><span class="br0">)</span>
                                                &amp;&amp; <span class="br0">(</span>smid<span class="br0">(</span>in, cur<span class="nu0">+1</span>, <span class="nu0">5</span>, tmp<span class="br0">)</span> == <span class="st0">"HARAC"</span>
                                                        || tmp == <span class="st0">"HARIS"</span><span class="br0">)</span>
                                                || <span class="br0">(</span>smid<span class="br0">(</span>in, cur<span class="nu0">+1</span>, <span class="nu0">3</span>, tmp<span class="br0">)</span> == <span class="st0">"HOR"</span>
                                                        || tmp == <span class="st0">"HYM"</span>
                                                        || tmp == <span class="st0">"HIA"</span>
                                                        || tmp == <span class="st0">"HEM"</span><span class="br0">)</span>
                                                &amp;&amp; <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, <span class="nu0">0</span>, <span class="nu0">5</span><span class="br0">)</span> != <span class="st0">"CHORE"</span><span class="br0">)</span><span class="br0">)</span>
                                        <span class="br0">{</span>
                                                prim $= <span class="st0">"K"</span>;
                                                sec  $= <span class="st0">"K"</span>;
                                                cur += <span class="nu0">2</span>;
                                                <span class="kw1">break</span>;
                                        <span class="br0">}</span>
 
                                        <span class="co1">// germanic, greek, or otherwise 'ch' for 'kh' sound</span>
                                        <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>        <span class="br0">(</span>smid<span class="br0">(</span>in, <span class="nu0">0</span>, <span class="nu0">4</span>, tmp<span class="br0">)</span> == <span class="st0">"VAN "</span><span class="br0">)</span>
                                                        || <span class="br0">(</span>tmp == <span class="st0">"VON "</span><span class="br0">)</span>
                                                        || <span class="br0">(</span>tmp == <span class="st0">"SCH"</span><span class="br0">)</span>
                                                <span class="br0">)</span>
                                                <span class="co1">// 'architect' but not 'arch', orchestra', 'orchid'</span>
                                                || <span class="br0">(</span>       <span class="br0">(</span>smid<span class="br0">(</span>in, cur<span class="nu0">-2</span>, <span class="nu0">6</span>, tmp<span class="br0">)</span> == <span class="st0">"ORCHES"</span><span class="br0">)</span>
                                                                || <span class="br0">(</span>tmp == <span class="st0">"ARCHIT"</span><span class="br0">)</span>
                                                                || <span class="br0">(</span>tmp == <span class="st0">"ORCHID"</span><span class="br0">)</span>
                                                        <span class="br0">)</span>
                                                || <span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"TS"</span>, <span class="kw7">Mid</span><span class="br0">(</span>in, cur<span class="nu0">+2</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span>
                                                || <span class="br0">(</span>
                                                        <span class="br0">(</span><span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"AOUE"</span>, <span class="kw7">Mid</span><span class="br0">(</span>in, cur<span class="nu0">-1</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span>
                                                                || <span class="br0">(</span>cur == <span class="nu0">0</span><span class="br0">)</span>
                                                        <span class="br0">)</span>
                                                        <span class="co1">// e.g. 'wachtler', 'weschsler', but not 'tichner'</span>
                                                        &amp;&amp; <span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"LRNMBHFVW"</span>, <span class="kw7">Mid</span><span class="br0">(</span>in, cur<span class="nu0">+2</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span><span class="br0">)</span>
                                                <span class="br0">)</span>
                                        <span class="br0">{</span>
                                                prim $= <span class="st0">"K"</span>;
                                                sec  $= <span class="st0">"K"</span>;
                                        <span class="br0">}</span>
                                        <span class="kw1">else</span> <span class="br0">{</span>
                                                <span class="kw1">if</span> <span class="br0">(</span>cur &gt; <span class="nu0">0</span><span class="br0">)</span>
                                                <span class="br0">{</span>
                                                        <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, <span class="nu0">0</span>, <span class="nu0">2</span><span class="br0">)</span> == <span class="st0">"MC"</span><span class="br0">)</span>
                                                        <span class="br0">{</span>
                                                                <span class="co1">// e.g. 'McHugh'</span>
                                                                prim $= <span class="st0">"K"</span>;
                                                                sec  $= <span class="st0">"K"</span>;
                                                        <span class="br0">}</span>
                                                        <span class="kw1">else</span> <span class="br0">{</span>
                                                                prim $= <span class="st0">"X"</span>;
                                                                sec  $= <span class="st0">"K"</span>;
                                                        <span class="br0">}</span>
                                                <span class="br0">}</span>
                                                <span class="kw1">else</span> <span class="br0">{</span>
                                                        prim $= <span class="st0">"X"</span>;
                                                        sec  $= <span class="st0">"X"</span>;
                                                <span class="br0">}</span>
                                        <span class="br0">}</span>
                                        cur += <span class="nu0">2</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="co1">// e.g. 'czerny'</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur, <span class="nu0">2</span><span class="br0">)</span> == <span class="st0">"CZ"</span>
                                        &amp;&amp; <span class="kw7">mid</span><span class="br0">(</span>in, cur<span class="nu0">-2</span>, <span class="nu0">4</span><span class="br0">)</span> != <span class="st0">"WICZ"</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">"S"</span>;
                                        sec  $= <span class="st0">"X"</span>;
                                        cur += <span class="nu0">2</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="co1">// e.g. 'focaccia'</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">3</span><span class="br0">)</span> == <span class="st0">"CIA"</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">"X"</span>;
                                        sec  $= <span class="st0">"X"</span>;
                                        cur += <span class="nu0">3</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="co1">// double 'C', but not McClellan'</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur, <span class="nu0">2</span><span class="br0">)</span> == <span class="st0">"CC"</span>
                                                &amp;&amp; !<span class="br0">(</span><span class="br0">(</span>cur == <span class="nu0">1</span><span class="br0">)</span>
                                                        &amp;&amp; <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, <span class="nu0">0</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"M"</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        <span class="co1">// 'bellocchio' but not 'bacchus'</span>
                                        <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"IEH"</span>, <span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">2</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span>
                                                &amp;&amp; <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">2</span>, <span class="nu0">2</span><span class="br0">)</span> != <span class="st0">"HU"</span><span class="br0">)</span><span class="br0">)</span>
                                        <span class="br0">{</span>
                                                <span class="co1">// 'accident', 'accede', 'succeed'</span>
                                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="br0">(</span>cur == <span class="nu0">1</span><span class="br0">)</span>
                                                        &amp;&amp; <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur - <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"A"</span><span class="br0">)</span><span class="br0">)</span>
                                                        || <span class="br0">(</span>smid<span class="br0">(</span>in, cur<span class="nu0">-1</span>, <span class="nu0">5</span>, tmp<span class="br0">)</span> == <span class="st0">"UCCEE"</span><span class="br0">)</span>
                                                        || <span class="br0">(</span>tmp == <span class="st0">"UCCES"</span><span class="br0">)</span><span class="br0">)</span>
                                                <span class="br0">{</span>
                                                        prim $= <span class="st0">"KS"</span>;
                                                        sec  $= <span class="st0">"KS"</span>;
                                                        <span class="co1">// 'bacci', 'bertucci', other italian</span>
                                                <span class="br0">}</span>
                                                <span class="kw1">else</span> <span class="br0">{</span>
                                                        prim $= <span class="st0">"X"</span>;
                                                        sec  $= <span class="st0">"X"</span>;
                                                <span class="br0">}</span>
                                                cur += <span class="nu0">3</span>;
                                                <span class="kw1">break</span>;
                                        <span class="br0">}</span>
                                        <span class="kw1">else</span> <span class="br0">{</span>
                                                <span class="co1">// Pierce's rule</span>
                                                prim $= <span class="st0">"K"</span>;
                                                sec $= <span class="st0">"K"</span>;
                                                cur += <span class="nu0">2</span>;
                                                <span class="kw1">break</span>;
                                        <span class="br0">}</span>
                                <span class="br0">}</span>
 
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>smid<span class="br0">(</span>in, cur, <span class="nu0">2</span>, tmp<span class="br0">)</span> == <span class="st0">"CK"</span><span class="br0">)</span>
                                        || <span class="br0">(</span>tmp == <span class="st0">"CG"</span><span class="br0">)</span>
                                        || <span class="br0">(</span>tmp == <span class="st0">"CQ"</span><span class="br0">)</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">"K"</span>;
                                        sec  $= <span class="st0">"K"</span>;
                                        cur += <span class="nu0">2</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>smid<span class="br0">(</span>in, cur, <span class="nu0">2</span>, tmp<span class="br0">)</span> == <span class="st0">"CI"</span><span class="br0">)</span>
                                        || <span class="br0">(</span>tmp == <span class="st0">"CE"</span><span class="br0">)</span>
                                        || <span class="br0">(</span>tmp == <span class="st0">"CY"</span><span class="br0">)</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        <span class="co1">// italian vs. english</span>
                                        <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>smid<span class="br0">(</span>in, cur, <span class="nu0">3</span>, tmp<span class="br0">)</span> == <span class="st0">"CIO"</span><span class="br0">)</span>
                                                || <span class="br0">(</span>tmp == <span class="st0">"CIE"</span><span class="br0">)</span>
                                                || <span class="br0">(</span>tmp == <span class="st0">"CIA"</span><span class="br0">)</span><span class="br0">)</span>
                                        <span class="br0">{</span>
                                                prim $= <span class="st0">"S"</span>;
                                                sec  $= <span class="st0">"X"</span>;
                                        <span class="br0">}</span>
                                        <span class="kw1">else</span> <span class="br0">{</span>
                                                prim $= <span class="st0">"S"</span>;
                                                sec  $= <span class="st0">"S"</span>;
                                        <span class="br0">}</span>
                                        cur += <span class="nu0">2</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="co1">// else</span>
                                prim $= <span class="st0">"K"</span>;
                                sec  $= <span class="st0">"K"</span>;
 
                                <span class="co1">// name sent in 'mac caffrey', 'mac gregor'</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>smid<span class="br0">(</span>in, cur<span class="nu0">+1</span>, <span class="nu0">2</span>, tmp<span class="br0">)</span> == <span class="st0">" C"</span><span class="br0">)</span>
                                        || <span class="br0">(</span>tmp == <span class="st0">" Q"</span><span class="br0">)</span>
                                        || <span class="br0">(</span>tmp == <span class="st0">" G"</span><span class="br0">)</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        cur += <span class="nu0">3</span>;
                                <span class="br0">}</span>
                                <span class="kw1">else</span> <span class="br0">{</span>
                                        <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"CKQ"</span>, <span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span>
                                                &amp;&amp; !<span class="br0">(</span><span class="br0">(</span>smid<span class="br0">(</span>in, cur<span class="nu0">+1</span>, <span class="nu0">2</span>, tmp<span class="br0">)</span> == <span class="st0">"CE"</span><span class="br0">)</span>
                                                        || <span class="br0">(</span>tmp == <span class="st0">"CI"</span><span class="br0">)</span><span class="br0">)</span>
                                                <span class="br0">)</span>
                                        <span class="br0">{</span>
                                                cur += <span class="nu0">2</span>;
                                        <span class="br0">}</span>
                                        <span class="kw1">else</span> <span class="br0">{</span>
                                                cur++;
                                        <span class="br0">}</span>
                                <span class="br0">}</span>
                                <span class="kw1">break</span>;
 
                        <span class="kw1">case</span> <span class="st0">"D"</span>:
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur, <span class="nu0">2</span><span class="br0">)</span> == <span class="st0">"DG"</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"IEY"</span>, <span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">2</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span>
                                        <span class="br0">{</span>
                                                <span class="co1">// e.g. 'edge'</span>
                                                prim $= <span class="st0">"J"</span>;
                                                sec  $= <span class="st0">"J"</span>;
                                                cur += <span class="nu0">3</span>;
                                                <span class="kw1">break</span>;
                                        <span class="br0">}</span>
                                        <span class="kw1">else</span> <span class="br0">{</span>
                                                <span class="co1">// e.g. 'edgar'</span>
                                                prim $= <span class="st0">"TK"</span>;
                                                sec  $= <span class="st0">"TK"</span>;
                                                cur += <span class="nu0">2</span>;
                                                <span class="kw1">break</span>;
                                        <span class="br0">}</span>
                                <span class="br0">}</span>
 
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>smid<span class="br0">(</span>in, cur, <span class="nu0">2</span>, tmp<span class="br0">)</span> == <span class="st0">"DT"</span><span class="br0">)</span>
                                        || <span class="br0">(</span>tmp == <span class="st0">"DD"</span><span class="br0">)</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">"T"</span>;
                                        sec  $= <span class="st0">"T"</span>;
                                        cur += <span class="nu0">2</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="co1">// else</span>
                                prim $= <span class="st0">"T"</span>;
                                sec  $= <span class="st0">"T"</span>;
                                cur++;
                                <span class="kw1">break</span>;
 
                        <span class="kw1">case</span> <span class="st0">"F"</span>:
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"F"</span><span class="br0">)</span> cur += <span class="nu0">2</span>;
                                <span class="kw1">else</span> cur++;
                                prim $= <span class="st0">"F"</span>;
                                sec  $= <span class="st0">"F"</span>;
                                <span class="kw1">break</span>;
 
                        <span class="co1">// TODO: optimize</span>
                        <span class="kw1">case</span> <span class="st0">"G"</span>:
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"H"</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>cur &gt; <span class="nu0">0</span><span class="br0">)</span> &amp;&amp; !is_vowel<span class="br0">(</span>in, cur<span class="nu0">-1</span><span class="br0">)</span><span class="br0">)</span>
                                        <span class="br0">{</span>
                                                prim $= <span class="st0">"K"</span>;
                                                sec  $= <span class="st0">"K"</span>;
                                                cur += <span class="nu0">2</span>;
                                                <span class="kw1">break</span>;
                                        <span class="br0">}</span>
 
                                        <span class="kw1">if</span> <span class="br0">(</span>cur &lt; <span class="nu0">3</span><span class="br0">)</span>
                                        <span class="br0">{</span>
                                                <span class="co1">// 'ghislane', 'ghiradelli'</span>
                                                <span class="kw1">if</span> <span class="br0">(</span>cur == <span class="nu0">0</span><span class="br0">)</span>
                                                <span class="br0">{</span>
                                                        <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">2</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"I"</span><span class="br0">)</span>
                                                        <span class="br0">{</span>
                                                                prim $= <span class="st0">"J"</span>;
                                                                sec  $= <span class="st0">"J"</span>;
                                                        <span class="br0">}</span>
                                                        <span class="kw1">else</span> <span class="br0">{</span>
                                                                prim $= <span class="st0">"K"</span>;
                                                                sec  $= <span class="st0">"K"</span>;
                                                        <span class="br0">}</span>
                                                        cur += <span class="nu0">2</span>;
                                                        <span class="kw1">break</span>;
                                                <span class="br0">}</span>
                                        <span class="br0">}</span>
 
                                        <span class="co1">// Parker's rule (with some further refinements) - e.g. 'hugh'</span>
                                        <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="br0">(</span>cur &gt; <span class="nu0">1</span><span class="br0">)</span> &amp;&amp; <span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"BHD"</span>, <span class="kw7">mid</span><span class="br0">(</span>in, cur - <span class="nu0">2</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span><span class="br0">)</span>
                                                <span class="co1">// e.g. 'bough'</span>
                                                || <span class="br0">(</span><span class="br0">(</span>cur &gt; <span class="nu0">2</span><span class="br0">)</span> &amp;&amp; <span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"BHD"</span>, <span class="kw7">mid</span><span class="br0">(</span>in, cur - <span class="nu0">3</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span><span class="br0">)</span>
                                                <span class="co1">// e.g. 'broughton'</span>
                                                || <span class="br0">(</span><span class="br0">(</span>cur &gt; <span class="nu0">3</span><span class="br0">)</span> &amp;&amp; <span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"BH"</span>, <span class="kw7">mid</span><span class="br0">(</span>in, cur - <span class="nu0">4</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>
                                        <span class="br0">{</span>
                                                cur += <span class="nu0">2</span>;
                                                <span class="kw1">break</span>;
                                        <span class="br0">}</span>
                                        <span class="kw1">else</span> <span class="br0">{</span>
                                                <span class="co1">// e.g. 'laugh', 'McLaughlin', 'cough', 'gough', 'rough', 'tough'</span>
                                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>cur &gt; <span class="nu0">2</span><span class="br0">)</span>
                                                        &amp;&amp; <span class="br0">(</span><span class="kw7">Mid</span><span class="br0">(</span>in, cur - <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"U"</span><span class="br0">)</span>
                                                        &amp;&amp; <span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"CGLRT"</span>, <span class="kw7">mid</span><span class="br0">(</span>in, cur - <span class="nu0">3</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span><span class="br0">)</span>
                                                <span class="br0">{</span>
                                                        prim $= <span class="st0">"F"</span>;
                                                        sec  $= <span class="st0">"F"</span>;
                                                <span class="br0">}</span>
                                                <span class="kw1">else</span> <span class="br0">{</span>
                                                        <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>cur &gt; <span class="nu0">0</span><span class="br0">)</span> &amp;&amp; <span class="kw7">mid</span><span class="br0">(</span>in, cur - <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> != <span class="st0">"I"</span><span class="br0">)</span>
                                                        <span class="br0">{</span>
                                                                prim $= <span class="st0">"K"</span>;
                                                                sec  $= <span class="st0">"K"</span>;
                                                        <span class="br0">}</span>
                                                        cur += <span class="nu0">2</span>;
                                                        <span class="kw1">break</span>;
                                                <span class="br0">}</span>
                                        <span class="br0">}</span>
                                <span class="br0">}</span>
 
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"N"</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>cur == <span class="nu0">1</span><span class="br0">)</span> &amp;&amp; is_vowel<span class="br0">(</span>in, <span class="nu0">0</span><span class="br0">)</span> &amp;&amp; !Slavo_Germanic<span class="br0">(</span>in<span class="br0">)</span><span class="br0">)</span>
                                        <span class="br0">{</span>
                                                prim $= <span class="st0">"KN"</span>;
                                                sec  $= <span class="st0">"N"</span>;
                                        <span class="br0">}</span>
                                        <span class="kw1">else</span> <span class="br0">{</span>
                                                <span class="co1">// not e.g. 'cagney'</span>
                                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">2</span>, <span class="nu0">2</span><span class="br0">)</span> != <span class="st0">"EY"</span><span class="br0">)</span>
                                                        &amp;&amp; <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span><span class="br0">)</span> != <span class="st0">"Y"</span><span class="br0">)</span>
                                                        &amp;&amp; !Slavo_Germanic<span class="br0">(</span>in<span class="br0">)</span><span class="br0">)</span>
                                                <span class="br0">{</span>
                                                        prim $= <span class="st0">"N"</span>;
                                                        sec  $= <span class="st0">"KN"</span>;
                                                <span class="br0">}</span>
                                                <span class="kw1">else</span> <span class="br0">{</span>
                                                        prim $= <span class="st0">"KN"</span>;
                                                        sec  $= <span class="st0">"KN"</span>;
                                                <span class="br0">}</span>
                                        <span class="br0">}</span>
                                        cur += <span class="nu0">2</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="co1">// 'tagliaro'</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">2</span><span class="br0">)</span> == <span class="st0">"LI"</span><span class="br0">)</span> &amp;&amp; !Slavo_Germanic<span class="br0">(</span>in<span class="br0">)</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">"KL"</span>;
                                        sec  $= <span class="st0">"L"</span>;
                                        cur += <span class="nu0">2</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="co1">// -ges-, -gep-, -gel- at beginning</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>cur == <span class="nu0">0</span><span class="br0">)</span>
                                        &amp;&amp; <span class="br0">(</span><span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"Y"</span><span class="br0">)</span>
                                                || <span class="br0">(</span><span class="br0">(</span>smid<span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">2</span>, tmp<span class="br0">)</span> == <span class="st0">"ES"</span><span class="br0">)</span>
                                                        || <span class="br0">(</span>tmp == <span class="st0">"EP"</span><span class="br0">)</span>
                                                        || <span class="br0">(</span>tmp == <span class="st0">"EB"</span><span class="br0">)</span>
                                                        || <span class="br0">(</span>tmp == <span class="st0">"EL"</span><span class="br0">)</span>
                                                        || <span class="br0">(</span>tmp == <span class="st0">"EY"</span><span class="br0">)</span>
                                                        || <span class="br0">(</span>tmp == <span class="st0">"IB"</span><span class="br0">)</span>
                                                        || <span class="br0">(</span>tmp == <span class="st0">"IL"</span><span class="br0">)</span>
                                                        || <span class="br0">(</span>tmp == <span class="st0">"IN"</span><span class="br0">)</span>
                                                        || <span class="br0">(</span>tmp == <span class="st0">"IE"</span><span class="br0">)</span>
                                                        || <span class="br0">(</span>tmp == <span class="st0">"EI"</span><span class="br0">)</span>
                                                        || <span class="br0">(</span>tmp == <span class="st0">"ER"</span><span class="br0">)</span><span class="br0">)</span>
                                                <span class="br0">)</span>
                                        <span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">"K"</span>;
                                        sec  $= <span class="st0">"J"</span>;
                                        cur += <span class="nu0">2</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="co1">// -ger-, -gy-</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">2</span><span class="br0">)</span> == <span class="st0">"ER"</span><span class="br0">)</span>
                                        || <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"Y"</span><span class="br0">)</span><span class="br0">)</span>
                                        &amp;&amp; !<span class="br0">(</span>smid<span class="br0">(</span>in, <span class="nu0">0</span>, <span class="nu0">6</span>, tmp<span class="br0">)</span> == <span class="st0">"DANGER"</span>
                                                || tmp == <span class="st0">"RANGER"</span>
                                                || tmp == <span class="st0">"MANGER"</span>
                                        <span class="br0">)</span>
                                        &amp;&amp; <span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"EI"</span>, <span class="kw7">mid</span><span class="br0">(</span>in, cur<span class="nu0">-1</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> == <span class="nu0">-1</span><span class="br0">)</span>
                                        &amp;&amp; !<span class="br0">(</span>smid<span class="br0">(</span>in, cur<span class="nu0">-1</span>, <span class="nu0">3</span>, tmp<span class="br0">)</span> == <span class="st0">"RGY"</span>
                                                || tmp == <span class="st0">"OGY"</span>
                                        <span class="br0">)</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">"K"</span>;
                                        sec  $= <span class="st0">"J"</span>;
                                        cur += <span class="nu0">2</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="co1">// italian e.g. 'biaggi'</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"EIY"</span>, <span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span>
                                        || smid<span class="br0">(</span>in, cur<span class="nu0">-1</span>, <span class="nu0">4</span>, tmp<span class="br0">)</span> == <span class="st0">"AGGI"</span>
                                        || tmp == <span class="st0">"OGGI"</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        <span class="co1">// obvious germanic</span>
                                        <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="br0">(</span>smid<span class="br0">(</span>in, <span class="nu0">0</span>, <span class="nu0">4</span>, tmp<span class="br0">)</span> == <span class="st0">"VAN "</span>
                                                        || tmp == <span class="st0">"VON "</span><span class="br0">)</span>
                                                || <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, <span class="nu0">0</span>, <span class="nu0">3</span><span class="br0">)</span> == <span class="st0">"SCH"</span><span class="br0">)</span><span class="br0">)</span>
                                                || <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">2</span><span class="br0">)</span> == <span class="st0">"ET"</span><span class="br0">)</span><span class="br0">)</span>
                                        <span class="br0">{</span>
                                                prim $= <span class="st0">"K"</span>;
                                                sec  $= <span class="st0">"K"</span>;
                                        <span class="br0">}</span>
                                        <span class="kw1">else</span> <span class="br0">{</span>
                                                <span class="co1">// always soft if french ending</span>
                                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">4</span><span class="br0">)</span> == <span class="st0">"IER "</span><span class="br0">)</span>
                                                <span class="br0">{</span>
                                                        prim $= <span class="st0">"J"</span>;
                                                        sec  $= <span class="st0">"J"</span>;
                                                <span class="br0">}</span>
                                                <span class="kw1">else</span> <span class="br0">{</span>
                                                        prim $= <span class="st0">"J"</span>;
                                                        sec  $= <span class="st0">"K"</span>;
                                                <span class="br0">}</span>
                                        <span class="br0">}</span>
                                        cur += <span class="nu0">2</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur <span class="nu0">+1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"G"</span><span class="br0">)</span> cur += <span class="nu0">2</span>;
                                <span class="kw1">else</span> cur++;
 
                                prim $= <span class="st0">"K"</span>;
                                sec  $= <span class="st0">"K"</span>;
                                <span class="kw1">break</span>;
 
                        <span class="kw1">case</span> <span class="st0">"H"</span>:
                                <span class="co1">// only keep if first &amp; before vowel or btw. 2 vowels</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="br0">(</span>cur == <span class="nu0">0</span><span class="br0">)</span> || is_vowel<span class="br0">(</span>in, cur - <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> &amp;&amp; is_vowel<span class="br0">(</span>in, cur + <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">"H"</span>;
                                        sec  $= <span class="st0">"H"</span>;
                                        cur += <span class="nu0">2</span>;
                                <span class="br0">}</span>
                                <span class="kw1">else</span> cur++;
                                <span class="kw1">break</span>;
 
                        <span class="kw1">case</span> <span class="st0">"J"</span>:
                                <span class="co1">// obvious spanish, 'jose', 'san jacinto'</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur, <span class="nu0">4</span><span class="br0">)</span> == <span class="st0">"JOSE"</span><span class="br0">)</span>
                                        || <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, <span class="nu0">0</span>, <span class="nu0">4</span><span class="br0">)</span> == <span class="st0">"SAN "</span><span class="br0">)</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="br0">(</span>cur == <span class="nu0">0</span><span class="br0">)</span> &amp;&amp; <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">4</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">" "</span><span class="br0">)</span><span class="br0">)</span>
                                                || <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, <span class="nu0">0</span>, <span class="nu0">4</span><span class="br0">)</span> == <span class="st0">"SAN "</span><span class="br0">)</span><span class="br0">)</span>
                                        <span class="br0">{</span>
                                                prim $= <span class="st0">"H"</span>;
                                                sec  $= <span class="st0">"H"</span>;
                                        <span class="br0">}</span>
                                        <span class="kw1">else</span> <span class="br0">{</span>
                                                prim $= <span class="st0">"J"</span>;
                                                sec  $= <span class="st0">"H"</span>;
                                        <span class="br0">}</span>
                                        cur++;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>cur == <span class="nu0">0</span><span class="br0">)</span> &amp;&amp; <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur, <span class="nu0">4</span><span class="br0">)</span> != <span class="st0">"JOSE"</span><span class="br0">)</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">"J"</span>;  <span class="co1">// Yankelovich/Jankelowicz</span>
                                        sec  $= <span class="st0">"A"</span>;
                                <span class="br0">}</span>
                                <span class="kw1">else</span> <span class="br0">{</span>
                                        <span class="co1">// spanish pron. of .e.g. 'bajador'</span>
                                        <span class="kw1">if</span> <span class="br0">(</span>is_vowel<span class="br0">(</span>in, cur - <span class="nu0">1</span><span class="br0">)</span>
                                                &amp;&amp; !Slavo_Germanic<span class="br0">(</span>in<span class="br0">)</span>
                                                &amp;&amp; <span class="br0">(</span><span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"A"</span><span class="br0">)</span>
                                                || <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"O"</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>
                                        <span class="br0">{</span>
                                                prim $= <span class="st0">"J"</span>;
                                                sec  $= <span class="st0">"H"</span>;
                                        <span class="br0">}</span>
                                        <span class="kw1">else</span> <span class="br0">{</span>
                                                <span class="kw1">if</span> <span class="br0">(</span>cur == last<span class="br0">)</span>
                                                <span class="br0">{</span>
                                                        prim $= <span class="st0">"J"</span>;
                                                        sec  $= <span class="st0">""</span>;
                                                <span class="br0">}</span>
                                                <span class="kw1">else</span> <span class="br0">{</span>
                                                        <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"LTKSNMBZ"</span>, <span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> == <span class="nu0">-1</span><span class="br0">)</span>
                                                                &amp;&amp; <span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"SKL"</span>, <span class="kw7">mid</span><span class="br0">(</span>in, cur - <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> == <span class="nu0">-1</span><span class="br0">)</span> <span class="br0">)</span>
                                                        <span class="br0">{</span>
                                                                prim $= <span class="st0">"J"</span>;
                                                                sec  $= <span class="st0">"J"</span>;
                                                        <span class="br0">}</span>
                                                <span class="br0">}</span>
                                        <span class="br0">}</span>
                                <span class="br0">}</span>
 
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"J"</span><span class="br0">)</span> <span class="co1">// it could happen</span>
                                        cur += <span class="nu0">2</span>;
                                <span class="kw1">else</span>
                                        cur++;
                                <span class="kw1">break</span>;
 
                        <span class="kw1">case</span> <span class="st0">"K"</span>:
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"K"</span><span class="br0">)</span> cur += <span class="nu0">2</span>;
                                <span class="kw1">else</span> cur++;
                                prim $= <span class="st0">"K"</span>;
                                sec  $= <span class="st0">"K"</span>;
                                <span class="kw1">break</span>;
 
                        <span class="kw1">case</span> <span class="st0">"L"</span>:
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"L"</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        <span class="co1">// spanish e.g. 'cabrillo', 'gallegos'</span>
                                        <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="br0">(</span>cur == <span class="br0">(</span>slen - <span class="nu0">3</span><span class="br0">)</span><span class="br0">)</span>
                                                &amp;&amp; <span class="br0">(</span>smid<span class="br0">(</span>in, cur<span class="nu0">-1</span>, <span class="nu0">4</span>, tmp<span class="br0">)</span> == <span class="st0">"ILLO"</span>
                                                        || tmp == <span class="st0">"ILLA"</span>
                                                        || tmp == <span class="st0">"ALLE"</span>
                                                <span class="br0">)</span>
                                                || <span class="br0">(</span>
                                                        <span class="br0">(</span><span class="br0">(</span>smid<span class="br0">(</span>in, last<span class="nu0">-1</span>, <span class="nu0">2</span>, tmp<span class="br0">)</span> == <span class="st0">"AS"</span>
                                                                || tmp == <span class="st0">"OS"</span><span class="br0">)</span>
                                                                || <span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"AO"</span>, <span class="kw7">mid</span><span class="br0">(</span>in, last, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span>
                                                        <span class="br0">)</span>
                                                        &amp;&amp; <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur - <span class="nu0">1</span>, <span class="nu0">4</span><span class="br0">)</span> == <span class="st0">"ALLE"</span><span class="br0">)</span>
                                                        <span class="br0">)</span>
                                                <span class="br0">)</span><span class="br0">)</span>
                                        <span class="br0">{</span>
                                                prim $= <span class="st0">"L"</span>;
                                                sec  $= <span class="st0">""</span>;
                                                cur += <span class="nu0">2</span>;
                                                <span class="kw1">break</span>;
                                        <span class="br0">}</span>
                                        cur += <span class="nu0">2</span>;
                                <span class="br0">}</span> <span class="kw1">else</span> cur++;
                                prim $= <span class="st0">"L"</span>;
                                sec  $= <span class="st0">"L"</span>;
                                <span class="kw1">break</span>;
 
                        <span class="kw1">case</span> <span class="st0">"M"</span>:
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur<span class="nu0">-1</span>, <span class="nu0">3</span><span class="br0">)</span> == <span class="st0">"UMB"</span><span class="br0">)</span>
                                        &amp;&amp; <span class="br0">(</span><span class="br0">(</span><span class="br0">(</span>cur + <span class="nu0">1</span><span class="br0">)</span> == last<span class="br0">)</span>
                                        || <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur<span class="nu0">+2</span>, <span class="nu0">2</span><span class="br0">)</span> == <span class="st0">"ER"</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>
                                        <span class="co1">// 'dumb', 'thumb'</span>
                                        || <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"M"</span><span class="br0">)</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        cur += <span class="nu0">2</span>;
                                <span class="br0">}</span>
                                <span class="kw1">else</span> <span class="br0">{</span>
                                        cur++;
                                <span class="br0">}</span>
                                prim $= <span class="st0">"M"</span>;
                                sec  $= <span class="st0">"M"</span>;
                                <span class="kw1">break</span>;
 
                        <span class="kw1">case</span> <span class="st0">"N"</span>:
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"N"</span><span class="br0">)</span> cur += <span class="nu0">2</span>;
                                <span class="kw1">else</span> cur++;
                                prim $= <span class="st0">"N"</span>;
                                sec  $= <span class="st0">"N"</span>;
                                <span class="kw1">break</span>;
 
                        <span class="kw1">case</span> <span class="st0">"Ã‘"</span>:
                                cur++;
                                prim $= <span class="st0">"N"</span>;
                                sec  $= <span class="st0">"N"</span>;
                                <span class="kw1">break</span>;
 
                        <span class="kw1">case</span> <span class="st0">"P"</span>:
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"H"</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        cur += <span class="nu0">2</span>;
                                        prim $= <span class="st0">"F"</span>;
                                        sec  $= <span class="st0">"F"</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="co1">// also account for "campbell" and "raspberry"</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"PB"</span>, <span class="kw7">Mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span>
                                        cur += <span class="nu0">2</span>;
                                <span class="kw1">else</span>
                                        cur++;
                                prim $= <span class="st0">"P"</span>;
                                sec  $= <span class="st0">"P"</span>;
                                <span class="kw1">break</span>;
 
                        <span class="kw1">case</span> <span class="st0">"Q"</span>:
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"Q"</span><span class="br0">)</span> cur += <span class="nu0">2</span>;
                                <span class="kw1">else</span> cur++;
                                prim $= <span class="st0">"K"</span>;
                                sec  $= <span class="st0">"K"</span>;
                                <span class="kw1">break</span>;
 
                        <span class="kw1">case</span> <span class="st0">"R"</span>:
                                <span class="co1">// french e.g. 'rogier', but exclude 'hochmeier'</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>cur == last<span class="br0">)</span>
                                        &amp;&amp; !Slavo_Germanic<span class="br0">(</span>in<span class="br0">)</span>
                                        &amp;&amp; <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur - <span class="nu0">2</span>, <span class="nu0">2</span><span class="br0">)</span> == <span class="st0">"IE"</span><span class="br0">)</span>
                                        &amp;&amp; !<span class="br0">(</span>smid<span class="br0">(</span>in, cur<span class="nu0">-4</span>, <span class="nu0">2</span>, tmp<span class="br0">)</span> == <span class="st0">"ME"</span>
                                                || tmp == <span class="st0">"MA"</span>
                                        <span class="br0">)</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">""</span>;
                                        sec  $= <span class="st0">"R"</span>;
                                <span class="br0">}</span>
                                <span class="kw1">else</span> <span class="br0">{</span>
                                        prim $= <span class="st0">"R"</span>;
                                        sec  $= <span class="st0">"R"</span>;
                                <span class="br0">}</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"R"</span><span class="br0">)</span> cur += <span class="nu0">2</span>;
                                <span class="kw1">else</span> cur++;
                                <span class="kw1">break</span>;
 
                        <span class="kw1">case</span> <span class="st0">"S"</span>:
                                <span class="co1">// special cases 'island', 'isle', 'carlisle', 'carlysle'</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>smid<span class="br0">(</span>in, cur - <span class="nu0">1</span>, <span class="nu0">3</span>, tmp<span class="br0">)</span> == <span class="st0">"ISL"</span><span class="br0">)</span>
                                        || <span class="br0">(</span>tmp == <span class="st0">"YSL"</span><span class="br0">)</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        cur++;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="co1">// special case 'sugar-'</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>cur == <span class="nu0">0</span><span class="br0">)</span> &amp;&amp; <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur, <span class="nu0">5</span><span class="br0">)</span> == <span class="st0">"SUGAR"</span><span class="br0">)</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">"X"</span>;
                                        sec  $= <span class="st0">"S"</span>;
                                        cur++;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur, <span class="nu0">2</span><span class="br0">)</span> == <span class="st0">"SH"</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        <span class="co1">// germanic</span>
                                        <span class="kw1">if</span> <span class="br0">(</span>smid<span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">4</span>, tmp<span class="br0">)</span> == <span class="st0">"HEIM"</span>
                                                || tmp == <span class="st0">"HOEK"</span>
                                                || tmp == <span class="st0">"HOLM"</span>
                                                || tmp == <span class="st0">"HOLZ"</span><span class="br0">)</span>
                                        <span class="br0">{</span>
                                                prim $= <span class="st0">"S"</span>;
                                                sec  $= <span class="st0">"S"</span>;
                                        <span class="br0">}</span>
                                        <span class="kw1">else</span> <span class="br0">{</span>
                                                prim $= <span class="st0">"X"</span>;
                                                sec  $= <span class="st0">"X"</span>;
                                        <span class="br0">}</span>
                                        cur += <span class="nu0">2</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="co1">// italian &amp; armenian</span>
                                <span class="kw1">if</span> <span class="br0">(</span>smid<span class="br0">(</span>in, cur, <span class="nu0">3</span>, tmp<span class="br0">)</span> == <span class="st0">"SIO"</span>
                                        || tmp == <span class="st0">"SIA"</span>
                                        || <span class="kw7">mid</span><span class="br0">(</span>in, cur, <span class="nu0">4</span><span class="br0">)</span> == <span class="st0">"SIAN"</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        <span class="kw1">if</span> <span class="br0">(</span>!Slavo_Germanic<span class="br0">(</span>in<span class="br0">)</span><span class="br0">)</span>
                                        <span class="br0">{</span>
                                                prim $= <span class="st0">"S"</span>;
                                                sec  $= <span class="st0">"X"</span>;
                                        <span class="br0">}</span>
                                        <span class="kw1">else</span> <span class="br0">{</span>
                                                prim $= <span class="st0">"S"</span>;
                                                sec  $= <span class="st0">"S"</span>;
                                        <span class="br0">}</span>
                                        cur += <span class="nu0">3</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="co1">// german &amp; anglicisations, e.g. 'smith' match 'schmidt', 'snider' match 'schneider'</span>
                                <span class="co1">// also, -sz- in slavic language altho in hungarian it is pronounced 's'</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>
                                                <span class="br0">(</span>cur == <span class="nu0">0</span><span class="br0">)</span>
                                                &amp;&amp; <span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"MNLW"</span>, <span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span>
                                        <span class="br0">)</span>
                                        || <span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"Z"</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">"S"</span>;
                                        sec  $= <span class="st0">"X"</span>;
                                        <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"Z"</span><span class="br0">)</span>      cur += <span class="nu0">2</span>;
                                        <span class="kw1">else</span> cur++;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur, <span class="nu0">2</span><span class="br0">)</span> == <span class="st0">"SC"</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        <span class="co1">// Schlesinger's rule</span>
                                        <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">2</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"H"</span><span class="br0">)</span>
                                        <span class="br0">{</span>
                                                <span class="co1">// dutch origin, e.g. 'school', 'schooner'</span>
                                                <span class="kw1">if</span> <span class="br0">(</span>smid<span class="br0">(</span>in, cur + <span class="nu0">3</span>, <span class="nu0">2</span>, tmp<span class="br0">)</span> == <span class="st0">"OO"</span>
                                                        || tmp == <span class="st0">"ER"</span>
                                                        || tmp == <span class="st0">"EN"</span>
                                                        || tmp == <span class="st0">"UY"</span>
                                                        || tmp == <span class="st0">"ED"</span>
                                                        || tmp == <span class="st0">"EM"</span><span class="br0">)</span>
                                                <span class="br0">{</span>
                                                        <span class="co1">// 'schermerhorn', 'schenker'</span>
                                                        <span class="kw1">if</span> <span class="br0">(</span>smid<span class="br0">(</span>in, cur + <span class="nu0">3</span>, <span class="nu0">2</span>, tmp<span class="br0">)</span> == <span class="st0">"ER"</span>
                                                                || tmp == <span class="st0">"EN"</span><span class="br0">)</span>
                                                        <span class="br0">{</span>
                                                                prim $= <span class="st0">"X"</span>;
                                                                sec  $= <span class="st0">"SK"</span>;
                                                        <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
                                                                prim $= <span class="st0">"SK"</span>;
                                                                sec  $= <span class="st0">"SK"</span>;
                                                        <span class="br0">}</span>
                                                        cur += <span class="nu0">3</span>;
                                                        <span class="kw1">break</span>;
                                                <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
                                                        <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>cur == <span class="nu0">0</span><span class="br0">)</span>
                                                                &amp;&amp; !is_vowel<span class="br0">(</span>in, <span class="nu0">3</span><span class="br0">)</span>
                                                                &amp;&amp; <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">3</span>, <span class="nu0">1</span><span class="br0">)</span> != <span class="st0">"W"</span><span class="br0">)</span><span class="br0">)</span>
                                                        <span class="br0">{</span>
                                                                prim $= <span class="st0">"X"</span>;
                                                                sec  $= <span class="st0">"S"</span>;
                                                        <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
                                                                prim $= <span class="st0">"X"</span>;
                                                                sec  $= <span class="st0">"X"</span>;
                                                        <span class="br0">}</span>
                                                        cur += <span class="nu0">3</span>;
                                                        <span class="kw1">break</span>;
                                                <span class="br0">}</span>
 
                                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"IEY"</span>, <span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">2</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span>
                                                <span class="br0">{</span>
                                                        prim $= <span class="st0">"S"</span>;
                                                        sec  $= <span class="st0">"S"</span>;
                                                        cur += <span class="nu0">3</span>;
                                                        <span class="kw1">break</span>;
                                                <span class="br0">}</span>
                                        <span class="br0">}</span>
 
                                        <span class="co1">// else</span>
                                        prim $= <span class="st0">"SK"</span>;
                                        sec  $= <span class="st0">"SK"</span>;
                                        cur += <span class="nu0">3</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="co1">// french e.g. 'resnais', 'artois'</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>cur == last<span class="br0">)</span>
                                        &amp;&amp; <span class="br0">(</span>
                                                smid<span class="br0">(</span>in, cur<span class="nu0">-2</span>, <span class="nu0">2</span>, tmp<span class="br0">)</span> == <span class="st0">"AI"</span>
                                                || tmp == <span class="st0">"OI"</span>
                                        <span class="br0">)</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">""</span>;
                                        sec  $= <span class="st0">"S"</span>;
                                <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
                                        prim $= <span class="st0">"S"</span>;
                                        sec  $= <span class="st0">"S"</span>;
                                <span class="br0">}</span>
 
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"SZ"</span>, <span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span>
                                        cur += <span class="nu0">2</span>;
                                <span class="kw1">else</span>
                                        cur++;
                                <span class="kw1">break</span>;
 
                        <span class="kw1">case</span> <span class="st0">"T"</span>:
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur, <span class="nu0">4</span><span class="br0">)</span> == <span class="st0">"TION"</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">"X"</span>;
                                        sec  $= <span class="st0">"X"</span>;
                                        cur += <span class="nu0">3</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="kw1">if</span> <span class="br0">(</span>smid<span class="br0">(</span>in, cur, <span class="nu0">3</span>, tmp<span class="br0">)</span> == <span class="st0">"TIA"</span>
                                        || tmp == <span class="st0">"TCH"</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">"X"</span>;
                                        sec  $= <span class="st0">"X"</span>;
                                        cur += <span class="nu0">3</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur, <span class="nu0">2</span><span class="br0">)</span> == <span class="st0">"TH"</span><span class="br0">)</span>
                                        || <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur, <span class="nu0">3</span><span class="br0">)</span> == <span class="st0">"TTH"</span><span class="br0">)</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        <span class="co1">// special case 'thomas', 'thames' or germanic</span>
                                        <span class="kw1">if</span> <span class="br0">(</span>smid<span class="br0">(</span>in, cur + <span class="nu0">2</span>, <span class="nu0">2</span>, tmp<span class="br0">)</span> == <span class="st0">"OM"</span>
                                                || tmp == <span class="st0">"AM"</span>
                                                || smid<span class="br0">(</span>in, <span class="nu0">0</span>, <span class="nu0">4</span>, tmp<span class="br0">)</span> == <span class="st0">"VAN"</span>
                                                || tmp == <span class="st0">"VON"</span>
                                                || <span class="kw7">mid</span><span class="br0">(</span>in, <span class="nu0">0</span>, <span class="nu0">3</span><span class="br0">)</span> == <span class="st0">"SCH"</span><span class="br0">)</span>
                                        <span class="br0">{</span>
                                                prim $= <span class="st0">"T"</span>;
                                                sec  $= <span class="st0">"T"</span>;
                                        <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
                                                prim $= <span class="st0">"O"</span>;
                                                sec  $= <span class="st0">"T"</span>;
                                        <span class="br0">}</span>
                                        cur += <span class="nu0">2</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"TD"</span>, <span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span>
                                        cur += <span class="nu0">2</span>;
                                <span class="kw1">else</span>
                                        cur++;
                                prim $= <span class="st0">"T"</span>;
                                sec  $= <span class="st0">"T"</span>;
                                <span class="kw1">break</span>;
 
                        <span class="kw1">case</span> <span class="st0">"V"</span>:
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"V"</span><span class="br0">)</span>
                                        cur += <span class="nu0">2</span>;
                                <span class="kw1">else</span>
                                        cur++;
                                prim $= <span class="st0">"F"</span>;
                                sec  $= <span class="st0">"F"</span>;
                                <span class="kw1">break</span>;
 
                        <span class="kw1">case</span> <span class="st0">"W"</span>:
                                <span class="co1">// can also be in middle of word</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur, <span class="nu0">2</span><span class="br0">)</span> == <span class="st0">"WR"</span><span class="br0">)</span> <span class="br0">{</span>
                                        prim $= <span class="st0">"R"</span>;
                                        sec  $= <span class="st0">"R"</span>;
                                        cur += <span class="nu0">2</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>cur == <span class="nu0">0</span><span class="br0">)</span>
                                        &amp;&amp; <span class="br0">(</span>is_vowel<span class="br0">(</span>in, cur + <span class="nu0">1</span><span class="br0">)</span>
                                                || <span class="kw7">mid</span><span class="br0">(</span>in, cur, <span class="nu0">2</span><span class="br0">)</span> == <span class="st0">"WH"</span><span class="br0">)</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        <span class="co1">// Wasserman should match Vasserman</span>
                                        <span class="kw1">if</span> <span class="br0">(</span>is_vowel<span class="br0">(</span>in, cur + <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span>
                                        <span class="br0">{</span>
                                                prim $= <span class="st0">"A"</span>;
                                                sec  $= <span class="st0">"F"</span>;
                                        <span class="br0">}</span>
                                        <span class="kw1">else</span> <span class="br0">{</span>
                                                <span class="co1">// need Uomo to match Womo</span>
                                                prim $= <span class="st0">"A"</span>;
                                                sec  $= <span class="st0">"A"</span>;
                                        <span class="br0">}</span>
                                <span class="br0">}</span>
 
                                <span class="co1">// Arnow should match Arnoff</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="br0">(</span>cur == last<span class="br0">)</span>
                                                &amp;&amp; is_vowel<span class="br0">(</span>in, cur - <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span>
                                        || smid<span class="br0">(</span>in, cur - <span class="nu0">1</span>, <span class="nu0">5</span>, tmp<span class="br0">)</span> ==<span class="st0">"EWSKI"</span>
                                        || tmp == <span class="st0">"EWSKY"</span>
                                        || tmp == <span class="st0">"OWSKI"</span>
                                        || tmp == <span class="st0">"OWSKY"</span>
                                        || <span class="kw7">mid</span><span class="br0">(</span>in, <span class="nu0">0</span>, <span class="nu0">3</span><span class="br0">)</span> == <span class="st0">"SCH"</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">""</span>;
                                        sec  $= <span class="st0">"F"</span>;
                                        cur++;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="co1">// polish e.g. 'filipowicz'</span>
                                <span class="kw1">if</span> <span class="br0">(</span>smid<span class="br0">(</span>in, cur, <span class="nu0">4</span>, tmp<span class="br0">)</span> == <span class="st0">"WICZ"</span>
                                        || tmp == <span class="st0">"WITZ"</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">"TS"</span>;
                                        sec  $= <span class="st0">"FX"</span>;
                                        cur += <span class="nu0">4</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
 
                                <span class="co1">// else skip it</span>
                                cur++;
                                <span class="kw1">break</span>;
 
                        <span class="kw1">case</span> <span class="st0">"X"</span>:
                                <span class="co1">// french e.g. breaux</span>
                                <span class="kw1">if</span> <span class="br0">(</span>!<span class="br0">(</span><span class="br0">(</span>cur == last<span class="br0">)</span>
                                        &amp;&amp; <span class="br0">(</span>smid<span class="br0">(</span>in, cur - <span class="nu0">3</span>, <span class="nu0">3</span>, tmp<span class="br0">)</span> == <span class="st0">"IAU"</span>
                                                || tmp == <span class="st0">"EAU"</span>
                                                || smid<span class="br0">(</span>in, cur - <span class="nu0">2</span>, <span class="nu0">2</span>, tmp<span class="br0">)</span> == <span class="st0">"AU"</span>
                                                || tmp == <span class="st0">"OU"</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">"KS"</span>;
                                        sec  $= <span class="st0">"KS"</span>;
                                <span class="br0">}</span>
 
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"CX"</span>, <span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span>
                                        cur += <span class="nu0">2</span>;
                                <span class="kw1">else</span>
                                        cur++;
                                <span class="kw1">break</span>;
 
 
                        <span class="kw1">case</span> <span class="st0">"Z"</span>:
                                <span class="co1">// chinese pinyin e.g. 'zhao'</span>
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"H"</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        prim $= <span class="st0">"J"</span>;
                                        sec  $= <span class="st0">"J"</span>;
                                        cur += <span class="nu0">2</span>;
                                        <span class="kw1">break</span>;
                                <span class="br0">}</span>
                                <span class="kw1">else</span>
                                        <span class="kw1">if</span> <span class="br0">(</span>smid<span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">2</span>, tmp<span class="br0">)</span> == <span class="st0">"ZO"</span>
                                                || tmp == <span class="st0">"ZI"</span>
                                                || tmp == <span class="st0">"ZA"</span>
                                                || <span class="br0">(</span>Slavo_Germanic<span class="br0">(</span>in<span class="br0">)</span>
                                                &amp;&amp; <span class="br0">(</span><span class="br0">(</span>cur &gt; <span class="nu0">0</span><span class="br0">)</span> &amp;&amp; <span class="kw7">mid</span><span class="br0">(</span>in, cur - <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> != <span class="st0">"T"</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>
                                        <span class="br0">{</span>
                                        prim $= <span class="st0">"S"</span>;
                                        sec  $= <span class="st0">"TS"</span>;
                                <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
                                        prim $= <span class="st0">"S"</span>;
                                        sec  $= <span class="st0">"S"</span>;
                                <span class="br0">}</span>
 
                                <span class="kw1">if</span> <span class="br0">(</span><span class="kw7">mid</span><span class="br0">(</span>in, cur + <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">)</span> == <span class="st0">"Z"</span><span class="br0">)</span>
                                        cur += <span class="nu0">2</span>;
                                <span class="kw1">else</span>
                                        cur++;
                                <span class="kw1">break</span>;
 
                        <span class="kw1">default</span>:
                                cur++;
                <span class="br0">}</span>
        <span class="br0">}</span>
 
        res<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> = <span class="kw7">Left</span><span class="br0">(</span>prim, mlen<span class="br0">)</span>;
        res<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> = <span class="kw7">Left</span><span class="br0">(</span>sec, mlen<span class="br0">)</span>;
        <span class="kw1">return</span> res;
<span class="br0">}</span>
</pre></div>
<p><a name="Helper_functions" id="Helper_functions"></a></p>
<h2><span class="mw-headline">Helper functions</span></h2>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="coMULTI">/**
        Same as mid, except that is has a 4th param that will also get the result. &lt;br /&gt;
        Use this for caching the result.
*/</span>
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw5">function</span> <span class="kw4">string</span> smid<span class="br0">(</span><span class="kw6">coerce</span> <span class="kw4">string</span> in, <span class="kw4">int</span> off, <span class="kw4">int</span> <span class="kw7">len</span>, <span class="kw6">out</span> <span class="kw4">string</span> s<span class="br0">)</span>
<span class="br0">{</span>
        s = <span class="kw7">mid</span><span class="br0">(</span>in, off, <span class="kw7">len</span><span class="br0">)</span>;
        <span class="kw1">return</span> s;
<span class="br0">}</span>
 
<span class="coMULTI">/**
        returns true if the character at pos is a vowel.
*/</span>
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw5">function</span> <span class="kw4">bool</span> is_vowel<span class="br0">(</span><span class="kw6">coerce</span> <span class="kw4">string</span> in, <span class="kw4">int</span> pos<span class="br0">)</span>
<span class="br0">{</span>
        <span class="kw1">return</span> <span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span><span class="st0">"AEIOUY"</span>, <span class="kw7">mid</span><span class="br0">(</span>in, pos, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="coMULTI">/**
        helper function for the metaphone algorithm to determain if this word is
        "slave germanic"
*/</span>
<span class="kw6">static</span> <span class="kw6">final</span> <span class="kw5">function</span> <span class="kw4">bool</span> Slavo_Germanic<span class="br0">(</span><span class="kw6">coerce</span> <span class="kw4">string</span> in<span class="br0">)</span>
<span class="br0">{</span>
        <span class="kw1">return</span> <span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span>in, <span class="st0">"W"</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span>
                || <span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span>in, <span class="st0">"K"</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span>
                || <span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span>in, <span class="st0">"CZ"</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span>
                || <span class="br0">(</span><span class="kw7">InStr</span><span class="br0">(</span>in, <span class="st0">"WITZ"</span><span class="br0">)</span> &gt; <span class="nu0">-1</span><span class="br0">)</span>;
<span class="br0">}</span>
</pre></div>
<p><a name="Copyright" id="Copyright"></a></p>
<h2><span class="mw-headline">Copyright</span></h2>
<pre>
   Copyright 2004, Michiel Hendriks &lt;elmuerte@drunksnipers.com&gt;
   All rights reserved.

   This UnrealScript translation is based heavily on the PHP 
   implementation by Stephen Woodbridge &lt;woodbri@swoodbridge.com&gt;, 
   which in turn is based on the C implementation
   by Maurice Aubrey &lt;maurice@hevanet.com&gt;, which in turn
   is based heavily on the C++ implementation by
   Lawrence Philips and incorporates several bug fixes courtesy
   of Kevin Atkinson &lt;kevina@users.sourceforge.net&gt;.

   This module is free software; you may redistribute it and/or
   modify it under the same terms as Perl itself.
</pre>
<p>The <a href="http://www.perl.com/pub/a/language/misc/Artistic.html" class="external text" title="http://www.perl.com/pub/a/language/misc/Artistic.html" rel="nofollow">Perl Artistic License</a>.</p>
<p>Note that that page currently appears to be blank, the Perl Artistic License is almost similar to the <a href="http://www.opensource.org/licenses/artistic-license.php" class="external text" title="http://www.opensource.org/licenses/artistic-license.php" rel="nofollow">Artistic License</a></p>
<p><b>Wormbo:</b> Erm... Perl?</p>
<p><b>El Muerte:</b> Yeah go figure, just pasting a long the license notice. The implementation of Maurice Aubrey has been released under that license, and so is the PHP implementation, thus this implementation should also be released under the same license. The license isn't very restrictive, it allows you to do even more than the <a href="../../../../articles/l/e/s/Legacy%7ELesserOpenUnrealModLicense_2924.html" title="Legacy:LesserOpenUnrealModLicense">LesserOpenUnrealModLicense</a> would do.</p>
<p><a name="Related_Topics" id="Related_Topics"></a></p>
<h2><span class="mw-headline">Related Topics</span></h2>
<ul>
<li><a href="../../../../articles/s/o/u/Legacy%7ESoundEx_2619.html" title="Legacy:SoundEx">SoundEx</a></li>
<li><a href="http://aspell.sourceforge.net/metaphone/" class="external text" title="http://aspell.sourceforge.net/metaphone/" rel="nofollow">More about metaphone</a> â€“ and implementations in other languages</li>
</ul>

<!-- 
NewPP limit report
Preprocessor node count: 12/1000000
Post-expand include size: 15/2097152 bytes
Template argument size: 0/2097152 bytes
#ifexist count: 0/100
-->
<div class="printfooter">
</div>
	    <div id="catlinks"><p class='catlinks'><a href="../../../../articles/c/a/t/Special%7ECategories_101d.html" title="Special:Categories">Category</a>: <span dir='ltr'><a href="../../../../articles/l/e/g/Category%7ELegacy_Algorithm_8f6a.html" title="Category:Legacy Algorithm">Legacy Algorithm</a></span></p></div>	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-legacy"
	       class="selected"	       ><a href="../../../../articles/d/o/u/Legacy%7EDoubleMetaPhone_c5cb.html">Legacy</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../../articles/d/o/u/Legacy_talk%7EDoubleMetaPhone_e122.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://wiki.beyondunreal.com/Legacy:DoubleMetaPhone">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../../misc/uewiki.png);"
	    href="../../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-mainpage"><a href="../../../../index.html">Main Page</a></li>
	     	      <li id="n-portal"><a href="../../../../articles/c/o/m/Unreal_Wiki%7ECommunity_Portal_3311.html">Community portal</a></li>
	     	      <li id="n-help"><a href="../../../../articles/c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="../../../../../COPYING.html"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt='Attribution-Noncommercial-Share Alike 3.0' /></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 13:15, 19 August 2004 by Anonymous user(s) of Unreal Wiki. Based on work by Unreal Wiki user(s) <a href="../../../../articles/w/o/r/User%7EWormbo_7d13.html" title="User:Wormbo">Wormbo</a>.</li>	  <li id="f-copyright">Licensed as <a href="../../../../articles/c/o/p/Unreal_Wiki%7ECopyrights_e561.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>	  <li id="f-about"><a href="../../../../articles/a/b/o/Unreal_Wiki%7EAbout_9ce6.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>	  <li id="f-disclaimer"><a href="../../../../articles/g/e/n/Unreal_Wiki%7EGeneral_disclaimer_a0a2.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>
