<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- headlinks removed -->
	<link rel="shortcut icon" href="../../../../misc/uewiki-favicon.png"/>
    <title>Legacy:Delegate - Unreal Wiki</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../../skins/offline/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/md5.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/utf8.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/lookup.js"></script>
    <script type="text/javascript" src="../../../../articles/-/_/_/-.html"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../../articles/c/o/m/MediaWiki%7ECommon.css_d42e.html";
@import "../../../../articles/m/o/n/MediaWiki%7EMonobook.css_fb19.html";
@import "../../../../articles/-/_/_/-.html";
/*]]>*/</style>          </head>
  <body
    class="ns-100">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Legacy:Delegate</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</h3>
	    <div id="contentSub"></div>
	    	    	    <!-- start content -->
	    <p><b>Delegates</b> are a new <a href="../../../../articles/u/n/r/Legacy%7EUnrealScript_a9c5.html" title="Legacy:UnrealScript">UnrealScript</a> concept in <a href="../../../../articles/u/t/2/Legacy%7EUT2003_f97b.html" class="mw-redirect" title="Legacy:UT2003">UT2003</a> and beyond. They are (more or less) placeholders for functions. They are particularly used in GUI components: for example, a delegate for the clicking action can be assigned to a specific function without having to re-script the class.</p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#Delegate_Syntax"><span class="tocnumber">1</span> <span class="toctext">Delegate Syntax</span></a></li>
<li class="toclevel-1"><a href="#Calling_Delegates"><span class="tocnumber">2</span> <span class="toctext">Calling Delegates</span></a></li>
<li class="toclevel-1"><a href="#Delegate_Assignment"><span class="tocnumber">3</span> <span class="toctext">Delegate Assignment</span></a></li>
<li class="toclevel-1"><a href="#Delegate_testing"><span class="tocnumber">4</span> <span class="toctext">Delegate testing</span></a></li>
<li class="toclevel-1"><a href="#Discussion"><span class="tocnumber">5</span> <span class="toctext">Discussion</span></a></li>
<li class="toclevel-1"><a href="#Related_Topics"><span class="tocnumber">6</span> <span class="toctext">Related Topics</span></a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script>
<p><a name="Delegate_Syntax" id="Delegate_Syntax"></a></p>
<h2><span class="mw-headline">Delegate Syntax</span></h2>
<p>Delegates are declared just like functions, with the small difference, that usually they don't have a function body.</p>
<pre>
&lt;<i>delegate modifiers</i>&gt; <b>delegate</b> &lt;<i>return type</i>&gt; &lt;<i>delegate name</i>&gt; 
 <b>(</b>&lt;<i>parameter modifier</i>&gt; &lt;<i>type</i>&gt; &lt;<i>parameter name</i>&gt;<b>,</b> ...<b>);</b>
</pre>
<dl>
<dt>&lt;delegate modifiers&gt;&#160;</dt>
<dd>Keywords that specify aspects of the delegate's overall nature and behaviour. These modifiers only affect the delegate itself. When you assign another function to the delegate that functions modifiers will replace the delegate's original modifiers. See <a href="../../../../articles/f/u/n/Legacy%7EFunction_Syntax_b3b7.html" title="Legacy:Function Syntax">Function Syntax</a> for a list of possible modifiers.</dd>
<dt>&lt;return type&gt;&#160;</dt>
<dd>The <a href="../../../../articles/v/a/r/Legacy%7EVariable_Type_ce04.html" title="Legacy:Variable Type">variable type</a> the function returns. You can't return static arrays due to the way they have to be declared. However, you can use an <i>out</i> variable in this case.</dd>
<dt>&lt;delegate name&gt;&#160;</dt>
<dd>The name of the delegate, chosen by the coder. For advice on naming conventions see <a href="../../../../articles/c/o/d/Legacy%7ECoding_Guidelines_5ef3.html" title="Legacy:Coding Guidelines">Coding Guidelines</a>.</dd>
<dt>&lt;parameter modifier&gt;&#160;</dt>
<dd>Changes the nature of individual parameters. See <a href="../../../../articles/f/u/n/Legacy%7EFunction_Syntax_b3b7.html" title="Legacy:Function Syntax">Function Syntax</a> for a list of possible parameter modifiers.</dd>
<dt>&lt;type&gt;&#160;</dt>
<dd>The <a href="../../../../articles/v/a/r/Legacy%7EVariable_Type_ce04.html" title="Legacy:Variable Type">variable type</a> of each parameter.</dd>
</dl>
<p>Examples:</p>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="kw5">delegate</span> <span class="kw4">bool</span> MyDelegate<span class="br0">(</span><span class="kw4">bool</span> FirstParam , <span class="kw6">out</span> <span class="kw4">int</span> SecondParam, <span class="kw6">optional</span> <span class="kw4">string</span> ThirdParam<span class="br0">)</span>;
 
<span class="kw6">simulated</span> <span class="kw5">delegate</span> MyDelegateWithCode<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
  <span class="kw7">log</span><span class="br0">(</span><span class="st0">"My delegate with code was executed."</span><span class="br0">)</span>;
<span class="br0">}</span>
</pre></div>
<p>This second example might be useful if you want a delegate with default code which should be executed clientside. The simulated keyword <i>only</i> applies to the delegate itself. It will have no effect if the function you assign to the delegate is not simulated.</p>
<p><a name="Calling_Delegates" id="Calling_Delegates"></a></p>
<h2><span class="mw-headline">Calling Delegates</span></h2>
<p>Delegates are called like regular functions:</p>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="kw5">local</span> <span class="kw4">bool</span> bReturn, bHaveIt;
<span class="kw5">local</span> <span class="kw4">int</span> Number;
 
MyDelegate<span class="br0">(</span><span class="kw9">True</span>, <span class="nu0">34</span>, <span class="st0">"Hello World!"</span><span class="br0">)</span>; <span class="co1">// parameters passed as literals</span>
MyDelegate<span class="br0">(</span>bHaveIt, Number<span class="br0">)</span>;          <span class="co1">// parameters passed as variables</span>
bReturn = MyDelegate<span class="br0">(</span><span class="kw9">False</span>, Number, <span class="st0">"Hi there!"</span><span class="br0">)</span>; <span class="co1">// save delegate's return value in another variable</span>
</pre></div>
<p>When a delegate is called without having a function assigned to it, the delegate's default function body will be used. If the delegate doesn't have a function body, nothing will happen.</p>
<p><b>Note:</b> If a function of an object that no longer exists is assigned to a delegate, calling this delegate will result in a crash.</p>
<p><b>Daid303:</b> Does that crash also happens when the function is in actor?</p>
<p><b>Wormbo:</b> I don't know. That's info from the UDN page about delegates.</p>
<p><b>Evolution:</b> Yes this would cause a crash regardless of where the delegate is declared. The compiler is supposed to catch all types of delegate assignment which might result in a delegate's associated function not actually existing, but this doesn't work 100% in UT2003. 99% of these compiler bugs are found with delegate assignments from subobject blocks in defaultproperties, so if you're experiencing a crash indicating the 'function blah couldn't be found' try moving your delegate assignment out of defaultproperties into the first function that will be called on your class (InitComponent(), for instance in the GUI). The other way this can happen is if the function you're assigning to the delegate exists in another package. If the function is removed from the other package, and the package is recompiled, but the code containing the delegate assignment *isn't* recompiled, then you'll get also get this crash.</p>
<p><a name="Delegate_Assignment" id="Delegate_Assignment"></a></p>
<h2><span class="mw-headline">Delegate Assignment</span></h2>
<p>To assign a function to a delegate property simply use the syntax:</p>
<pre>
DelegateName = FunctionName;
</pre>
<p>(This also works in a class's <a href="../../../../articles/d/e/f/Legacy%7EDefault_Properties_bc11.html" title="Legacy:Default Properties">default properties</a>.)</p>
<p>You can only assign functions to a delegate that have the same return type and the same number and type of parameters. Optional delegate parameters have to be optional for the function as well. Other parameter modifiers such as <b>out</b> don't have to match. Those modifiers will be replaced by the corresponding modifiers of the function assigned to the delegate.</p>
<p>To restore the delegate's default behavior simply assign None to it. You will have to do that if the function assigned to the delegate belongs to an object you want to be garbage-collected, because for non-actor objects delegates count as references to the object just like a direct object reference.</p>
<p>If an actor has a function assigned to a delegate and the actor is destroyed, the delegate is automatically set to None, just like a direct Actor reference.</p>
<p><a name="Delegate_testing" id="Delegate_testing"></a></p>
<h2><span class="mw-headline">Delegate testing</span></h2>
<p>Is is possible to examine what a delegate is set to and test it?</p>
<p><a name="Discussion" id="Discussion"></a></p>
<h2><span class="mw-headline">Discussion</span></h2>
<p><b>Tarquin:</b> If I understand the UDN example correctly, a delegate is a sort of placeholder in a class. When you have an object of that class, you can stick any function you like in the placeholder.</p>
<p><b>Wormbo:</b> Think of it as a variable that holds a reference to an object of type "function". You can assign objects to it and use them (i.e. execute the function). You can even give it a default value, i.e. a default function body, default function modifiers and default parameter modifiers. Like variables of type Class or arrays where you can further specify the type of class or array you can specify details about the functions that can be assigned to a delegate property.</p>
<p><b>Foxpaw:</b> I don't suppose there's any way to use delegates in structs, or make arrays of delegates? If there was, you could make a nifty adaptive timeslicing scheme that would keep your framerate high no matter what. (well, okay, not no matter what, but no matter what was in your script)</p>
<p><b>dataangel:</b> Unfortunately you can't just imagine delegates as being variables that hold references to function objects because as far as I know ucc will give you compile errors whenever you try to use a delegate as a function parameter. Perhaps this is a bug? It'd be really useful to be able to pass functions or delegates as parameters.</p>
<p><b>Xian:</b> If you can't quit picture Wormbo's description, I think you could rather imagine it as virtually moving a function body in another class without actually modifying it or subclassing it...</p>
<p><a name="Related_Topics" id="Related_Topics"></a></p>
<h2><span class="mw-headline">Related Topics</span></h2>
<ul>
<li><a href="../../../../articles/u/n/r/Legacy%7EUnrealScript_a9c5.html" title="Legacy:UnrealScript">UnrealScript</a>
<ul>
<li><a href="../../../../articles/f/u/n/Legacy%7EFunction_Syntax_b3b7.html" title="Legacy:Function Syntax">Function Syntax</a></li>
<li><a href="../../../../articles/d/e/s/Legacy%7EDestroying_Objects_45cb.html" title="Legacy:Destroying Objects">Destroying Objects</a></li>
</ul>
</li>
<li><a href="http://udn.epicgames.com/Two/UnrealScriptDelegates" class="extiw" title="udn2:UnrealScriptDelegates">udn2:UnrealScriptDelegates</a></li>
</ul>

<!-- 
NewPP limit report
Preprocessor node count: 13/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
#ifexist count: 0/100
-->
<div class="printfooter">
</div>
	    	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-legacy"
	       class="selected"	       ><a href="../../../../articles/d/e/l/Legacy%7EDelegate_60b8.html">Legacy</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../../articles/d/e/l/Legacy_talk%7EDelegate_0023.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://wiki.beyondunreal.com/Legacy:Delegate">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../../misc/uewiki.png);"
	    href="../../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-mainpage"><a href="../../../../index.html">Main Page</a></li>
	     	      <li id="n-portal"><a href="../../../../articles/c/o/m/Unreal_Wiki%7ECommunity_Portal_3311.html">Community portal</a></li>
	     	      <li id="n-help"><a href="../../../../articles/c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="../../../../../COPYING.html"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt='Attribution-Noncommercial-Share Alike 3.0' /></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 18:11, 25 March 2007 by Anonymous user(s) of Unreal Wiki. </li>	  <li id="f-copyright">Licensed as <a href="../../../../articles/c/o/p/Unreal_Wiki%7ECopyrights_e561.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>	  <li id="f-about"><a href="../../../../articles/a/b/o/Unreal_Wiki%7EAbout_9ce6.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>	  <li id="f-disclaimer"><a href="../../../../articles/g/e/n/Unreal_Wiki%7EGeneral_disclaimer_a0a2.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>
