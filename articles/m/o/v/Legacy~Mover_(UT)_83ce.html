<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- headlinks removed -->
	<link rel="shortcut icon" href="../../../../misc/uewiki-favicon.png"/>
    <title>Legacy:Mover (UT) - Unreal Wiki</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../../skins/offline/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/md5.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/utf8.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/lookup.js"></script>
    <script type="text/javascript" src="../../../../articles/-/_/_/-.html"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../../articles/c/o/m/MediaWiki%7ECommon.css_d42e.html";
@import "../../../../articles/m/o/n/MediaWiki%7EMonobook.css_fb19.html";
@import "../../../../articles/-/_/_/-.html";
/*]]>*/</style>          </head>
  <body
    class="ns-100">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Legacy:Mover (UT)</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</h3>
	    <div id="contentSub"></div>
	    	    	    <!-- start content -->
	    <div class="infobox infobox-class infobox-legacy"><a href="../../../../articles/u/t/_/Legacy%7EUT_9cbd.html" class="mw-redirect" title="Legacy:UT">UT</a>&#160;:: <a href="../../../../articles/a/c/t/Legacy%7EActor_%28UT%29_b661.html" title="Legacy:Actor (UT)">Actor (UT)</a> &gt;&gt; <a href="../../../../articles/b/r/u/Legacy%7EBrush_03bb.html" title="Legacy:Brush">Brush</a> &gt;&gt; Mover (Package: Engine)</div>
<p>(see <a href="../../../../articles/m/o/v/Legacy%7EMover_6aa5.html" title="Legacy:Mover">Mover</a> for the UT2003 version of this class)</p>
<p>In UT <b>Movers</b> are brushes that move. They are not part of the <a href="../../../../articles/b/s/p/Legacy%7EBSP_220f.html" title="Legacy:BSP">BSP</a>, but look as if they are to the player. Use them to create doors, elevators and other parts of dynamic level geometry. This page describes the class in detail.</p>
<p>Terminology: A mover is said to "open" when it moves from key 0 to the last defined key (<i>NumKeys-1</i> for the technically-minded). Movement in the opposite direction is called "closing". Some subclasses of mover have the ability to open partially.</p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#Properties"><span class="tocnumber">1</span> <span class="toctext">Properties</span></a>
<ul>
<li class="toclevel-2"><a href="#Mover_Group"><span class="tocnumber">1.1</span> <span class="toctext">Mover Group</span></a></li>
<li class="toclevel-2"><a href="#MoverSounds_Group"><span class="tocnumber">1.2</span> <span class="toctext">MoverSounds Group</span></a></li>
<li class="toclevel-2"><a href="#UnrealScript-Only_Properties"><span class="tocnumber">1.3</span> <span class="toctext">UnrealScript-Only Properties</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Enums"><span class="tocnumber">2</span> <span class="toctext">Enums</span></a>
<ul>
<li class="toclevel-2"><a href="#EMoverEncroachType"><span class="tocnumber">2.1</span> <span class="toctext">EMoverEncroachType</span></a></li>
<li class="toclevel-2"><a href="#EMoverGlideType"><span class="tocnumber">2.2</span> <span class="toctext">EMoverGlideType</span></a></li>
<li class="toclevel-2"><a href="#EBumpType"><span class="tocnumber">2.3</span> <span class="toctext">EBumpType</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#States"><span class="tocnumber">3</span> <span class="toctext">States</span></a></li>
<li class="toclevel-1"><a href="#Discussion"><span class="tocnumber">4</span> <span class="toctext">Discussion</span></a></li>
<li class="toclevel-1"><a href="#Subclasses"><span class="tocnumber">5</span> <span class="toctext">Subclasses</span></a></li>
<li class="toclevel-1"><a href="#Related_Topics"><span class="tocnumber">6</span> <span class="toctext">Related Topics</span></a></li>
<li class="toclevel-1"><a href="#Mover_Tutorials"><span class="tocnumber">7</span> <span class="toctext">Mover Tutorials</span></a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script>
<p><a name="Properties" id="Properties"></a></p>
<h2><span class="mw-headline">Properties</span></h2>
<p><a name="Mover_Group" id="Mover_Group"></a></p>
<h3><span class="mw-headline">Mover Group</span></h3>
<dl>
<dt>bool bDamageTriggered&#160;</dt>
<dd>The mover is triggered by taking damage. Use for doors that open when you shoot then, for example.</dd>
<dt>bool bDynamicLightMover&#160;</dt>
<dd>Setting this to True will cause the mover to change the way it is lit as it moves. This is very useful when a mover is going between areas with different brightnesses or colors of light. Note that BrushRayTraceKey is unused if the mover is dynamically lit.<br />
The process isn't perfect by any means, and often has dirty shadows and flickering between different lightings on the brush. However, it does eliminate the annoying black patches on the undersides of lifts and the sides of doors. In addition this takes quite a bit more CPU power than normal. Use this only in areas where it is needed to make the mover look decent and processing power can be spared.</dd>
<dt>byte BrushRaytraceKey (const)&#160;</dt>
<dd>This should be set to the number of a keyframe. When the map's lighting is rebuilt, the polys of the mover will always be lit as if it is in this position. (Naturally, this property is irrelevant if you have bDynamicLightMover = True.)</dd>
<dt>bool bSlave&#160;</dt>
<dd>This mover is a slave. It will follow another mover. See <a href="../../../../articles/c/o/m/Legacy%7ECompound_Movers_6338.html" title="Legacy:Compound Movers">Compound Movers</a>.</dd>
<dt>bool bTriggerOnceOnly&#160;</dt>
<dd>Go dormant after first trigger. Note that this doesn't work for all states (see <i>Mover States</i> below).</dd>
<dt>name BumpEvent&#160;</dt>
<dd>The name of an <a href="../../../../articles/e/v/e/Legacy%7EEvent_714d.html" title="Legacy:Event">event</a> to fire when any something bumps this mover. This allows you to have movers that can be either triggered or bumped: you have the BumpEvent trigger the mover's own Tag.</dd>
<dt>EBumpType BumpType&#160;</dt>
<dd>Determines what sort of things are counted as bumping this mover. Other things that bump it will be ignored.</dd>
<dt>bool bUseTriggered&#160;</dt>
<dd>This mover will be triggered by player grab.</dd>
<dt>float DamageThreshold&#160;</dt>
<dd>Minimum damage to trigger. Works with bDamageTriggered.</dd>
<dt>float DelayTime&#160;</dt>
<dd>Delay before starting to open.</dd>
<dt>int EncroachDamage&#160;</dt>
<dd>How much to damage encroached actors.</dd>
<dt>byte KeyNum&#160;</dt>
<dd>The number of the key that the mover is curently set to. Using the <a href="../../../../articles/b/r/u/Legacy%7EBrush_Context_Menu_e135.html" title="Legacy:Brush Context Menu">Brush Context Menu</a> -&gt; Mover -&gt; Key command is the same as changing this value. See <a href="../../../../articles/k/e/y/Legacy%7EKeyframe_b7a3.html" title="Legacy:Keyframe">Keyframe</a> for more on this.</dd>
<dt>EMoverEncroachType MoverEncroachType&#160;</dt>
<dd>Tells the mover what to do when it hits an actor while trying to move. For example, when a lift returns to the low position and hits a player's head. (see <i>EMoverEncroachType</i> enum below)</dd>
<dt>EMoverGlideType MoverGlideType&#160;</dt>
<dd>How the mover moves from one position to another. (see <i>EMoverGlideType</i> enum below)</dd>
<dt>float MoveTime&#160;</dt>
<dd>Time to spend moving between keyframes.</dd>
<dt>byte NumKeys (const)&#160;</dt>
<dd>This is the number of different positions (known as <i>keys</i>) that the mover has. The maximum possible value seems to be 64.</dd>
<dt>float OtherTime&#160;</dt>
<dd>TriggerPound stay-open time.</dd>
<dt>name PlayerBumpEvent&#160;</dt>
<dd>Optional event to cause when the player bumps the mover.</dd>
<dt>name ReturnGroup&#160;</dt>
<dd>if none, same as tag</dd>
<dt>float StayOpenTime&#160;</dt>
<dd>How long to remain open before closing.</dd>
<dt>byte WorldRaytraceKey (const)&#160;</dt>
<dd>Set this to the number of the key you want the mover to affect the world at. Basically, whatever you set this to is where the mover will block light. A neat trick you can do with this property is to set it to an unused key which you have positioned somewhere outside your map. That way the mover will not cast a shadow at all. This can alleviate the annoying problem of black patches underneath movers.</dd>
</dl>
<p><a name="MoverSounds_Group" id="MoverSounds_Group"></a></p>
<h3><span class="mw-headline">MoverSounds Group</span></h3>
<p>The properties in this section set the sounds played by the mover as it travels.</p>
<dl>
<dt>Sound ClosedSound&#160;</dt>
<dd>When finish closing.</dd>
<dt>Sound ClosingSound&#160;</dt>
<dd>When start closing.</dd>
<dt>Sound MoveAmbientSound&#160;</dt>
<dd>Optional ambient sound when moving.</dd>
<dt>Sound OpenedSound&#160;</dt>
<dd>When finished opening.</dd>
<dt>Sound OpeningSound&#160;</dt>
<dd>When start opening.</dd>
</dl>
<p>The sounds in UT packages like DoorsMod are designed with this system in mind, and are usually found in sets of 3, eg "md2start", "md2loop", "md2end". Use start sounds with Opening, end sounds with Opened and loop with ambient.</p>
<p>Only MoveAmbientSound is affected by the value of Sounds -&gt; SoundVolume. The others play at full volume. (Some scripting would probably fix this for a custom class, since the Mover calls PlaySound, and this has an optional volume parameter.)</p>
<p><a name="UnrealScript-Only_Properties" id="UnrealScript-Only_Properties"></a></p>
<h3><span class="mw-headline">UnrealScript-Only Properties</span></h3>
<dl>
<dt>byte PrevKeyNum&#160;</dt>
<dd>Previous keyframe.</dd>
<dt><a href="../../../../articles/a/c/t/Legacy%7EActor_%28UT%29_b661.html" title="Legacy:Actor (UT)">Actor (UT)</a> SavedTrigger&#160;</dt>
<dd>Who we were triggered by.</dd>
<dt>int numTriggerEvents&#160;</dt>
<dd>Number of times triggered (count down to untrigger)</dd>
<dt>Mover Leader</dt>
<dt>Mover Follower&#160;</dt>
<dd>For having multiple movers return together. (see <a href="../../../../articles/c/o/m/Legacy%7ECompound_Movers_6338.html" title="Legacy:Compound Movers">Compound Movers</a>)</dd>
<dt>vector KeyPos[8]&#160;</dt>
<dt>rotator KeyRot[8]&#160;</dt>
<dt>vector BasePos, OldPos, OldPrePivot, SavedPos&#160;</dt>
<dt>rotator BaseRot, OldRot, SavedRot&#160;</dt>
<dt><a href="../../../../articles/n/a/v/Legacy%7ENavigationPoint_%28UT%29_23b9.html" title="Legacy:NavigationPoint (UT)">NavigationPoint (UT)</a> myMarker&#160;</dt>
<dt><a href="../../../../articles/a/c/t/Legacy%7EActor_%28UT%29_b661.html" title="Legacy:Actor (UT)">Actor (UT)</a> TriggerActor&#160;</dt>
<dt><a href="../../../../articles/a/c/t/Legacy%7EActor_%28UT%29_b661.html" title="Legacy:Actor (UT)">Actor (UT)</a> TriggerActor2&#160;</dt>
<dt><a href="../../../../articles/p/a/w/Legacy%7EPawn_%28UT%29_69ef.html" title="Legacy:Pawn (UT)">Pawn (UT)</a> WaitingPawn&#160;</dt>
<dt>bool bOpening, bDelaying, bClientPause&#160;</dt>
<dt>bool bPlayerOnly&#160;</dt>
<dt><a href="../../../../articles/t/r/i/Legacy%7ETrigger_c58a.html" title="Legacy:Trigger">Trigger</a> RecommendedTrigger&#160;</dt>
<dt>vector SimOldPos&#160;</dt>
<dt>int SimOldRotPitch, SimOldRotYaw, SimOldRotRoll&#160;</dt>
<dt>vector SimInterpolate&#160;</dt>
<dt>vector RealPosition&#160;</dt>
<dt>rotator RealRotation&#160;</dt>
<dt>int ClientUpdate&#160;</dt>
</dl>
<p><a name="Enums" id="Enums"></a></p>
<h2><span class="mw-headline">Enums</span></h2>
<p><a name="EMoverEncroachType" id="EMoverEncroachType"></a></p>
<h3><span class="mw-headline">EMoverEncroachType</span></h3>
<dl>
<dt>ME_StopWhenEncroach&#160;</dt>
<dd>Stop when we hit an actor.</dd>
<dt>ME_ReturnWhenEncroach&#160;</dt>
<dd>Return to previous position when we hit an actor.</dd>
<dt>ME_CrushWhenEncroach&#160;</dt>
<dd>Crush the poor helpless actor.</dd>
<dt>ME_IgnoreWhenEncroach&#160;</dt>
<dd>Ignore encroached actors.</dd>
</dl>
<p><a name="EMoverGlideType" id="EMoverGlideType"></a></p>
<h3><span class="mw-headline">EMoverGlideType</span></h3>
<dl>
<dt>MV_MoveByTime&#160;</dt>
<dd>Move linearly.</dd>
<dt>MV_GlideByTime&#160;</dt>
<dd>Move with smooth acceleration.</dd>
</dl>
<p><a name="EBumpType" id="EBumpType"></a></p>
<h3><span class="mw-headline">EBumpType</span></h3>
<dl>
<dt>BT_PlayerBump&#160;</dt>
<dd>Can only be bumped by player.</dd>
<dt>BT_PawnBump&#160;</dt>
<dd>Can be bumped by any pawn.</dd>
<dt>BT_AnyBump&#160;</dt>
<dd>Cany be bumped by any solid actor.</dd>
</dl>
<p><a name="States" id="States"></a></p>
<h2><span class="mw-headline">States</span></h2>
<p>The mover states, set in the <a href="../../../../articles/i/n/i/Legacy%7EInitialState_868c.html" title="Legacy:InitialState">InitialState</a> property determine:</p>
<ul>
<li>how the mover is activated</li>
<li>how it behaves once it has been activated</li>
</ul>
<p>Note that other settings affect activation behavior too:</p>
<ul>
<li>the BumpType property affects <i>who</i> can activate it</li>
<li>bDamageTriggered .....</li>
<li>bUseTriggered ....</li>
</ul>
<p>The "OpenTimed" states open the mover (from key 0 to the last key), wait then close and sleep again. Only the states with "Trigger" in the name respond to triggering.</p>
<dl>
<dt>None</dt>
<dd>The mover will not move through its keys, unless it is a slave.</dd>
</dl>
<dl>
<dt>BumpButton</dt>
</dl>
<p>This is very similar to BumpOpenTimed, but designed to be used for a button which controls another mover which is set to TriggerOpenTimed (a door, for example).</p>
<p>Use the button mover's <b>BumpEvent</b> property to tie it to the door mover's Events -&gt; Tag. When the button is bumped, it moves and so does the door. The button is then frozen, and it will only return when the door has successfully closed. This is pretty much just a nice cosmetic touch: the button won't return until it can be used again.</p>
<p>In brief:</p>
<ul>
<li>The button mover's StayOpenTime is ignored.</li>
<li>If the door is prevented from closing (by a player, say), the button will not return</li>
<li>Once the door mover has finished closing, the button mover is closed.</li>
</ul>
<p><br /></p>
<dl>
<dt>BumpOpenTimed</dt>
<dd>The mover reacts to being touched. Set <b>BumpType</b> to determine what counts as touching it. Used for buttons (though see BumpButton for special cases). Can be used for doors, although TriggerControl is better.</dd>
</dl>
<dl>
<dt>StandOpenTimed</dt>
<dd>The mover reacts when the engine detects a player has stood on it. Used for lifts.</dd>
</dl>
<dl>
<dt>TriggerControl</dt>
</dl>
<p>The mover opens while the trigger is active, and closes when unTriggered – ie if set up with a simple Trigger actor, as soon as the player steps out from the Trigger's radius the mover will start closing again.</p>
<p>Example: the door to the redeemer area in UT's DM-StalwartXL and CTF-Gauntlet. (note to anyone reading this: the <a href="../../../../articles/e/v/e/Legacy%7EEvent_714d.html" title="Legacy:Event">Event</a> page needs to explain that events can last for a duration, as in this case – there's an UnTrigger function too when a player steps out of a Trigger actor's radius.)</p>
<p><br /></p>
<dl>
<dt>TriggerOpenTimed</dt>
<dd>When triggered, the mover opens fully, waits and closes again. For related topics on triggering see the links section below.</dd>
</dl>
<dl>
<dt>TriggerPound</dt>
</dl>
<p>Similar to TriggerControl, but used for movers that open and close continuously. As soon as the corresponding trigger is activated, a mover using this state will begin the following cycle:</p>
<ol>
<li>Opens as usual, with its speed determined by the MoveTime property.</li>
<li>Pauses for a time equal to the OtherTime property.</li>
<li>Closes as usual, with its speed determined by the MoveTime property.</li>
<li>Pauses for a time equal to the StayOpenTime property.</li>
</ol>
<p>The mover loops through these actions until whatever activated the trigger leaves the trigger's collision area. When this happens, the mover immediately closes and remains at rest until triggered again.</p>
<p><br /></p>
<dl>
<dt>TriggerToggle</dt>
<dd>The mover will open when triggered and stop at the open position (the last keyframe). The next time it is triggered, it will close, and so on. Note that bTriggerOnceOnly has no effect in this state.</dd>
</dl>
<p><a name="Discussion" id="Discussion"></a></p>
<h2><span class="mw-headline">Discussion</span></h2>
<p><b>Xian:</b> while trying to see how I can misuse brushes in a better and more efficient way since I don't like the way Epic coded UT as a whole, I found this code in Engine.Mover.FindTriggerActor():</p>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="kw1">ForEach</span> AllActors<span class="br0">(</span><span class="kw5">class</span> <span class="st0">'Actor'</span>, A<span class="br0">)</span>
                <span class="kw1">if</span> <span class="br0">(</span> <span class="br0">(</span>A.<span class="kw5">Event</span> == Tag<span class="br0">)</span> &amp;&amp; <span class="br0">(</span>A.<span class="kw7">IsA</span><span class="br0">(</span><span class="st0">'Trigger'</span><span class="br0">)</span> || A.<span class="kw7">IsA</span><span class="br0">(</span><span class="st0">'Mover'</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">)</span>
                <span class="br0">{</span>
                        <span class="kw1">if</span> <span class="br0">(</span> A.<span class="kw7">IsA</span><span class="br0">(</span><span class="st0">'Counter'</span><span class="br0">)</span> || A.<span class="kw7">IsA</span><span class="br0">(</span><span class="st0">'Pawn'</span><span class="br0">)</span> <span class="br0">)</span>
                        <span class="br0">{</span>
                                bPlayerOnly = <span class="kw9">true</span>;
                                <span class="kw1">return</span>; <span class="co1">//FIXME - handle counters</span>
                        <span class="br0">}</span>
                      <span class="br0">[</span>...<span class="br0">]</span>
                <span class="br0">}</span>
</pre></div>
<p>How can a Trigger/Mover be a Pawn&#160;? This seems like a nice logical error. Although the consequences may not be huge (since altogether the main triggering mechanism is done by movers/trigger classes), I just don't see how they could miss this... although it is trivial, check the next part:</p>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
bPlayerOnly = <span class="br0">(</span> TriggerActor.<span class="kw7">IsA</span><span class="br0">(</span><span class="st0">'Trigger'</span><span class="br0">)</span> &amp;&amp; <span class="br0">(</span>Trigger<span class="br0">(</span>TriggerActor<span class="br0">)</span>.<span class="me1">TriggerType</span> == TT_PlayerProximity<span class="br0">)</span> <span class="br0">)</span>;
        <span class="kw1">if</span> <span class="br0">(</span> bPlayerOnly &amp;&amp; <span class="br0">(</span> TriggerActor2 != <span class="kw9">None</span><span class="br0">)</span> <span class="br0">)</span>
        <span class="br0">{</span>
                bPlayerOnly = <span class="br0">(</span> TriggerActor2.<span class="kw7">IsA</span><span class="br0">(</span><span class="st0">'Trigger'</span><span class="br0">)</span> &amp;&amp; <span class="br0">(</span>Trigger<span class="br0">(</span>TriggerActor<span class="br0">)</span>.<span class="me1">TriggerType</span> == TT_PlayerProximity<span class="br0">)</span> <span class="br0">)</span>;
                <span class="kw1">if</span> <span class="br0">(</span> !bPlayerOnly <span class="br0">)</span>
                <span class="br0">{</span>
                        A = TriggerActor;
                        TriggerActor = TriggerActor2;
                        TriggerActor2 = A;
                <span class="br0">}</span>
        <span class="br0">}</span>
</pre></div>
<p>My guess is the correct version is:</p>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
bPlayerOnly = <span class="br0">(</span> TriggerActor.<span class="kw7">IsA</span><span class="br0">(</span><span class="st0">'Trigger'</span><span class="br0">)</span> &amp;&amp; <span class="br0">(</span>Trigger<span class="br0">(</span>TriggerActor<span class="br0">)</span>.<span class="me1">TriggerType</span> == TT_PlayerProximity<span class="br0">)</span> <span class="br0">)</span>;
        <span class="kw1">if</span> <span class="br0">(</span> bPlayerOnly &amp;&amp; <span class="br0">(</span> TriggerActor2 != <span class="kw9">None</span><span class="br0">)</span> <span class="br0">)</span>
        <span class="br0">{</span>
                <span class="co1">// Xian correction: TriggerActor to TriggerActor2 :)</span>
                bPlayerOnly = <span class="br0">(</span> TriggerActor2.<span class="kw7">IsA</span><span class="br0">(</span><span class="st0">'Trigger'</span><span class="br0">)</span> &amp;&amp; <span class="br0">(</span>Trigger<span class="br0">(</span>TriggerActor2<span class="br0">)</span>.<span class="me1">TriggerType</span> == TT_PlayerProximity<span class="br0">)</span> <span class="br0">)</span>;
                <span class="kw1">if</span> <span class="br0">(</span> !bPlayerOnly <span class="br0">)</span>
                <span class="br0">{</span>
                        A = TriggerActor;
                        TriggerActor = TriggerActor2;
                        TriggerActor2 = A;
                <span class="br0">}</span>
        <span class="br0">}</span>
</pre></div>
<p>Again the code as a whole works, but let's face it, the rule of <i>ntars</i> should NOT apply here and this SHOULD be fixed imo. Perhaps people who wish to take advantage of custom Mover classes which are dependant on Triggers and TriggerActor(2) pointers should rewrite this function to fix it accordingly. Any thoughts&#160;?</p>
<p><b>Graphik:</b> I understand the trivial bit, but unfortunately not the useful part. I mean, I'm assuming there is one.</p>
<p><b>Xian:</b> In my opinon, the code needs a lot of optimization and checks (for example in most parts it does iterations to all Actors with their Event matching the current Tag, while proper way of doing it, is to check if the Actor has an Event set, but most importantly to not iterate at all if there is no Tag set; true it does it only in PBP, but still). This was just a code-related discussion, and I assumed coders that would create custom Movers for UT would find this interesting. If you want a useful side of it, let me put it this way: assuming I am right (and to me it looks like I am), I have yet to see a correction of logical errors which is not useful&#160;:)</p>
<p><b>Graphik:</b> OK cool.</p>
<p><b>Xian:</b> ok so an optimized version imo:</p>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="kw5">function</span> FindTriggerActor<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
        <span class="kw5">local</span> <a href="/Actor"><span class="kw10">Actor</span></a> A;
 
        TriggerActor = <span class="kw9">None</span>;
        TriggerActor2 = <span class="kw9">None</span>;
 
        <span class="co1">// Xian: if there is no tag at all, why bother ?</span>
        <span class="kw1">if</span> <span class="br0">(</span>Tag == <span class="st0">''</span><span class="br0">)</span>
             <span class="kw1">return</span>;
 
        <span class="kw1">foreach</span> AllActors<span class="br0">(</span><span class="kw5">class</span> <span class="st0">'Actor'</span>, A<span class="br0">)</span>
                <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>A.<span class="kw5">Event</span> != <span class="st0">''</span><span class="br0">)</span> &amp;&amp; <span class="br0">(</span>A.<span class="kw5">Event</span> == Tag<span class="br0">)</span> &amp;&amp; <span class="br0">(</span>A.<span class="kw7">IsA</span><span class="br0">(</span><span class="st0">'Trigger'</span><span class="br0">)</span> || A.<span class="kw7">IsA</span><span class="br0">(</span><span class="st0">'Mover'</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">)</span>
                <span class="br0">{</span>
                        <span class="kw1">if</span> <span class="br0">(</span> A.<span class="kw7">IsA</span><span class="br0">(</span><span class="st0">'Counter'</span><span class="br0">)</span> <span class="br0">)</span>
                        <span class="br0">{</span>
                                bPlayerOnly = <span class="kw9">true</span>;
                                <span class="kw1">return</span>; <span class="co1">//FIXME - handle counters</span>
                        <span class="br0">}</span>
                        <span class="kw1">if</span> <span class="br0">(</span>TriggerActor == <span class="kw9">None</span><span class="br0">)</span>
                                TriggerActor = A;
                        <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span> TriggerActor2 == <span class="kw9">None</span> <span class="br0">)</span>
                                TriggerActor2 = A;
                <span class="br0">}</span>
 
        <span class="kw1">if</span> <span class="br0">(</span> TriggerActor == <span class="kw9">None</span> <span class="br0">)</span>
        <span class="br0">{</span>
                bPlayerOnly = <span class="br0">(</span>BumpType == BT_PlayerBump<span class="br0">)</span>;
                <span class="kw1">return</span>;
        <span class="br0">}</span>
 
        bPlayerOnly = <span class="br0">(</span> TriggerActor.<span class="kw7">IsA</span><span class="br0">(</span><span class="st0">'Trigger'</span><span class="br0">)</span> &amp;&amp; <span class="br0">(</span>Trigger<span class="br0">(</span>TriggerActor<span class="br0">)</span>.<span class="me1">TriggerType</span> == TT_PlayerProximity<span class="br0">)</span> <span class="br0">)</span>;
        <span class="kw1">if</span> <span class="br0">(</span> bPlayerOnly &amp;&amp; <span class="br0">(</span> TriggerActor2 != <span class="kw9">None</span><span class="br0">)</span> <span class="br0">)</span>
        <span class="br0">{</span>
                <span class="co1">// Xian: fixed TriggerActor to TriggerActor2</span>
                bPlayerOnly = <span class="br0">(</span> TriggerActor2.<span class="kw7">IsA</span><span class="br0">(</span><span class="st0">'Trigger'</span><span class="br0">)</span> &amp;&amp; <span class="br0">(</span>Trigger<span class="br0">(</span>TriggerActor2<span class="br0">)</span>.<span class="me1">TriggerType</span> == TT_PlayerProximity<span class="br0">)</span> <span class="br0">)</span>;
                <span class="kw1">if</span> <span class="br0">(</span> !bPlayerOnly <span class="br0">)</span>
                <span class="br0">{</span>
                        A = TriggerActor;
                        TriggerActor = TriggerActor2;
                        TriggerActor2 = A;
                <span class="br0">}</span>
        <span class="br0">}</span>
<span class="br0">}</span>
</pre></div>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="kw5">function</span> PostBeginPlay<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
        <span class="kw5">local</span> mover M;
 
        <span class="co1">//brushes can't be deleted, so if not relevant, make it invisible and non-colliding</span>
        <span class="kw1">if</span> <span class="br0">(</span> !<span class="kw8">Level</span>.<span class="me1">Game</span>.<span class="me1">IsRelevant</span><span class="br0">(</span><span class="kw8">self</span><span class="br0">)</span> <span class="br0">)</span>
        <span class="br0">{</span>
                SetCollision<span class="br0">(</span><span class="kw9">false</span>, <span class="kw9">false</span>, <span class="kw9">false</span><span class="br0">)</span>;
                bCollideWorld = <span class="kw9">False</span>;  <span class="co1">// Xian: :)</span>
                SetLocation<span class="br0">(</span>Location + <span class="kw4">vect</span><span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">0</span>,<span class="nu0">20000</span><span class="br0">)</span><span class="br0">)</span>; <span class="co1">// temp since still in bsp</span>
                bHidden = <span class="kw9">true</span>;
        <span class="br0">}</span>
        <span class="kw1">else</span>
        <span class="br0">{</span>
                FindTriggerActor<span class="br0">(</span><span class="br0">)</span>;
                <span class="co1">// Initialize all slaves.</span>
                <span class="kw1">if</span><span class="br0">(</span> !bSlave &amp;&amp; <span class="br0">(</span>Tag != <span class="st0">''</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">)</span>    <span class="co1">// Xian: tag check</span>
                <span class="br0">{</span>
                        <span class="kw1">foreach</span> AllActors<span class="br0">(</span> <span class="kw5">class</span> <span class="st0">'Mover'</span>, M, Tag <span class="br0">)</span>
                        <span class="br0">{</span>
                                <span class="kw1">if</span><span class="br0">(</span> M.<span class="me1">bSlave</span> <span class="br0">)</span>
                                <span class="br0">{</span>
                                        M.<span class="kw7">GotoState</span><span class="br0">(</span><span class="st0">''</span><span class="br0">)</span>;
                                        M.<span class="me1">SetBase</span><span class="br0">(</span> <span class="kw8">Self</span> <span class="br0">)</span>;
                                <span class="br0">}</span>
                        <span class="br0">}</span>
                <span class="br0">}</span>
                <span class="kw1">if</span> <span class="br0">(</span> Leader == <span class="kw9">None</span> <span class="br0">)</span>
                <span class="br0">{</span> 
                        Leader = <span class="kw8">self</span>;
 
                        <span class="kw1">if</span> <span class="br0">(</span>ReturnGroup != <span class="st0">''</span><span class="br0">)</span>   <span class="co1">// Xian: tag check again</span>
                        <span class="br0">{</span>
                                <span class="kw1">foreach</span> AllActors<span class="br0">(</span> <span class="kw5">class</span><span class="st0">'Mover'</span>, M <span class="br0">)</span>
                                <span class="br0">{</span>
                                        <span class="kw1">if</span> <span class="br0">(</span> <span class="br0">(</span>M != <span class="kw8">self</span><span class="br0">)</span> &amp;&amp; <span class="br0">(</span>M.<span class="me1">ReturnGroup</span> == ReturnGroup<span class="br0">)</span> <span class="br0">)</span>
                                        <span class="br0">{</span>
                                                M.<span class="me1">Leader</span> = <span class="kw8">self</span>;
                                                M.<span class="me1">Follower</span> = Follower;
                                                Follower = M;
                                        <span class="br0">}</span>
                                <span class="br0">}</span>
                        <span class="br0">}</span>
                <span class="br0">}</span>
        <span class="br0">}</span>
<span class="br0">}</span>
</pre></div>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="kw5">function</span> FinishNotify<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
        <span class="kw5">local</span> <a href="/Pawn"><span class="kw10">Pawn</span></a> P;
 
        <span class="kw1">if</span> <span class="br0">(</span>WaitingPawn == <span class="kw9">None</span><span class="br0">)</span>
                <span class="kw1">return</span>;                        <span class="co1">// Xian: don't iterate unless needed</span>
 
<span class="co1">// Note: this does kinda upsets the blanace of Bot decission in case they assigned the current</span>
<span class="co1">// instance of the Mover as their special destination, but in most cases it's all about online play; </span>
<span class="co1">// although this is not something I recommend for UT as a whole, these changes should help for </span>
<span class="co1">// player-only mods that require online gameplay and is made for informative purposes</span>
 
        <span class="kw1">if</span> <span class="br0">(</span> StandingCount &gt; <span class="nu0">0</span> <span class="br0">)</span>
                <span class="kw1">for</span> <span class="br0">(</span> P=<span class="kw8">Level</span>.<span class="me1">PawnList</span>; P!=<span class="kw9">None</span>; P=P.<span class="me1">nextPawn</span> <span class="br0">)</span>
                        <span class="kw1">if</span> <span class="br0">(</span> P.<span class="me1">Base</span> == <span class="kw8">self</span><span class="br0">)</span>
                        <span class="br0">{</span>
<span class="co1">// Xian: is it even relevant to execute code for players since they're aware of mover states ?</span>
                                <span class="kw1">if</span> <span class="br0">(</span>P.<span class="kw7">IsA</span><span class="br0">(</span><span class="st0">'Bot'</span><span class="br0">)</span><span class="br0">)</span>
                                <span class="br0">{</span>
                                        P.<span class="me1">StopWaiting</span><span class="br0">(</span><span class="br0">)</span>;
 
                                        <span class="kw1">if</span> <span class="br0">(</span> <span class="br0">(</span>P.<span class="me1">SpecialGoal</span> == <span class="kw8">self</span><span class="br0">)</span> || <span class="br0">(</span>P.<span class="me1">SpecialGoal</span> == myMarker<span class="br0">)</span> <span class="br0">)</span>
                                                P.<span class="me1">SpecialGoal</span> = <span class="kw9">None</span>; 
                                <span class="br0">}</span>
 
                                <span class="kw1">if</span> <span class="br0">(</span> P == WaitingPawn <span class="br0">)</span>
                                        WaitingPawn = <span class="kw9">None</span>;
                        <span class="br0">}</span>
 
        <span class="kw1">if</span> <span class="br0">(</span> WaitingPawn != <span class="kw9">None</span> <span class="br0">)</span>
        <span class="br0">{</span>
                <span class="kw1">if</span> <span class="br0">(</span>WaitingPawn.<span class="kw7">IsA</span><span class="br0">(</span><span class="st0">'Bot'</span><span class="br0">)</span><span class="br0">)</span>
                <span class="br0">{</span>
                        WaitingPawn.<span class="me1">StopWaiting</span><span class="br0">(</span><span class="br0">)</span>;
                        <span class="kw1">if</span> <span class="br0">(</span> <span class="br0">(</span>WaitingPawn.<span class="me1">SpecialGoal</span> == <span class="kw8">self</span><span class="br0">)</span> || <span class="br0">(</span>WaitingPawn.<span class="me1">SpecialGoal</span> == myMarker<span class="br0">)</span> <span class="br0">)</span>
                                WaitingPawn.<span class="me1">SpecialGoal</span> = <span class="kw9">None</span>; 
                <span class="br0">}</span>
 
                WaitingPawn = <span class="kw9">None</span>;
        <span class="br0">}</span>
<span class="br0">}</span>
</pre></div>
<p>This is how it should all be in my opinion&#160;:) The code should execute faster. Not tested but in theory, it should be better.</p>
<p><a name="Subclasses" id="Subclasses"></a></p>
<h2><span class="mw-headline">Subclasses</span></h2>
<ul>
<li><a href="../../../../articles/t/y/p/Legacy%7ETypes_Of_Mover_5118.html" title="Legacy:Types Of Mover">Types of Mover</a> is a quick overview of the different classes of mover</li>
<li>AssertMover</li>
<li><a href="../../../../articles/a/t/t/Legacy%7EAttachMover_0840.html" title="Legacy:AttachMover">AttachMover</a></li>
<li>ElevatorMover</li>
<li><a href="../../../../articles/g/r/a/Legacy%7EGradualMover_0f81.html" title="Legacy:GradualMover">GradualMover</a></li>
<li>LoopMover</li>
<li>MixMover</li>
<li><a href="../../../../articles/r/o/t/Legacy%7ERotatingMover_f234.html" title="Legacy:RotatingMover">RotatingMover</a></li>
<li><a href="../../../../articles/f/i/x/Legacy%7EFixedMover_e813.html" title="Legacy:FixedMover">FixedMover</a> – custom class that fixes network bugs with movers than rotate in the process of opening or closing</li>
</ul>
<p>It's possible to change the class of a mover after it's been created, but it requires <a href="../../../../articles/b/r/u/Legacy%7EBrush_Hacking_a3e1.html" title="Legacy:Brush Hacking">Brush Hacking</a>.</p>
<p><a name="Related_Topics" id="Related_Topics"></a></p>
<h2><span class="mw-headline">Related Topics</span></h2>
<ul>
<li><a href="../../../../articles/m/o/v/Legacy%7EMover_Topics_947d.html" title="Legacy:Mover Topics">Mover Topics</a> is the hub for all related articles &amp; tutorials on making specific movers</li>
<li><a href="../../../../articles/t/y/p/Legacy%7ETypes_Of_Trigger_07fa.html" title="Legacy:Types Of Trigger">Types of Trigger</a></li>
<li><a href="../../../../articles/e/v/e/Legacy%7EEvent_714d.html" title="Legacy:Event">Event</a></li>
</ul>
<p><a name="Mover_Tutorials" id="Mover_Tutorials"></a></p>
<h2><span class="mw-headline">Mover Tutorials</span></h2>
<ul>
<li><a href="../../../../articles/c/r/e/Legacy%7ECreate_A_Mover_eb2c.html" title="Legacy:Create A Mover">Create A Mover</a></li>
<li><a href="../../../../articles/k/e/y/Legacy%7EKeyframe_b7a3.html" title="Legacy:Keyframe">Keyframe</a></li>
<li><a href="../../../../articles/a/c/t/Legacy%7EActivating_A_Mover_2f87.html" title="Legacy:Activating A Mover">Activating a Mover</a></li>
</ul>

<!-- 
NewPP limit report
Preprocessor node count: 40/1000000
Post-expand include size: 173/2097152 bytes
Template argument size: 107/2097152 bytes
#ifexist count: 0/100
-->
<div class="printfooter">
</div>
	    <div id="catlinks"><p class='catlinks'><a href="../../../../articles/c/a/t/Special%7ECategories_101d.html" title="Special:Categories">Category</a>: <span dir='ltr'><a href="../../../../articles/l/e/g/Category%7ELegacy_Class_%28UT%29_523c.html" title="Category:Legacy Class (UT)">Legacy Class (UT)</a></span></p></div>	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-legacy"
	       class="selected"	       ><a href="../../../../articles/m/o/v/Legacy%7EMover_%28UT%29_83ce.html">Legacy</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../../articles/m/o/v/Legacy_talk%7EMover_%28UT%29_3375.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://wiki.beyondunreal.com/Legacy:Mover_%28UT%29">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../../misc/uewiki.png);"
	    href="../../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-mainpage"><a href="../../../../index.html">Main Page</a></li>
	     	      <li id="n-portal"><a href="../../../../articles/c/o/m/Unreal_Wiki%7ECommunity_Portal_3311.html">Community portal</a></li>
	     	      <li id="n-help"><a href="../../../../articles/c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="../../../../../COPYING.html"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt='Attribution-Noncommercial-Share Alike 3.0' /></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 11:01, 10 April 2006 by Anonymous user(s) of Unreal Wiki. </li>	  <li id="f-copyright">Licensed as <a href="../../../../articles/c/o/p/Unreal_Wiki%7ECopyrights_e561.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>	  <li id="f-about"><a href="../../../../articles/a/b/o/Unreal_Wiki%7EAbout_9ce6.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>	  <li id="f-disclaimer"><a href="../../../../articles/g/e/n/Unreal_Wiki%7EGeneral_disclaimer_a0a2.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>
