<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- headlinks removed -->
	<link rel="shortcut icon" href="../../../../misc/uewiki-favicon.png"/>
    <title>Legacy:Moofed - Unreal Wiki</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../../skins/offline/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/md5.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/utf8.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/lookup.js"></script>
    <script type="text/javascript" src="../../../../articles/-/_/_/-.html"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../../articles/c/o/m/MediaWiki%7ECommon.css_d42e.html";
@import "../../../../articles/m/o/n/MediaWiki%7EMonobook.css_fb19.html";
@import "../../../../articles/-/_/_/-.html";
/*]]>*/</style>          </head>
  <body
    class="ns-100">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Legacy:Moofed</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</h3>
	    <div id="contentSub"></div>
	    	    	    <!-- start content -->
	    <table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#Moofed"><span class="tocnumber">1</span> <span class="toctext">Moofed</span></a>
<ul>
<li class="toclevel-2"><a href="#Carjack"><span class="tocnumber">1.1</span> <span class="toctext">Carjack</span></a>
<ul>
<li class="toclevel-3"><a href="#Civilians"><span class="tocnumber">1.1.1</span> <span class="toctext">Civilians</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#Discussion"><span class="tocnumber">2</span> <span class="toctext">Discussion</span></a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script>
<p><a name="Moofed" id="Moofed"></a></p>
<h2><span class="mw-headline">Moofed</span></h2>
<p>I'm a newer member of the Unreal modding community. I've been a long time fan of the Unreal games (I had an Unreal hat at one time, but it has long since been lost), but only recently have had the time and skills to look at any unrealscript.</p>
<p><a name="Carjack" id="Carjack"></a></p>
<h3><span class="mw-headline">Carjack</span></h3>
<p><b>Released!</b> The results of the Carjack project, including a download of the mod, are available from <a href="http://spock.informatics.indiana.edu/~carjack" class="external free" title="http://spock.informatics.indiana.edu/~carjack" rel="nofollow">http://spock.informatics.indiana.edu/~carjack</a></p>
<p>The performance in general is not that great because of the large amount of physics calculations and AI driver code from about 40 vehicles. Not recommended for Internet play. It would have been unplayable FPS-wise had we used an over-the-shoulder camera due to rendering an entire city's worth of static meshes. The top-down viewpoint avoided that problem nicely. But, it is fun with a couple friends on a LAN. Enjoy!</p>
<hr />
<p>Carjack is a mod I am working on to complete the capstone project for my Informatics degree from Indiana University. It is an attempt to clone the multiplayer gameplay from Grand Theft Auto 2, while making use of the modern amenities found in UnrealEngine2. My reason for this project is GTA2 has always been a blast to play at LAN parties, but it has certain limitations (such as using DirectPlay 6.1 for its netcode and being limited to 6 players) that make having fun playing it more difficult.</p>
<p>A video showcasing the progress of the project as of mid-Feburary 2006 is available:</p>
<p><a href="https://www.slashtmp.iu.edu/public/download.php?FILE=dlpierce/94788r7kgDF" class="external free" title="https://www.slashtmp.iu.edu/public/download.php?FILE=dlpierce/94788r7kgDF" rel="nofollow">https://www.slashtmp.iu.edu/public/download.php?FILE=dlpierce/94788r7kgDF</a></p>
<p>Yes, I do know that <a href="../../../../articles/m/o/d/Legacy%7EMod_Ideas_CarJack_0118.html" title="Legacy:Mod Ideas/CarJack">Mod_Ideas/CarJack</a> has the same name, but I didn't see that page until we had already started work. Plus "Carjack" is only a working title for now, it may change.</p>
<p><a name="Civilians" id="Civilians"></a></p>
<h4><span class="mw-headline">Civilians</span></h4>
<p>Part of what makes GTA2 so neat is there are hordes of civilians wondering the streets that pose no threat to the player. I anticipate this feature to be one of the more difficult in developing the mod, and is why I am writing about it here. What I want to make happen is</p>
<ul>
<li>Have civilian vehicles driving on city streets
<ul>
<li>These drivers should stop when something is in front of them, and when they come to a (red) traffic light.</li>
<li>They must drive on the streets, but will become spooked by gunshots and then drive erratically/aggressively or get out of the vehicle and run for their lives (effectively becoming a spooked pedestrian, see below).</li>
<li>A predetermined number of civilian vehicles will exist in the game at any one time. When one is destroyed, another is spawned at a random VehicleFactory location. Ideally, this will not be visible to the players. I am imagining a garage with doors that open up and the new civilian drives out. Only spawned civilians would be allowed out, no one allowed in.</li>
</ul>
</li>
<li>Have civilian pedestrians wandering the sidewalks.
<ul>
<li>Pedestrians stay on the sidewalks unless spooked, at which point they run away from the player.</li>
<li>There is a chance the pedestrian will not be a total pushover and will whip out a pistol and start shooting back.</li>
<li>Killed pedestrians have a chance of dropping an item (weapon, health, whatever).</li>
</ul>
</li>
</ul>
<p>To do all this I think I will need three seperate bot paths, two for vehicles (one for each side of the road) and one for pedestrians, plus some extra pathnodes only available to bots (if I got that far) and spooked NPCs. Spooked NPCs would also have the vehicle pathnodes at their disposal. Functioning stop lights are also necessary to make a believable traffic simulation, but obviously add much more complexity to the problem.</p>
<p><b>Update:</b> After much experimentation, I have decided that the NavigationPoint system is not suitable for what I want to do. The autoconnecting behavior ruins any attempt to make seperate paths from nodes in close proximity (such as the two lanes of a road).</p>
<p>Instead I have made a custom network of Actor nodes that each have an array of nodes that the vehicle can go to next (randomly selected). This has the advantage of allowing the mapper to precisely define the map's traffic behavior, and the disadvantages of not being automated like NavigationPoints are, and not having any lines displayed in UnrealEd. I can display the network inside the game using HUD.Draw3DLine, but UnrealEd has no HUDs as far as I can tell (or any way to change anything actually). I am thinking of making using a similar node network for civilian pedestrians, leaving the NavigationPoint network free to be dedicated to bots.</p>
<p>At first I was using MoveToward to make my vehicles move, but this again was insufficient. MoveToward dis not control the steering acurately enough to stay on the correct side of the road, instead the drivers would drunkenly drift over the centerline or onto the sidewalks. MoveToward also has no interface to control the vehicle's throttle, giving the all civilians a severe case of lead foot. This is my current driver controller:</p>
<div class="hidden-block">
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="hint">&lt;/span&gt;&lt;div <span class="kw5">class</span>=<span class="st0">"hidden"</span>&gt;class CarjackDriver <span class="kw5">extends</span> CarjackNPC;
 
<span class="kw5">var</span> <span class="kw4">int</span> NumRandomJumps;
<span class="kw5">var</span> <a href="/Actor"><span class="kw10">Actor</span></a> RandDest;
<span class="kw5">var</span> <a href="/Actor"><span class="kw10">Actor</span></a> TempPoint;
<span class="kw5">var</span> CarjackRoadNode DestRoadNode;
<span class="kw5">var</span> <span class="kw4">float</span> DriverThrottle, DriverSteering; <span class="co1">//Sets respective vehicle variables via Tick in the vehicle's code</span>
 
<span class="kw5">function</span> CarjackRoadNode FindRandomRoadNode<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
        <span class="kw5">local</span> array&lt;CarjackRoadNode&gt; NodeList;
        <span class="kw5">local</span> CarjackRoadNode Node;
        <span class="kw5">local</span> <span class="kw4">int</span> i;
 
        <span class="kw1">foreach</span> AllActors<span class="br0">(</span><span class="kw5">class</span><span class="st0">'CarjackRoadNode'</span>, Node<span class="br0">)</span>
        <span class="br0">{</span>
                NodeList<span class="br0">[</span>i<span class="br0">]</span> = Node;
                i++;
        <span class="br0">}</span>
        <span class="kw1">return</span> NodeList<span class="br0">[</span><span class="kw7">Rand</span><span class="br0">(</span>NodeList.<span class="kw6">Length</span><span class="br0">)</span><span class="br0">]</span>;
<span class="br0">}</span>
 
<span class="kw5">function</span> CarjackRoadNode FindNearestRoadNode<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
        <span class="kw5">local</span> CarjackRoadNode Node, ClosestNode;
        <span class="kw5">local</span> <span class="kw4">float</span> Dist, ClosestDist;
 
        ClosestDist = <span class="nu0">100000.0</span>;
 
        <span class="kw1">foreach</span> AllActors<span class="br0">(</span><span class="kw5">class</span><span class="st0">'CarjackRoadNode'</span>, Node<span class="br0">)</span>
        <span class="br0">{</span>
                Dist = VSize<span class="br0">(</span>Node.<span class="me1">Location</span> - <a href="/Pawn"><span class="kw10">Pawn</span></a>.<span class="me1">Location</span><span class="br0">)</span>;
                <span class="kw1">if</span> <span class="br0">(</span>Dist &lt; ClosestDist<span class="br0">)</span>
                <span class="br0">{</span>
                        ClosestNode = Node;
                        ClosestDist = Dist;
                <span class="br0">}</span>
        <span class="br0">}</span>
        <span class="kw1">return</span> ClosestNode;
<span class="br0">}</span>
 
<span class="kw5">function</span> CarjackRoadNode FindNextRoadNode<span class="br0">(</span>CarjackRoadNode CurrentNode<span class="br0">)</span>
<span class="br0">{</span>
        <span class="kw1">return</span> CurrentNode.<span class="me1">GetNextNode</span><span class="br0">(</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="co1">//Check for Pawns in the way.</span>
<span class="kw5">function</span> <span class="kw4">bool</span> CheckObstruction<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
        <span class="kw5">local</span> <span class="kw4">vector</span> HitLocation, HitNormal, ExtentSize;
 
        ExtentSize.<span class="me1">X</span> = CarjackVehicle<span class="br0">(</span><a href="/Pawn"><span class="kw10">Pawn</span></a><span class="br0">)</span>.<span class="me1">VehicleWidth</span>;
        ExtentSize.<span class="me1">Y</span> = CarjackVehicle<span class="br0">(</span><a href="/Pawn"><span class="kw10">Pawn</span></a><span class="br0">)</span>.<span class="me1">VehicleWidth</span>;
 
        <span class="kw1">if</span> <span class="br0">(</span><a href="/Pawn"><span class="kw10">Pawn</span></a><span class="br0">(</span>Trace<span class="br0">(</span>HitLocation, HitNormal, <span class="br0">(</span><span class="kw4">vector</span><span class="br0">(</span><a href="/Pawn"><span class="kw10">Pawn</span></a>.<span class="me1">Rotation</span><span class="br0">)</span> * <span class="nu0">250</span><span class="br0">)</span> + <a href="/Pawn"><span class="kw10">Pawn</span></a>.<span class="me1">Location</span>, <a href="/Pawn"><span class="kw10">Pawn</span></a>.<span class="me1">Location</span>, <span class="kw9">true</span>, ExtentSize<span class="br0">)</span><span class="br0">)</span> != <span class="kw9">None</span><span class="br0">)</span>
        <span class="br0">{</span>
                <span class="kw1">return</span> <span class="kw9">true</span>;
        <span class="br0">}</span>
        <span class="kw1">return</span> <span class="kw9">false</span>;
<span class="br0">}</span>
 
<span class="kw6">auto</span> <span class="kw5">state</span> Driving
<span class="br0">{</span>
        <span class="kw5">function</span> SetThrottle<span class="br0">(</span><span class="br0">)</span>
        <span class="br0">{</span>
                <span class="kw5">local</span> Vehicle V;
 
                V = Vehicle<span class="br0">(</span><a href="/Pawn"><span class="kw10">Pawn</span></a><span class="br0">)</span>;
 
                <span class="kw1">if</span> <span class="br0">(</span>VSize<span class="br0">(</span>V.<span class="me1">Velocity</span><span class="br0">)</span> &gt; DestRoadNode.<span class="me1">SpeedLimit</span><span class="br0">)</span>
                <span class="br0">{</span>
                        DriverThrottle = <span class="nu0">0.25</span>;
                <span class="br0">}</span>
                <span class="kw1">else</span>
                <span class="br0">{</span>
                        DriverThrottle = <span class="nu0">0.90</span>;
                <span class="br0">}</span>
        <span class="br0">}</span>
 
        <span class="kw5">function</span> SetSteering<span class="br0">(</span><span class="br0">)</span>
        <span class="br0">{</span>
                <span class="kw5">local</span> <span class="kw4">float</span> RadiansDelta, RightOrLeft, ForwardOrBackward;
                <span class="kw5">local</span> Vehicle V;
 
                V = Vehicle<span class="br0">(</span><a href="/Pawn"><span class="kw10">Pawn</span></a><span class="br0">)</span>;
 
                RadiansDelta = <span class="kw7">Acos</span><span class="br0">(</span>Normal<span class="br0">(</span><span class="kw4">vector</span><span class="br0">(</span>V.<span class="me1">Rotation</span><span class="br0">)</span><span class="br0">)</span> <span class="kw3">dot</span> Normal<span class="br0">(</span>DestRoadNode.<span class="me1">Location</span> - V.<span class="me1">Location</span><span class="br0">)</span><span class="br0">)</span>;
                RightOrLeft = <span class="br0">(</span><span class="br0">(</span><span class="kw4">vector</span><span class="br0">(</span>V.<span class="me1">Rotation</span><span class="br0">)</span><span class="br0">)</span> <span class="kw3">cross</span> <span class="kw4">vect</span><span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">0</span>,<span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> <span class="kw3">dot</span> Normal<span class="br0">(</span>DestRoadNode.<span class="me1">Location</span> - V.<span class="me1">Location</span><span class="br0">)</span>;
                ForwardOrBackward = <span class="kw4">vector</span><span class="br0">(</span>V.<span class="me1">Rotation</span><span class="br0">)</span> <span class="kw3">dot</span> Normal<span class="br0">(</span>DestRoadNode.<span class="me1">Location</span> - V.<span class="me1">Location</span><span class="br0">)</span>;
 
                <span class="kw1">if</span> <span class="br0">(</span>RightOrLeft &lt; <span class="nu0">0.0</span><span class="br0">)</span> <span class="co1">// Turn Left</span>
                <span class="br0">{</span>
                        DriverSteering = <span class="kw7">FClamp</span><span class="br0">(</span>RadiansDelta, <span class="nu0">0.0</span>, <span class="nu0">1.0</span><span class="br0">)</span> * <span class="nu0">-1</span>;
                <span class="br0">}</span>
                <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>RightOrLeft &gt; <span class="nu0">0.0</span><span class="br0">)</span> <span class="co1">// Turn Right</span>
                <span class="br0">{</span>
                        DriverSteering = <span class="kw7">FClamp</span><span class="br0">(</span>RadiansDelta, <span class="nu0">0.0</span>, <span class="nu0">1.0</span><span class="br0">)</span>;
                <span class="br0">}</span>
                <span class="kw1">else</span>
                <span class="br0">{</span>
                        DriverSteering = <span class="nu0">0.0</span>;
                <span class="br0">}</span>
        <span class="br0">}</span>
 
Begin:
        <span class="kw1">if</span> <span class="br0">(</span>DestRoadNode == <span class="kw9">None</span><span class="br0">)</span>
        <span class="br0">{</span>
                DestRoadNode = FindNearestRoadNode<span class="br0">(</span><span class="br0">)</span>;
        <span class="br0">}</span>
 
        <span class="kw1">if</span> <span class="br0">(</span>CheckObstruction<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
        <span class="br0">{</span>
                <span class="kw7">GoToState</span><span class="br0">(</span><span class="st0">'Obstructed'</span><span class="br0">)</span>;
        <span class="br0">}</span>
 
        <span class="kw1">if</span> <span class="br0">(</span>VSize<span class="br0">(</span>DestRoadNode.<span class="me1">Location</span> - <a href="/Pawn"><span class="kw10">Pawn</span></a>.<span class="me1">Location</span><span class="br0">)</span> &lt; <span class="nu0">200</span><span class="br0">)</span>
        <span class="br0">{</span>
                <span class="kw1">if</span> <span class="br0">(</span>DestRoadNode.<span class="me1">bStopTraffic</span><span class="br0">)</span>
                <span class="br0">{</span>
                        <span class="kw7">GotoState</span><span class="br0">(</span><span class="st0">'Stopped'</span><span class="br0">)</span>;
                <span class="br0">}</span>
                <span class="kw1">else</span>
                <span class="br0">{</span>
                        DestRoadNode = FindNextRoadNode<span class="br0">(</span>DestRoadNode<span class="br0">)</span>;
                <span class="br0">}</span>
        <span class="br0">}</span>
 
        SetThrottle<span class="br0">(</span><span class="br0">)</span>;
        SetSteering<span class="br0">(</span><span class="br0">)</span>;
 
        Sleep<span class="br0">(</span><span class="nu0">0.2</span><span class="br0">)</span>;
        <span class="kw1">Goto</span><span class="br0">(</span><span class="st0">'Begin'</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw5">state</span> Stopped
<span class="br0">{</span>
        <span class="kw5">function</span> SetThrottle<span class="br0">(</span><span class="br0">)</span>
        <span class="br0">{</span>
                DriverThrottle = <span class="nu0">0</span>;
        <span class="br0">}</span>
 
Begin:
        SetThrottle<span class="br0">(</span><span class="br0">)</span>;
        <span class="kw1">if</span> <span class="br0">(</span>!DestRoadNode.<span class="me1">bStopTraffic</span><span class="br0">)</span>
        <span class="br0">{</span>
                <span class="kw7">GotoState</span><span class="br0">(</span><span class="st0">'Driving'</span><span class="br0">)</span>;
        <span class="br0">}</span>
        Sleep<span class="br0">(</span><span class="nu0">0.5</span><span class="br0">)</span>;
        <span class="kw1">Goto</span><span class="br0">(</span><span class="st0">'Begin'</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw5">state</span> Obstructed
<span class="br0">{</span>
        <span class="kw5">function</span> SetThrottle<span class="br0">(</span><span class="br0">)</span>
        <span class="br0">{</span>
                DriverThrottle = <span class="nu0">0</span>;
        <span class="br0">}</span>
 
Begin:
        SetThrottle<span class="br0">(</span><span class="br0">)</span>;
        <span class="kw1">if</span> <span class="br0">(</span>!CheckObstruction<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
        <span class="br0">{</span>
                <span class="kw7">GotoState</span><span class="br0">(</span><span class="st0">'Driving'</span><span class="br0">)</span>;
        <span class="br0">}</span>
        Sleep<span class="br0">(</span><span class="nu0">0.5</span><span class="br0">)</span>;
        <span class="kw1">Goto</span><span class="br0">(</span><span class="st0">'Begin'</span><span class="br0">)</span>;
<span class="br0">}</span></span>
</pre></div>
</div>
<p>Thoughts please.</p>
<p><a name="Discussion" id="Discussion"></a></p>
<h2><span class="mw-headline">Discussion</span></h2>
<p><b>Wormbo:</b> Hi and welcome to the Wiki.&#160;:)</p>
<p><b>Jimboh:</b> Hmm...civilians are surprisingly easy. All you have to do is create a pawn...then create an AIController without the monster states - add the model, and PRESTO! Instant Civilian! Of course then you'd have to create some botpaths for your civvies. I remember in Tanus' Syndicate 2003 MOD he had a tutorial on NPC's...the site is down, so if anyone has the tutorial saved, it would be most helpful...</p>
<p><b>Sweavo:</b> Hi there, I posted that <a href="../../../../articles/m/o/d/Legacy%7EMod_Ideas_Civilians_9862.html" title="Legacy:Mod Ideas/Civilians">Mod Ideas/Civilians</a> page. I'm interested in following progress and assisting in this mod. I'm thinking off-map factories too. See DM-Autoroute2 for a map that would really benefit from civilians. I anticipate the <b>hardest</b> part of this is realistic AI, combining the "milling about" behaviour with the "spooked" to make the civilians look like they have a back-story, . Once that bit's done, the <b>most work</b> would likely be coming up with meshes and textures for the pawns and vehicles. I have no clue when it comes to modelling. Maybe the unwheel project has spare vehicles that can be adapted.</p>
<p><b>SuperApe:</b> Hi, Moofed. (Welcome&#160;:)) What Jimboh is saying is true. It can be easy, but I agree with Sweavo too, in that you'd probably want a different kind of AI. And I think different models, animations and skins are a good idea too. (animations without weapon-holding for example) I suggest, because most of what makes up a Bot and xPawn are geared for combat, borrow what you can from them (perhaps use them for testing purposes too) and then begin to implement your own custom stuff. You and Sweavo should take a look at the <a href="../../../../articles/m/a/y/Legacy%7EMaya_PLE_Character_Model_Tutorial_0410.html" title="Legacy:Maya PLE Character Model Tutorial">Maya PLE Character Model Tutorial</a>, it should not be too hard to implement a custom civilian model and animation. And, check out <a href="../../../../articles/n/p/c/Legacy%7ENPC_Support_b02e.html" title="Legacy:NPC Support">NPC Support</a> for ideas. Can't wait to see what you guys come up with. It sounds neat.&#160;:)</p>
<p><b>Moofed:</b> Thanks for the warm welcome everyone!&#160;:cheesy: I should mention that there are two other people working on the mod, one who is concentrating on building a cityscape map, the other is a modeler and is making a first set of real world vehicles to play with, not to mention some staticmeshes for the map. I'm already using some of the skidmark code from UnWheel (with permission of course), so I might see about including some of their vehicles as well. They've been a great help for resolving scaling issues already. I'll try to get a basic pedestrian working tonight.</p>
<p><b>Tarquin:</b> Hi, welcome. Interesting project!</p>
<p><b>Moofed:</b> I thought this would be a simple task, but the FindRandomDest() function insists upon returning nothing but None. If I extend from MonsterController the function works, but as already stated. we want to extend from Controller. Help?</p>
<p><b>SuperApe:</b> Sorry, FindRandomDest() is an EMPTY function. It's actually used in a few places, but it's completely useless in stock Controller classes. It must have been defined for subclass use. But, no big deal. Finding a <i>random</i> destination isn't much harder than picking a NavigationPoint that isn't <tt>taken</tt>.</p>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="kw5">function</span> NavigationPoint FindRandomDest<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
     <span class="kw5">local</span> NavigationPoint N;
     <span class="kw5">local</span> array&lt;NavigationPoint&gt; NP;
     <span class="kw5">local</span> <span class="kw4">int</span> i;
 
     NP.<span class="kw6">Insert</span><span class="br0">(</span>i,<span class="nu0">1</span><span class="br0">)</span>;
     <span class="kw1">forEach</span> AllActors<span class="br0">(</span> <span class="kw5">class</span><span class="st0">'NavigationPoint'</span>, N <span class="br0">)</span>
          <span class="kw1">if</span> <span class="br0">(</span> !N.<span class="me1">taken</span> <span class="br0">)</span>
          <span class="br0">{</span>
               NP<span class="br0">[</span>i<span class="br0">]</span> = N;
               i++;
               NP.<span class="kw6">Insert</span><span class="br0">(</span>i,<span class="nu0">1</span><span class="br0">)</span>;
          <span class="br0">}</span>
     <span class="kw1">return</span> NP<span class="br0">[</span> <span class="kw7">FRand</span><span class="br0">(</span><span class="br0">)</span> * i <span class="br0">]</span>;
<span class="br0">}</span>
</pre></div>
<p>Re-define as necessary.&#160;:) <b>Moofed:</b> Thanks! I saw</p>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="kw6">native</span><span class="br0">(</span><span class="nu0">525</span><span class="br0">)</span> <span class="kw6">final</span> <span class="kw5">function</span> NavigationPoint FindRandomDest<span class="br0">(</span><span class="br0">)</span>;
</pre></div>
<p>so I thought it couldn't be overridden and the source would not be available. Maybe it is overridden in yet more native code...</p>
<p><b>SuperApe:</b> Well, whether there is some code to it now or not, I suppose you might as well try to override it for your custom purposes in the Pedestrian/Civilian controller. If you can't override it, perhaps you can use this code anyway in a similar function.</p>
<p><b>Draconx:</b> This is what I use in my mod for original UT... assuming it still works (Why wouldn't it...) it is much more efficient than the above foreach AllActors method.</p>
<div dir="ltr" style="text-align: left;" class="highlighted-source">
<pre class="source-uscript">
<span class="kw1">for</span> <span class="br0">(</span>N = <span class="kw8">Level</span>.<span class="me1">NavigationPointList</span>; N != <span class="kw9">None</span>; N = N.<span class="me1">NextNavigationPoint</span><span class="br0">)</span>
</pre></div>
<p><b>SuperApe:</b> That's great!&#160;:) I can use that too. Thanks.</p>

<!-- 
NewPP limit report
Preprocessor node count: 24/1000000
Post-expand include size: 6/2097152 bytes
Template argument size: 0/2097152 bytes
#ifexist count: 0/100
-->
<div class="printfooter">
</div>
	    <div id="catlinks"><p class='catlinks'><a href="../../../../articles/c/a/t/Special%7ECategories_101d.html" title="Special:Categories">Category</a>: <span dir='ltr'><a href="../../../../articles/l/e/g/Category%7ELegacy_Personal_Page_0f2d.html" title="Category:Legacy Personal Page">Legacy Personal Page</a></span></p></div>	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-legacy"
	       class="selected"	       ><a href="../../../../articles/m/o/o/Legacy%7EMoofed_f92c.html">Legacy</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../../articles/m/o/o/Legacy_talk%7EMoofed_ec88.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://wiki.beyondunreal.com/Legacy:Moofed">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../../misc/uewiki.png);"
	    href="../../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-mainpage"><a href="../../../../index.html">Main Page</a></li>
	     	      <li id="n-portal"><a href="../../../../articles/c/o/m/Unreal_Wiki%7ECommunity_Portal_3311.html">Community portal</a></li>
	     	      <li id="n-help"><a href="../../../../articles/c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="../../../../../COPYING.html"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt='Attribution-Noncommercial-Share Alike 3.0' /></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 16:28, 28 September 2006 by Anonymous user(s) of Unreal Wiki. </li>	  <li id="f-copyright">Licensed as <a href="../../../../articles/c/o/p/Unreal_Wiki%7ECopyrights_e561.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>	  <li id="f-about"><a href="../../../../articles/a/b/o/Unreal_Wiki%7EAbout_9ce6.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>	  <li id="f-disclaimer"><a href="../../../../articles/g/e/n/Unreal_Wiki%7EGeneral_disclaimer_a0a2.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>
